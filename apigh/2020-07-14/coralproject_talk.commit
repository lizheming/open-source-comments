{
  "sha": "f8234e53edba529b64a90686863a2f541f316818",
  "node_id": "MDY6Q29tbWl0NzI0NTQyNDI6ZjgyMzRlNTNlZGJhNTI5YjY0YTkwNjg2ODYzYTJmNTQxZjMxNjgxOA==",
  "commit": {
    "author": {
      "name": "Wyatt Johnson",
      "email": "wyattjoh@gmail.com",
      "date": "2020-07-13T22:23:54Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2020-07-13T22:23:54Z"
    },
    "message": "fix: added Other as flagging reason to ui (#3014)",
    "tree": {
      "sha": "a5e7c441d94c47b1b960b5953eea042d6cbe8543",
      "url": "https://api.github.com/repos/coralproject/talk/git/trees/a5e7c441d94c47b1b960b5953eea042d6cbe8543"
    },
    "url": "https://api.github.com/repos/coralproject/talk/git/commits/f8234e53edba529b64a90686863a2f541f316818",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfDN76CRBK7hj4Ov3rIwAAdHIIABtn0T9RPr/eNHLOkAbgCOHP\nppsgu539E9ANZ7VnZyEhryj9ZK0Vp8rmWoyrNgRWWqh/A6tmpOThATYX8i1ishmH\n2AcaYpM3OfvT97M3y2EQnid7plZN3lToULVg0XnfTK/8M/WV0uDVLWUjl8qYaQ3X\nKA2KBjWUuUXI1OqDYgn0Hf5ZnVSEEhpJvpQEuZvhGj0d0EHICw6K/Ct1MB26W94n\noAhYyAeItEWALQei/gl0+zG609IyoisQYtO+adL/V2ZzYDr6OUEntmoqJJqh29J+\ndcBr6SywHG+U7HdtniGokvhFcOhgXV48/oNE5HV+evGbwsjileG8Dyus+hwjNMA=\n=qN+5\n-----END PGP SIGNATURE-----\n",
      "payload": "tree a5e7c441d94c47b1b960b5953eea042d6cbe8543\nparent 7b2cdbad497254de420029d3efe57f4a6878adfe\nauthor Wyatt Johnson <wyattjoh@gmail.com> 1594679034 +0000\ncommitter GitHub <noreply@github.com> 1594679034 +0000\n\nfix: added Other as flagging reason to ui (#3014)\n\n"
    }
  },
  "url": "https://api.github.com/repos/coralproject/talk/commits/f8234e53edba529b64a90686863a2f541f316818",
  "html_url": "https://github.com/coralproject/talk/commit/f8234e53edba529b64a90686863a2f541f316818",
  "comments_url": "https://api.github.com/repos/coralproject/talk/commits/f8234e53edba529b64a90686863a2f541f316818/comments",
  "author": {
    "login": "wyattjoh",
    "id": 633002,
    "node_id": "MDQ6VXNlcjYzMzAwMg==",
    "avatar_url": "https://avatars2.githubusercontent.com/u/633002?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wyattjoh",
    "html_url": "https://github.com/wyattjoh",
    "followers_url": "https://api.github.com/users/wyattjoh/followers",
    "following_url": "https://api.github.com/users/wyattjoh/following{/other_user}",
    "gists_url": "https://api.github.com/users/wyattjoh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wyattjoh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wyattjoh/subscriptions",
    "organizations_url": "https://api.github.com/users/wyattjoh/orgs",
    "repos_url": "https://api.github.com/users/wyattjoh/repos",
    "events_url": "https://api.github.com/users/wyattjoh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wyattjoh/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "7b2cdbad497254de420029d3efe57f4a6878adfe",
      "url": "https://api.github.com/repos/coralproject/talk/commits/7b2cdbad497254de420029d3efe57f4a6878adfe",
      "html_url": "https://github.com/coralproject/talk/commit/7b2cdbad497254de420029d3efe57f4a6878adfe"
    }
  ],
  "stats": {
    "total": 338,
    "additions": 201,
    "deletions": 137
  },
  "files": [
    {
      "sha": "39d17bea8132ccacea9af16c8cb91ebaf54b2e70",
      "filename": "src/core/client/admin/components/ModerateCard/FlagDetails.tsx",
      "status": "added",
      "additions": 48,
      "deletions": 0,
      "changes": 48,
      "blob_url": "https://github.com/coralproject/talk/blob/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/FlagDetails.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/FlagDetails.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/FlagDetails.tsx?ref=f8234e53edba529b64a90686863a2f541f316818",
      "patch": "@@ -0,0 +1,48 @@\n+import React, { FunctionComponent } from \"react\";\n+\n+import NotAvailable from \"coral-admin/components/NotAvailable\";\n+\n+import FlagDetailsCategory from \"./FlagDetailsCategory\";\n+import FlagDetailsEntry from \"./FlagDetailsEntry\";\n+\n+interface Props {\n+  category: React.ReactNode;\n+  nodes: ReadonlyArray<{\n+    flagger: { id: string; username: string | null } | null;\n+    additionalDetails: string | null;\n+  }>;\n+  onUsernameClick: (id?: string) => void;\n+}\n+\n+const FlagDetails: FunctionComponent<Props> = ({\n+  category,\n+  nodes,\n+  onUsernameClick,\n+}) => {\n+  if (nodes.length === 0) {\n+    return null;\n+  }\n+\n+  return (\n+    <FlagDetailsCategory category={category}>\n+      {nodes.map((flag, i) => (\n+        <FlagDetailsEntry\n+          key={i}\n+          onClick={() =>\n+            flag.flagger ? onUsernameClick(flag.flagger.id) : null\n+          }\n+          user={\n+            flag.flagger && flag.flagger.username ? (\n+              flag.flagger.username\n+            ) : (\n+              <NotAvailable />\n+            )\n+          }\n+          details={flag.additionalDetails}\n+        />\n+      ))}\n+    </FlagDetailsCategory>\n+  );\n+};\n+\n+export default FlagDetails;"
    },
    {
      "sha": "2a56a7375a3a5a5d2742c16111a092c0c3a0a0e4",
      "filename": "src/core/client/admin/components/ModerateCard/FlagDetailsCategory.css",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/FlagDetailsCategory.css",
      "raw_url": "https://github.com/coralproject/talk/raw/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/FlagDetailsCategory.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/FlagDetailsCategory.css?ref=f8234e53edba529b64a90686863a2f541f316818",
      "patch": "@@ -1,8 +1,8 @@\n $moderateCardFlagsCategoryColor: var(--v2-colors-mono-500);\n \n .category {\n-  font-size: var(--v2-font-size-4);\n-  font-weight: var(--v2-font-weight-primary-regular);\n+  font-size: var(--v2-font-size-3);\n+  font-weight: var(--v2-font-weight-primary-bold);\n   font-family: var(--v2-font-family-primary);\n   line-height: var(--v2-line-height-body-short);\n   color: $moderateCardFlagsCategoryColor;"
    },
    {
      "sha": "e39d1fa3be18ad705a0e6bf1014a89d773420824",
      "filename": "src/core/client/admin/components/ModerateCard/FlagDetailsContainer.css",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/FlagDetailsContainer.css",
      "raw_url": "https://github.com/coralproject/talk/raw/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/FlagDetailsContainer.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/FlagDetailsContainer.css?ref=f8234e53edba529b64a90686863a2f541f316818",
      "patch": "@@ -0,0 +1,3 @@\n+.detailsDivider {\n+  border-top: 1px solid var(--v2-colors-grey-100);\n+}"
    },
    {
      "sha": "4ed57454fe470eff837cc9896519ea45da8dac98",
      "filename": "src/core/client/admin/components/ModerateCard/FlagDetailsContainer.tsx",
      "status": "modified",
      "additions": 87,
      "deletions": 75,
      "changes": 162,
      "blob_url": "https://github.com/coralproject/talk/blob/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/FlagDetailsContainer.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/FlagDetailsContainer.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/FlagDetailsContainer.tsx?ref=f8234e53edba529b64a90686863a2f541f316818",
      "patch": "@@ -1,20 +1,61 @@\n import { Localized } from \"@fluent/react/compat\";\n-import React, { FunctionComponent } from \"react\";\n+import React, { FunctionComponent, useMemo } from \"react\";\n import { graphql } from \"react-relay\";\n \n-import NotAvailable from \"coral-admin/components/NotAvailable\";\n import { TOXICITY_THRESHOLD_DEFAULT } from \"coral-common/constants\";\n import { withFragmentContainer } from \"coral-framework/lib/relay\";\n import { GQLCOMMENT_FLAG_REASON } from \"coral-framework/schema\";\n import { HorizontalGutter } from \"coral-ui/components/v2\";\n \n-import { FlagDetailsContainer_comment } from \"coral-admin/__generated__/FlagDetailsContainer_comment.graphql\";\n+import {\n+  COMMENT_FLAG_REASON,\n+  FlagDetailsContainer_comment,\n+} from \"coral-admin/__generated__/FlagDetailsContainer_comment.graphql\";\n import { FlagDetailsContainer_settings } from \"coral-admin/__generated__/FlagDetailsContainer_settings.graphql\";\n \n+import FlagDetails from \"./FlagDetails\";\n import FlagDetailsCategory from \"./FlagDetailsCategory\";\n-import FlagDetailsEntry from \"./FlagDetailsEntry\";\n import ToxicityLabel from \"./ToxicityLabel\";\n \n+import styles from \"./FlagDetailsContainer.css\";\n+\n+interface Reasons<T> {\n+  offensive: T[];\n+  abusive: T[];\n+  spam: T[];\n+  other: T[];\n+}\n+\n+function reduceReasons<\n+  T extends { readonly reason: COMMENT_FLAG_REASON | null }\n+>(nodes: ReadonlyArray<T>) {\n+  const initialValue: Reasons<T> = {\n+    offensive: [],\n+    abusive: [],\n+    spam: [],\n+    other: [],\n+  };\n+\n+  return nodes.reduce((reasons, node) => {\n+    switch (node.reason) {\n+      case GQLCOMMENT_FLAG_REASON.COMMENT_REPORTED_OFFENSIVE:\n+        reasons.offensive.push(node);\n+        break;\n+      case GQLCOMMENT_FLAG_REASON.COMMENT_REPORTED_ABUSIVE:\n+        reasons.abusive.push(node);\n+        break;\n+      case GQLCOMMENT_FLAG_REASON.COMMENT_REPORTED_SPAM:\n+        reasons.spam.push(node);\n+        break;\n+      case GQLCOMMENT_FLAG_REASON.COMMENT_REPORTED_OTHER:\n+        reasons.other.push(node);\n+        break;\n+    }\n+\n+    return reasons;\n+  }, initialValue);\n+}\n+\n interface Props {\n   comment: FlagDetailsContainer_comment;\n   settings: FlagDetailsContainer_settings;\n@@ -26,21 +67,16 @@ const FlagDetailsContainer: FunctionComponent<Props> = ({\n   onUsernameClick,\n   settings,\n }) => {\n-  const metadata = comment.revision ? comment.revision.metadata : null;\n-  const nodes = comment.flags.nodes;\n-\n-  const offensive = nodes.filter(\n-    ({ reason }) => reason === GQLCOMMENT_FLAG_REASON.COMMENT_REPORTED_OFFENSIVE\n-  );\n-  const abusive = nodes.filter(\n-    ({ reason }) => reason === GQLCOMMENT_FLAG_REASON.COMMENT_REPORTED_ABUSIVE\n-  );\n-  const spam = nodes.filter(\n-    ({ reason }) => reason === GQLCOMMENT_FLAG_REASON.COMMENT_REPORTED_SPAM\n+  const { offensive, abusive, spam, other } = useMemo(\n+    () => reduceReasons(comment.flags.nodes),\n+    [comment.flags.nodes]\n   );\n \n+  const metadata = comment.revision ? comment.revision.metadata : null;\n+\n   return (\n     <HorizontalGutter size=\"oneAndAHalf\">\n+      <hr className={styles.detailsDivider} />\n       {metadata && metadata.perspective && (\n         <FlagDetailsCategory\n           category={\n@@ -58,66 +94,42 @@ const FlagDetailsContainer: FunctionComponent<Props> = ({\n           />\n         </FlagDetailsCategory>\n       )}\n-      {offensive.length > 0 && (\n-        <FlagDetailsCategory\n-          category={\n-            <Localized id=\"moderate-flagDetails-offensive\">\n-              <span>Offensive</span>\n-            </Localized>\n-          }\n-        >\n-          {offensive.map((flag, i) => (\n-            <FlagDetailsEntry\n-              key={i}\n-              onClick={() =>\n-                flag.flagger ? onUsernameClick(flag.flagger.id) : null\n-              }\n-              user={flag.flagger ? flag.flagger.username : <NotAvailable />}\n-              details={flag.additionalDetails}\n-            />\n-          ))}\n-        </FlagDetailsCategory>\n-      )}\n-      {abusive.length > 0 && (\n-        <FlagDetailsCategory\n-          category={\n-            <Localized id=\"moderate-flagDetails-abusive\">\n-              <span>Abusive</span>\n-            </Localized>\n-          }\n-        >\n-          {abusive.map((flag, i) => (\n-            <FlagDetailsEntry\n-              key={i}\n-              onClick={() =>\n-                flag.flagger ? onUsernameClick(flag.flagger.id) : null\n-              }\n-              user={flag.flagger ? flag.flagger.username : <NotAvailable />}\n-              details={flag.additionalDetails}\n-            />\n-          ))}\n-        </FlagDetailsCategory>\n-      )}\n-      {spam.length > 0 && (\n-        <FlagDetailsCategory\n-          category={\n-            <Localized id=\"moderate-flagDetails-spam\">\n-              <span>Spam</span>\n-            </Localized>\n-          }\n-        >\n-          {spam.map((flag, i) => (\n-            <FlagDetailsEntry\n-              onClick={() =>\n-                flag.flagger ? onUsernameClick(flag.flagger.id) : null\n-              }\n-              key={i}\n-              user={flag.flagger ? flag.flagger.username : <NotAvailable />}\n-              details={flag.additionalDetails}\n-            />\n-          ))}\n-        </FlagDetailsCategory>\n-      )}\n+      <FlagDetails\n+        category={\n+          <Localized id=\"moderate-flagDetails-offensive\">\n+            <span>Offensive</span>\n+          </Localized>\n+        }\n+        nodes={offensive}\n+        onUsernameClick={onUsernameClick}\n+      />\n+      <FlagDetails\n+        category={\n+          <Localized id=\"moderate-flagDetails-abusive\">\n+            <span>Abusive</span>\n+          </Localized>\n+        }\n+        nodes={abusive}\n+        onUsernameClick={onUsernameClick}\n+      />\n+      <FlagDetails\n+        category={\n+          <Localized id=\"moderate-flagDetails-spam\">\n+            <span>Spam</span>\n+          </Localized>\n+        }\n+        nodes={spam}\n+        onUsernameClick={onUsernameClick}\n+      />\n+      <FlagDetails\n+        category={\n+          <Localized id=\"moderate-flagDetails-other\">\n+            <span>Other</span>\n+          </Localized>\n+        }\n+        nodes={other}\n+        onUsernameClick={onUsernameClick}\n+      />\n     </HorizontalGutter>\n   );\n };"
    },
    {
      "sha": "19860f94b08b77cbfdee7895bf101011f8155945",
      "filename": "src/core/client/admin/components/ModerateCard/FlagDetailsEntry.css",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/FlagDetailsEntry.css",
      "raw_url": "https://github.com/coralproject/talk/raw/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/FlagDetailsEntry.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/FlagDetailsEntry.css?ref=f8234e53edba529b64a90686863a2f541f316818",
      "patch": "@@ -12,6 +12,7 @@ $moderateCardReasonTextColor: var(--v2-colors-mono-500);\n \n .details {\n   color: $moderateCardReasonTextColor;\n+  display: block;\n   font-size: var(--v2-font-size-2);\n   font-weight: var(--v2-font-weight-primary-regular);\n   font-family: var(--v2-font-family-primary);"
    },
    {
      "sha": "4732a1d447eb949d6ce404ed32ad1a18659a874d",
      "filename": "src/core/client/admin/components/ModerateCard/FlagDetailsEntry.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 10,
      "changes": 12,
      "blob_url": "https://github.com/coralproject/talk/blob/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/FlagDetailsEntry.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/FlagDetailsEntry.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/FlagDetailsEntry.tsx?ref=f8234e53edba529b64a90686863a2f541f316818",
      "patch": "@@ -19,18 +19,10 @@ const FlagDetailsEntry: FunctionComponent<Props> = ({\n     <div>\n       {onClick && (\n         <BaseButton className={styles.flagger} onClick={onClick}>\n-          <span className={styles.user}>\n-            {user}\n-            {details && \":\"}\n-          </span>\n+          <span className={styles.user}>{user}</span>\n         </BaseButton>\n       )}\n-      {!onClick && (\n-        <span className={styles.user}>\n-          {user}\n-          {details && \":\"}\n-        </span>\n-      )}\n+      {!onClick && <span className={styles.user}>{user}</span>}\n       {details && <span className={styles.details}>{details}</span>}\n     </div>\n   );"
    },
    {
      "sha": "906915db4b30f6fa3a6f8b8da8a8350881055bbd",
      "filename": "src/core/client/admin/components/ModerateCard/Markers.css",
      "status": "modified",
      "additions": 0,
      "deletions": 5,
      "changes": 5,
      "blob_url": "https://github.com/coralproject/talk/blob/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/Markers.css",
      "raw_url": "https://github.com/coralproject/talk/raw/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/Markers.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/Markers.css?ref=f8234e53edba529b64a90686863a2f541f316818",
      "patch": "@@ -1,5 +1,4 @@\n $moderateCardDetailsHeaderColor: var(--v2-colors-mono-500);\n-$moderateCardDetailsDividerColor: var(--v2-colors-grey-100);\n \n .detailsButton {\n   font-size: var(--v2-font-size-1);\n@@ -21,7 +20,3 @@ $moderateCardDetailsDividerColor: var(--v2-colors-grey-100);\n .detailsText {\n   margin: 0;\n }\n-\n-.detailsDivider {\n-  border-color: $moderateCardDetailsDividerColor;\n-}"
    },
    {
      "sha": "3f797ff0eee6ac49ac88050c6484347c79ab865c",
      "filename": "src/core/client/admin/components/ModerateCard/Markers.tsx",
      "status": "modified",
      "additions": 5,
      "deletions": 12,
      "changes": 17,
      "blob_url": "https://github.com/coralproject/talk/blob/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/Markers.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/Markers.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/Markers.tsx?ref=f8234e53edba529b64a90686863a2f541f316818",
      "patch": "@@ -1,7 +1,7 @@\n import { Localized } from \"@fluent/react/compat\";\n-import React, { FunctionComponent, useCallback, useState } from \"react\";\n+import React, { FunctionComponent } from \"react\";\n \n-import { useUUID } from \"coral-framework/hooks\";\n+import { useToggleState, useUUID } from \"coral-framework/hooks\";\n import {\n   Button,\n   ButtonIcon,\n@@ -18,10 +18,8 @@ interface Props {\n \n const Markers: FunctionComponent<Props> = ({ children, details }) => {\n   const uuid = useUUID();\n-  const [showDetails, setShowDetails] = useState<boolean>(false);\n-  const toggleDetails = useCallback(() => setShowDetails(!showDetails), [\n-    showDetails,\n-  ]);\n+  const [showDetails, , toggleDetails] = useToggleState();\n+\n   return (\n     <HorizontalGutter>\n       <Flex itemGutter>\n@@ -43,12 +41,7 @@ const Markers: FunctionComponent<Props> = ({ children, details }) => {\n           </Button>\n         )}\n       </Flex>\n-      {showDetails && (\n-        <div id={uuid}>\n-          <hr className={styles.detailsDivider} />\n-          {details}\n-        </div>\n-      )}\n+      {showDetails && <div id={uuid}>{details}</div>}\n     </HorizontalGutter>\n   );\n };"
    },
    {
      "sha": "cc6f3a14640d2f5bc2c04c4357c2cb3ea55742b1",
      "filename": "src/core/client/admin/components/ModerateCard/MarkersContainer.spec.tsx",
      "status": "modified",
      "additions": 14,
      "deletions": 12,
      "changes": 26,
      "blob_url": "https://github.com/coralproject/talk/blob/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/MarkersContainer.spec.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/MarkersContainer.spec.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/MarkersContainer.spec.tsx?ref=f8234e53edba529b64a90686863a2f541f316818",
      "patch": "@@ -17,17 +17,18 @@ it(\"renders all markers\", () => {\n         actionCounts: {\n           flag: {\n             reasons: {\n+              COMMENT_REPORTED_SPAM: 3,\n+              COMMENT_REPORTED_OTHER: 0,\n+              COMMENT_REPORTED_OFFENSIVE: 2,\n+              COMMENT_REPORTED_ABUSIVE: 0,\n               COMMENT_DETECTED_TOXIC: 1,\n+              COMMENT_DETECTED_SUSPECT_WORD: 1,\n               COMMENT_DETECTED_SPAM: 1,\n+              COMMENT_DETECTED_REPEAT_POST: 1,\n               COMMENT_DETECTED_RECENT_HISTORY: 1,\n+              COMMENT_DETECTED_NEW_COMMENTER: 0,\n               COMMENT_DETECTED_LINKS: 1,\n               COMMENT_DETECTED_BANNED_WORD: 1,\n-              COMMENT_DETECTED_SUSPECT_WORD: 1,\n-              COMMENT_REPORTED_OFFENSIVE: 2,\n-              COMMENT_REPORTED_ABUSIVE: 0,\n-              COMMENT_REPORTED_SPAM: 3,\n-              COMMENT_DETECTED_NEW_COMMENTER: 0,\n-              COMMENT_DETECTED_REPEAT_POST: 1,\n             },\n           },\n         },\n@@ -55,17 +56,18 @@ it(\"renders some markers\", () => {\n         actionCounts: {\n           flag: {\n             reasons: {\n+              COMMENT_REPORTED_SPAM: 0,\n+              COMMENT_REPORTED_OTHER: 0,\n+              COMMENT_REPORTED_OFFENSIVE: 2,\n+              COMMENT_REPORTED_ABUSIVE: 0,\n               COMMENT_DETECTED_TOXIC: 1,\n+              COMMENT_DETECTED_SUSPECT_WORD: 0,\n               COMMENT_DETECTED_SPAM: 0,\n+              COMMENT_DETECTED_REPEAT_POST: 0,\n               COMMENT_DETECTED_RECENT_HISTORY: 1,\n+              COMMENT_DETECTED_NEW_COMMENTER: 0,\n               COMMENT_DETECTED_LINKS: 0,\n               COMMENT_DETECTED_BANNED_WORD: 1,\n-              COMMENT_DETECTED_SUSPECT_WORD: 0,\n-              COMMENT_REPORTED_OFFENSIVE: 2,\n-              COMMENT_REPORTED_ABUSIVE: 0,\n-              COMMENT_REPORTED_SPAM: 0,\n-              COMMENT_DETECTED_NEW_COMMENTER: 0,\n-              COMMENT_DETECTED_REPEAT_POST: 0,\n             },\n           },\n         },"
    },
    {
      "sha": "7d1ab00808f924892b9cfe07c90f781b576b3e30",
      "filename": "src/core/client/admin/components/ModerateCard/MarkersContainer.tsx",
      "status": "modified",
      "additions": 21,
      "deletions": 7,
      "changes": 28,
      "blob_url": "https://github.com/coralproject/talk/blob/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/MarkersContainer.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/MarkersContainer.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/MarkersContainer.tsx?ref=f8234e53edba529b64a90686863a2f541f316818",
      "patch": "@@ -123,6 +123,19 @@ const markers: Array<(\n         </Marker>\n       )) ||\n     null,\n+  (c) =>\n+    (c.revision &&\n+      c.revision.actionCounts.flag.reasons.COMMENT_REPORTED_OTHER && (\n+        <Marker key={keyCounter++} color=\"reported\">\n+          <Localized id=\"moderate-marker-other\">\n+            <span>Other</span>\n+          </Localized>{\" \"}\n+          <MarkerCount>\n+            {c.revision.actionCounts.flag.reasons.COMMENT_REPORTED_OTHER}\n+          </MarkerCount>\n+        </Marker>\n+      )) ||\n+    null,\n   (c) =>\n     (c.revision &&\n       c.revision.actionCounts.flag.reasons.COMMENT_DETECTED_NEW_COMMENTER && (\n@@ -138,7 +151,7 @@ export const MarkersContainer: React.FunctionComponent<MarkersContainerProps> =\n ) => {\n   const elements = useMemo(\n     () => markers.map((cb) => cb(props.comment)).filter((m) => m),\n-    [markers, props.comment]\n+    [props.comment]\n   );\n \n   return (\n@@ -165,17 +178,18 @@ const enhanced = withFragmentContainer<MarkersContainerProps>({\n         actionCounts {\n           flag {\n             reasons {\n+              COMMENT_REPORTED_SPAM\n+              COMMENT_REPORTED_OTHER\n+              COMMENT_REPORTED_OFFENSIVE\n+              COMMENT_REPORTED_ABUSIVE\n               COMMENT_DETECTED_TOXIC\n+              COMMENT_DETECTED_SUSPECT_WORD\n               COMMENT_DETECTED_SPAM\n+              COMMENT_DETECTED_REPEAT_POST\n               COMMENT_DETECTED_RECENT_HISTORY\n+              COMMENT_DETECTED_NEW_COMMENTER\n               COMMENT_DETECTED_LINKS\n               COMMENT_DETECTED_BANNED_WORD\n-              COMMENT_DETECTED_SUSPECT_WORD\n-              COMMENT_REPORTED_OFFENSIVE\n-              COMMENT_REPORTED_ABUSIVE\n-              COMMENT_REPORTED_SPAM\n-              COMMENT_DETECTED_NEW_COMMENTER\n-              COMMENT_DETECTED_REPEAT_POST\n             }\n           }\n         }"
    },
    {
      "sha": "64ea08145568b69b71d6ef73c4f12cd121eaac34",
      "filename": "src/core/client/admin/components/ModerateCard/ModerateCardDetailsContainer.tsx",
      "status": "modified",
      "additions": 7,
      "deletions": 8,
      "changes": 15,
      "blob_url": "https://github.com/coralproject/talk/blob/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/ModerateCardDetailsContainer.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/ModerateCardDetailsContainer.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/ModerateCardDetailsContainer.tsx?ref=f8234e53edba529b64a90686863a2f541f316818",
      "patch": "@@ -37,6 +37,7 @@ function hasFlagDetails(c: ModerateCardDetailsContainer_comment) {\n   return c.revision\n     ? c.revision.actionCounts.flag.reasons.COMMENT_REPORTED_OFFENSIVE +\n         c.revision.actionCounts.flag.reasons.COMMENT_REPORTED_ABUSIVE +\n+        c.revision.actionCounts.flag.reasons.COMMENT_REPORTED_OTHER +\n         c.revision.actionCounts.flag.reasons.COMMENT_REPORTED_SPAM >\n         0 || c.revision.metadata.perspective\n     : false;\n@@ -82,14 +83,11 @@ const ModerateCardDetailsContainer: FunctionComponent<Props> = ({\n         <>\n           <LinkDetailsContainer comment={comment} settings={settings} />\n           {doesHaveFlagDetails && (\n-            <>\n-              <hr />\n-              <FlagDetailsContainer\n-                comment={comment}\n-                settings={settings}\n-                onUsernameClick={onUsernameClick}\n-              />\n-            </>\n+            <FlagDetailsContainer\n+              comment={comment}\n+              settings={settings}\n+              onUsernameClick={onUsernameClick}\n+            />\n           )}\n         </>\n       )}\n@@ -113,6 +111,7 @@ const enhanced = withFragmentContainer<Props>({\n               COMMENT_REPORTED_OFFENSIVE\n               COMMENT_REPORTED_ABUSIVE\n               COMMENT_REPORTED_SPAM\n+              COMMENT_REPORTED_OTHER\n             }\n           }\n         }"
    },
    {
      "sha": "0a40f90b3852c52e71773a9f041e022209db19f2",
      "filename": "src/core/client/admin/components/ModerateCard/__snapshots__/MarkersContainer.spec.tsx.snap",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/__snapshots__/MarkersContainer.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/components/ModerateCard/__snapshots__/MarkersContainer.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/__snapshots__/MarkersContainer.spec.tsx.snap?ref=f8234e53edba529b64a90686863a2f541f316818",
      "patch": "@@ -20,6 +20,7 @@ exports[`renders all markers 1`] = `\n                   \"COMMENT_DETECTED_TOXIC\": 1,\n                   \"COMMENT_REPORTED_ABUSIVE\": 0,\n                   \"COMMENT_REPORTED_OFFENSIVE\": 2,\n+                  \"COMMENT_REPORTED_OTHER\": 0,\n                   \"COMMENT_REPORTED_SPAM\": 3,\n                 },\n               },\n@@ -166,6 +167,7 @@ exports[`renders some markers 1`] = `\n                   \"COMMENT_DETECTED_TOXIC\": 1,\n                   \"COMMENT_REPORTED_ABUSIVE\": 0,\n                   \"COMMENT_REPORTED_OFFENSIVE\": 2,\n+                  \"COMMENT_REPORTED_OTHER\": 0,\n                   \"COMMENT_REPORTED_SPAM\": 0,\n                 },\n               },"
    },
    {
      "sha": "ee3c18d974cb8e510db9124686a388940a8c2412",
      "filename": "src/core/client/admin/test/fixtures.ts",
      "status": "modified",
      "additions": 7,
      "deletions": 6,
      "changes": 13,
      "blob_url": "https://github.com/coralproject/talk/blob/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/test/fixtures.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/f8234e53edba529b64a90686863a2f541f316818/src/core/client/admin/test/fixtures.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/test/fixtures.ts?ref=f8234e53edba529b64a90686863a2f541f316818",
      "patch": "@@ -643,17 +643,18 @@ export const baseComment = createFixture<GQLComment>({\n     actionCounts: {\n       flag: {\n         reasons: {\n+          COMMENT_REPORTED_SPAM: 0,\n+          COMMENT_REPORTED_OTHER: 0,\n+          COMMENT_REPORTED_OFFENSIVE: 0,\n+          COMMENT_REPORTED_ABUSIVE: 0,\n           COMMENT_DETECTED_TOXIC: 0,\n+          COMMENT_DETECTED_SUSPECT_WORD: 0,\n           COMMENT_DETECTED_SPAM: 0,\n+          COMMENT_DETECTED_REPEAT_POST: 0,\n           COMMENT_DETECTED_RECENT_HISTORY: 0,\n+          COMMENT_DETECTED_NEW_COMMENTER: 0,\n           COMMENT_DETECTED_LINKS: 0,\n           COMMENT_DETECTED_BANNED_WORD: 0,\n-          COMMENT_DETECTED_SUSPECT_WORD: 0,\n-          COMMENT_REPORTED_OFFENSIVE: 0,\n-          COMMENT_REPORTED_ABUSIVE: 0,\n-          COMMENT_REPORTED_SPAM: 0,\n-          COMMENT_DETECTED_NEW_COMMENTER: 0,\n-          COMMENT_DETECTED_REPEAT_POST: 0,\n         },\n       },\n     },"
    },
    {
      "sha": "c3d10208da140d8329861005016e0ba8017e1abd",
      "filename": "src/locales/en-US/admin.ftl",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/f8234e53edba529b64a90686863a2f541f316818/src/locales/en-US/admin.ftl",
      "raw_url": "https://github.com/coralproject/talk/raw/f8234e53edba529b64a90686863a2f541f316818/src/locales/en-US/admin.ftl",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/locales/en-US/admin.ftl?ref=f8234e53edba529b64a90686863a2f541f316818",
      "patch": "@@ -829,11 +829,13 @@ moderate-marker-offensive = Offensive\n moderate-marker-abusive = Abusive\n moderate-marker-newCommenter = New commenter\n moderate-marker-repeatPost = Repeat comment\n+moderate-marker-other = Other\n \n moderate-markers-details = Details\n moderate-flagDetails-offensive = Offensive\n moderate-flagDetails-abusive = Abusive\n moderate-flagDetails-spam = Spam\n+moderate-flagDetails-other = Other\n \n moderate-flagDetails-toxicityScore = Toxicity Score\n moderate-toxicityLabel-likely = Likely <score></score>"
    }
  ]
}
