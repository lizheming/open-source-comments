{
  "sha": "808e84a856bdbfad3941703b73fe68a2f690f6af",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODo4MDhlODRhODU2YmRiZmFkMzk0MTcwM2I3M2ZlNjhhMmY2OTBmNmFm",
  "commit": {
    "author": {
      "name": "Guo Xiang Tan",
      "email": "gxtan1990@gmail.com",
      "date": "2020-08-12T08:43:47Z"
    },
    "committer": {
      "name": "Guo Xiang Tan",
      "email": "gxtan1990@gmail.com",
      "date": "2020-08-12T08:43:47Z"
    },
    "message": "FIX: Expose PG headline highlighting for all search results.",
    "tree": {
      "sha": "27d11b2e2def1471882bc081a39f306ec4a18422",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/27d11b2e2def1471882bc081a39f306ec4a18422"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/808e84a856bdbfad3941703b73fe68a2f690f6af",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEMOJGkc46I9vMVlDg+9EQF5qsHyAFAl8zq/kACgkQ+9EQF5qs\nHyAuFhAAxOscE14yly90MNP8CQT5N7U4CmnzJjTB7Ud4nKaoezgTvCXePn++Fupd\nb6UHvvF1tcru7Fm0tE36ybLdk4VwgPL9LaxIaYZMp7uHZsgQPall+0sF5RlRDtYm\n3TQRFEG1qrjBzy+f0LKI6qsGxtfimRQfiTD2IHLq+KrpSSnrA9A7s03/TnI2DYBp\nxe5EsS1qPRieOiqE2Y+vUnA5q1BSUd5GeT7KlstWjS7BsF6udfDX42ATFjc3ss+N\nJCRLMBoXY1ZUL6EyBHZD0hvPgDWSEufmHFLylQ65icy4tY1x0LZMAIkFFUHRqC6K\niWPymXMrJSZq+0QQqmzPqXNuMldZffCAt9NZrsdD9Z2gP/8/q3yoIS2tQbYUeXVQ\n8SwlvIFSwpnT48/0VHmyof9cvonOBiXbTen7L4MJhWVihVT7qKfWwT7Gkm77ExYD\nzZv3ZJNfFCmgLwlBbjF87HLvHJpFggEAcA8he5EgQq9S7ge+jN6kyz4woKo4ZvEv\nkrilYQ/RBRi9KnAVbAtHU6mwxVwLf1Le80CiTWuINqW/mkc2SlA2BVsiowW91rPJ\ncYjMm28bZRC3ddOP7cU3vn5Tf3ImzsljzWptxuYqWJcbQ7/pthZrfuLgOD6+DS5P\nwwEV28F+1M9/e/NTKaG2oGjZ/j6IhLHdeAR/8r81Y/8WTBLXWwY=\n=M1gk\n-----END PGP SIGNATURE-----",
      "payload": "tree 27d11b2e2def1471882bc081a39f306ec4a18422\nparent 603a4d179419bda0502be679d66fca3226b7cf0e\nauthor Guo Xiang Tan <gxtan1990@gmail.com> 1597221827 +0800\ncommitter Guo Xiang Tan <gxtan1990@gmail.com> 1597221827 +0800\n\nFIX: Expose PG headline highlighting for all search results.\n"
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/808e84a856bdbfad3941703b73fe68a2f690f6af",
  "html_url": "https://github.com/discourse/discourse/commit/808e84a856bdbfad3941703b73fe68a2f690f6af",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/808e84a856bdbfad3941703b73fe68a2f690f6af/comments",
  "author": {
    "login": "tgxworld",
    "id": 4335742,
    "node_id": "MDQ6VXNlcjQzMzU3NDI=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/4335742?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tgxworld",
    "html_url": "https://github.com/tgxworld",
    "followers_url": "https://api.github.com/users/tgxworld/followers",
    "following_url": "https://api.github.com/users/tgxworld/following{/other_user}",
    "gists_url": "https://api.github.com/users/tgxworld/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tgxworld/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tgxworld/subscriptions",
    "organizations_url": "https://api.github.com/users/tgxworld/orgs",
    "repos_url": "https://api.github.com/users/tgxworld/repos",
    "events_url": "https://api.github.com/users/tgxworld/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tgxworld/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tgxworld",
    "id": 4335742,
    "node_id": "MDQ6VXNlcjQzMzU3NDI=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/4335742?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tgxworld",
    "html_url": "https://github.com/tgxworld",
    "followers_url": "https://api.github.com/users/tgxworld/followers",
    "following_url": "https://api.github.com/users/tgxworld/following{/other_user}",
    "gists_url": "https://api.github.com/users/tgxworld/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tgxworld/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tgxworld/subscriptions",
    "organizations_url": "https://api.github.com/users/tgxworld/orgs",
    "repos_url": "https://api.github.com/users/tgxworld/repos",
    "events_url": "https://api.github.com/users/tgxworld/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tgxworld/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "603a4d179419bda0502be679d66fca3226b7cf0e",
      "url": "https://api.github.com/repos/discourse/discourse/commits/603a4d179419bda0502be679d66fca3226b7cf0e",
      "html_url": "https://github.com/discourse/discourse/commit/603a4d179419bda0502be679d66fca3226b7cf0e"
    }
  ],
  "stats": {
    "total": 19,
    "additions": 15,
    "deletions": 4
  },
  "files": [
    {
      "sha": "b4b0c8aed3e010769038269615a36bb33209da0d",
      "filename": "app/assets/javascripts/admin/templates/search-logs-term.hbs",
      "status": "modified",
      "additions": 10,
      "deletions": 1,
      "changes": 11,
      "blob_url": "https://github.com/discourse/discourse/blob/808e84a856bdbfad3941703b73fe68a2f690f6af/app/assets/javascripts/admin/templates/search-logs-term.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/808e84a856bdbfad3941703b73fe68a2f690f6af/app/assets/javascripts/admin/templates/search-logs-term.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/admin/templates/search-logs-term.hbs?ref=808e84a856bdbfad3941703b73fe68a2f690f6af",
      "patch": "@@ -31,7 +31,16 @@\n         <div class=\"fps-topic\">\n           <div class=\"topic\">\n             <a href={{result.url}} class=\"search-link\">\n-              {{topic-status topic=result.topic disableActions=true}}<span class=\"topic-title\">{{#highlight-search highlight=term}}{{html-safe result.topic.fancyTitle}}{{/highlight-search}}</span>\n+              {{topic-status topic=result.topic disableActions=true}}\n+              <span class=\"topic-title\">\n+                {{#if result.useTopicTitleHeadline}}\n+                  {{html-safe result.topicTitleHeadline}}\n+                {{else}}\n+                  {{#highlight-search highlight=q}}\n+                    {{html-safe result.topic.fancyTitle}}\n+                  {{/highlight-search}}\n+                {{/if}}\n+              </span>\n             </a>\n \n             <div class=\"search-category\">"
    },
    {
      "sha": "27e0776cc69e1b2f7b49a576dfbd528089027382",
      "filename": "app/assets/javascripts/discourse/app/models/post.js",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/808e84a856bdbfad3941703b73fe68a2f690f6af/app/assets/javascripts/discourse/app/models/post.js",
      "raw_url": "https://github.com/discourse/discourse/raw/808e84a856bdbfad3941703b73fe68a2f690f6af/app/assets/javascripts/discourse/app/models/post.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/models/post.js?ref=808e84a856bdbfad3941703b73fe68a2f690f6af",
      "patch": "@@ -112,7 +112,7 @@ const Post = RestModel.extend({\n   },\n \n   @discourseComputed(\"topic_title_headline\")\n-  topicTitleHead(title) {\n+  topicTitleHeadline(title) {\n     return fancyTitle(title, this.siteSettings.support_mixed_text_direction);\n   },\n "
    },
    {
      "sha": "3f860f552563d80b4625ad2841637d93ed965158",
      "filename": "app/assets/javascripts/discourse/app/templates/full-page-search.hbs",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/808e84a856bdbfad3941703b73fe68a2f690f6af/app/assets/javascripts/discourse/app/templates/full-page-search.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/808e84a856bdbfad3941703b73fe68a2f690f6af/app/assets/javascripts/discourse/app/templates/full-page-search.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/templates/full-page-search.hbs?ref=808e84a856bdbfad3941703b73fe68a2f690f6af",
      "patch": "@@ -90,7 +90,7 @@\n                     {{topic-status topic=result.topic disableActions=true showPrivateMessageIcon=true}}\n                     <span class=\"topic-title\">\n                       {{#if result.useTopicTitleHeadline}}\n-                        {{html-safe result.topicTitleHead}}\n+                        {{html-safe result.topicTitleHeadline}}\n                       {{else}}\n                         {{#highlight-search highlight=q}}\n                           {{html-safe result.topic.fancyTitle}}"
    },
    {
      "sha": "5034092826f50a7eb7646a1bd84269c010669fd0",
      "filename": "app/assets/javascripts/discourse/app/widgets/search-menu-results.js",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/808e84a856bdbfad3941703b73fe68a2f690f6af/app/assets/javascripts/discourse/app/widgets/search-menu-results.js",
      "raw_url": "https://github.com/discourse/discourse/raw/808e84a856bdbfad3941703b73fe68a2f690f6af/app/assets/javascripts/discourse/app/widgets/search-menu-results.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/widgets/search-menu-results.js?ref=808e84a856bdbfad3941703b73fe68a2f690f6af",
      "patch": "@@ -59,7 +59,9 @@ function postResult(result, link, term) {\n       h(\"span.blurb\", [\n         dateNode(result.created_at),\n         h(\"span\", \" - \"),\n-        new Highlighted(result.blurb, term)\n+        this.siteSettings.use_pg_headlines_for_excerpt\n+          ? new RawHtml({ html: `<span>${result.blurb}</span>` })\n+          : new Highlighted(result.blurb, term)\n       ])\n     );\n   }"
    }
  ]
}
