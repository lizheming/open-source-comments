{
  "sha": "5e2e374c72f75d71c63c78a57edddde895b37e2a",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODo1ZTJlMzc0YzcyZjc1ZDcxYzYzYzc4YTU3ZWRkZGRlODk1YjM3ZTJh",
  "commit": {
    "author": {
      "name": "Dan Ungureanu",
      "email": "dan@ungureanu.me",
      "date": "2020-07-30T10:10:16Z"
    },
    "committer": {
      "name": "Dan Ungureanu",
      "email": "dan@ungureanu.me",
      "date": "2020-07-30T10:10:16Z"
    },
    "message": "DEV: Fix build\n\nFollow-up to bd3c0dd59f9034688d3ab70ff2317d4b910e9513.",
    "tree": {
      "sha": "0b2e70ea1e21ba20ae275a5f32b32e5d83f83ac6",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/0b2e70ea1e21ba20ae275a5f32b32e5d83f83ac6"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/5e2e374c72f75d71c63c78a57edddde895b37e2a",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJFBAABCAAvFiEEZFlnr23WAUkE+3y4CqKgDWrMi4QFAl8inIwRHGRhbkB1bmd1\ncmVhbnUubWUACgkQCqKgDWrMi4QhvA//WeNhRd7zaBMHYGwq+MJ+DnttjG8uMLs7\nWFSfb2tceLbhhrTkai6JnnjQo2xuvytvmshHOmKHP/jJcIpq39HD0Fje5LIsmywS\nyyJ5OSwbnE3g6FK6oAaDcCNsZkbGt/cwQ2bxuJ0i3COZdt5Z97ixY0ky7eKGT+5S\nli1bmf9o925cRonaY11MJ9cPb9tTkPVp/yzBBSXrMuvzPwgdp0ERH2h8EQQWxxL0\n9rOgzRL41G+7snQMjyfE8KTQdg669NIrmaqG+Dv1NchpRmJev2SBNxBYR56tmGby\n+/tWP2bUVqfMICv2FGXLBACFB3bRJD6ysGTAJ3DcquyOLJ8+OJTfTnotOckaVhfH\nnvx4LE8A8RMKvmOccjVtRYfJkjVqbcjNG+qRiw4clW99q1zy5LRjH0tu1xN3Dghg\nCQZFOny8tUe+bcYStu7saWw2NY2pPQ7bzKwdg5tQ3DVDkxRkOcdLcrQ54INVGKXf\nobSJtrXnX/r5xHcrKZ9uStHHJtxyM/kHz2tvZvCQKXvq+hCjvweZJNu6iHst1RVK\nDgdUc2/SiojloCoun6jpappjjD5Y29Hv7U61Kqlcc6w+hw8QJB+MpwrsH6t4wpD9\n6hXzwqVqAqOkWuHZph5qy+yXLPGvnQncOU7t4TqKcOy3kzwIUtHmxVs9Bv3j1/jf\n93rO4ppgGt4=\n=sK25\n-----END PGP SIGNATURE-----",
      "payload": "tree 0b2e70ea1e21ba20ae275a5f32b32e5d83f83ac6\nparent bd3c0dd59f9034688d3ab70ff2317d4b910e9513\nauthor Dan Ungureanu <dan@ungureanu.me> 1596103816 +0300\ncommitter Dan Ungureanu <dan@ungureanu.me> 1596103816 +0300\n\nDEV: Fix build\n\nFollow-up to bd3c0dd59f9034688d3ab70ff2317d4b910e9513.\n"
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/5e2e374c72f75d71c63c78a57edddde895b37e2a",
  "html_url": "https://github.com/discourse/discourse/commit/5e2e374c72f75d71c63c78a57edddde895b37e2a",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/5e2e374c72f75d71c63c78a57edddde895b37e2a/comments",
  "author": {
    "login": "udan11",
    "id": 4147664,
    "node_id": "MDQ6VXNlcjQxNDc2NjQ=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/4147664?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/udan11",
    "html_url": "https://github.com/udan11",
    "followers_url": "https://api.github.com/users/udan11/followers",
    "following_url": "https://api.github.com/users/udan11/following{/other_user}",
    "gists_url": "https://api.github.com/users/udan11/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/udan11/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/udan11/subscriptions",
    "organizations_url": "https://api.github.com/users/udan11/orgs",
    "repos_url": "https://api.github.com/users/udan11/repos",
    "events_url": "https://api.github.com/users/udan11/events{/privacy}",
    "received_events_url": "https://api.github.com/users/udan11/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "udan11",
    "id": 4147664,
    "node_id": "MDQ6VXNlcjQxNDc2NjQ=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/4147664?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/udan11",
    "html_url": "https://github.com/udan11",
    "followers_url": "https://api.github.com/users/udan11/followers",
    "following_url": "https://api.github.com/users/udan11/following{/other_user}",
    "gists_url": "https://api.github.com/users/udan11/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/udan11/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/udan11/subscriptions",
    "organizations_url": "https://api.github.com/users/udan11/orgs",
    "repos_url": "https://api.github.com/users/udan11/repos",
    "events_url": "https://api.github.com/users/udan11/events{/privacy}",
    "received_events_url": "https://api.github.com/users/udan11/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "bd3c0dd59f9034688d3ab70ff2317d4b910e9513",
      "url": "https://api.github.com/repos/discourse/discourse/commits/bd3c0dd59f9034688d3ab70ff2317d4b910e9513",
      "html_url": "https://github.com/discourse/discourse/commit/bd3c0dd59f9034688d3ab70ff2317d4b910e9513"
    }
  ],
  "stats": {
    "total": 6,
    "additions": 4,
    "deletions": 2
  },
  "files": [
    {
      "sha": "4bf4934c7a630737952c919c2c0a1e4a7996475f",
      "filename": "app/controllers/application_controller.rb",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/5e2e374c72f75d71c63c78a57edddde895b37e2a/app/controllers/application_controller.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/5e2e374c72f75d71c63c78a57edddde895b37e2a/app/controllers/application_controller.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/controllers/application_controller.rb?ref=5e2e374c72f75d71c63c78a57edddde895b37e2a",
      "patch": "@@ -785,7 +785,9 @@ def build_not_found_page(opts = {})\n       opts[:layout] = 'application' if opts[:layout] == 'no_ember'\n     end\n \n-    if !SiteSetting.login_required? || (current_user rescue false)\n+    @current_user = current_user rescue nil\n+\n+    if !SiteSetting.login_required? || @current_user\n       key = \"page_not_found_topics\"\n       if @topics_partial = Discourse.redis.get(key)\n         @topics_partial = @topics_partial.html_safe"
    },
    {
      "sha": "72d607a87e4648c7968efcc36a8d3a20fb8c1e60",
      "filename": "app/views/exceptions/not_found.html.erb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/5e2e374c72f75d71c63c78a57edddde895b37e2a/app/views/exceptions/not_found.html.erb",
      "raw_url": "https://github.com/discourse/discourse/raw/5e2e374c72f75d71c63c78a57edddde895b37e2a/app/views/exceptions/not_found.html.erb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/views/exceptions/not_found.html.erb?ref=5e2e374c72f75d71c63c78a57edddde895b37e2a",
      "patch": "@@ -1,7 +1,7 @@\n <div class=\"page-not-found\">\n   <h1 class=\"title\"><%= @title %></h1>\n \n-  <%- if !current_user %>\n+  <%- if !@current_user %>\n     <a href=\"<%= path \"/login\" %>\" class='btn btn-primary'><%= SvgSprite.raw_svg('fa-user') %><%= I18n.t('log_in') %></a>\n   <%- end %>\n "
    }
  ]
}
