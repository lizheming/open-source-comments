{
  "sha": "ec9a4544631ebbf695fb02f41735c7a368dcafa4",
  "node_id": "MDY6Q29tbWl0NzI0NTQyNDI6ZWM5YTQ1NDQ2MzFlYmJmNjk1ZmIwMmY0MTczNWM3YTM2OGRjYWZhNA==",
  "commit": {
    "author": {
      "name": "Vinh",
      "email": "vinh@vinh.tech",
      "date": "2020-08-17T21:52:40Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2020-08-17T21:52:40Z"
    },
    "message": "[CORL-1285] Support older browser (#3105)\n\n* feat: add support for older browsers\n\n* fix: rm unused dep\n\n* chore: review + lint\n\nCo-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>",
    "tree": {
      "sha": "52fd6308bca90b9f4e098094bad331f7a8ae8222",
      "url": "https://api.github.com/repos/coralproject/talk/git/trees/52fd6308bca90b9f4e098094bad331f7a8ae8222"
    },
    "url": "https://api.github.com/repos/coralproject/talk/git/commits/ec9a4544631ebbf695fb02f41735c7a368dcafa4",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfOvwoCRBK7hj4Ov3rIwAAdHIIAHoPmBJtVw1/vBKbI5ts94l9\nQkUzfOdAfF9g92APoU3A88OJc/gNksP8hUDJZJtrwoHLNg+EzGHAblbPk5XlSWf6\nIqtdGC7rFdkbIsD91DALsngEt8fPsGcuiQL78/V2mAswt8Fuj7Zh80jszeOr3YJT\nnTM0ovaNQm2aV/mqT0jHhAuS/0ZjxAGMBz5tv8HPPfxGVDI6FgcjwQEm9TaUKdWs\nY5FTTzJ9HoNZZTErF+N29jPIgpg/D7+mjWmUUftBzfqRoFAF3u/7bDmQaSgQQH/y\nlGD5oXXjVQfZIlnlciVxK9EcgsdcaMoeWfYdeW0QqcVouJOzcHf8A3kNKU4qqbM=\n=wK2R\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 52fd6308bca90b9f4e098094bad331f7a8ae8222\nparent 1b815089f555163e9e8e35ebebc13bcf5cf2c681\nauthor Vinh <vinh@vinh.tech> 1597701160 +0200\ncommitter GitHub <noreply@github.com> 1597701160 +0000\n\n[CORL-1285] Support older browser (#3105)\n\n* feat: add support for older browsers\n\n* fix: rm unused dep\n\n* chore: review + lint\n\nCo-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
    }
  },
  "url": "https://api.github.com/repos/coralproject/talk/commits/ec9a4544631ebbf695fb02f41735c7a368dcafa4",
  "html_url": "https://github.com/coralproject/talk/commit/ec9a4544631ebbf695fb02f41735c7a368dcafa4",
  "comments_url": "https://api.github.com/repos/coralproject/talk/commits/ec9a4544631ebbf695fb02f41735c7a368dcafa4/comments",
  "author": {
    "login": "cvle",
    "id": 14221600,
    "node_id": "MDQ6VXNlcjE0MjIxNjAw",
    "avatar_url": "https://avatars2.githubusercontent.com/u/14221600?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cvle",
    "html_url": "https://github.com/cvle",
    "followers_url": "https://api.github.com/users/cvle/followers",
    "following_url": "https://api.github.com/users/cvle/following{/other_user}",
    "gists_url": "https://api.github.com/users/cvle/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cvle/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cvle/subscriptions",
    "organizations_url": "https://api.github.com/users/cvle/orgs",
    "repos_url": "https://api.github.com/users/cvle/repos",
    "events_url": "https://api.github.com/users/cvle/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cvle/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "1b815089f555163e9e8e35ebebc13bcf5cf2c681",
      "url": "https://api.github.com/repos/coralproject/talk/commits/1b815089f555163e9e8e35ebebc13bcf5cf2c681",
      "html_url": "https://github.com/coralproject/talk/commit/1b815089f555163e9e8e35ebebc13bcf5cf2c681"
    }
  ],
  "stats": {
    "total": 163,
    "additions": 123,
    "deletions": 40
  },
  "files": [
    {
      "sha": "d8d65ecb4db7401326379d5339a77ec070157e6b",
      "filename": "package-lock.json",
      "status": "modified",
      "additions": 9,
      "deletions": 3,
      "changes": 12,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/package-lock.json",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/package-lock.json",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/package-lock.json?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -32159,6 +32159,12 @@\n       \"integrity\": \"sha512-Id0Fij0HsB/vKWGeBe9PxeY45ttRiBmhFyyt/geBdDHBYNctMRTE3dC1U3ujzz3lap+hVXlEcVaB56kZP/eEUg==\",\n       \"dev\": true\n     },\n+    \"intl\": {\n+      \"version\": \"1.2.5\",\n+      \"resolved\": \"https://registry.npmjs.org/intl/-/intl-1.2.5.tgz\",\n+      \"integrity\": \"sha1-giRKIZDE5Bn4Nx9ao02qNCDiq94=\",\n+      \"dev\": true\n+    },\n     \"into-stream\": {\n       \"version\": \"3.1.0\",\n       \"resolved\": \"https://registry.npmjs.org/into-stream/-/into-stream-3.1.0.tgz\",\n@@ -55354,9 +55360,9 @@\n       }\n     },\n     \"whatwg-fetch\": {\n-      \"version\": \"3.0.0\",\n-      \"resolved\": \"https://registry.npmjs.org/whatwg-fetch/-/whatwg-fetch-3.0.0.tgz\",\n-      \"integrity\": \"sha512-9GSJUgz1D4MfyKU7KRqwOjXCXTqWdFNvEr7eUBYchQiVc744mqK/MzXPNR2WsPkmkOa4ywfg8C2n8h+13Bey1Q==\",\n+      \"version\": \"3.4.0\",\n+      \"resolved\": \"https://registry.npmjs.org/whatwg-fetch/-/whatwg-fetch-3.4.0.tgz\",\n+      \"integrity\": \"sha512-rsum2ulz2iuZH08mJkT0Yi6JnKhwdw4oeyMjokgxd+mmqYSd9cPpOQf01TIWgjxG/U4+QR+AwKq6lSbXVxkyoQ==\",\n       \"dev\": true\n     },\n     \"whatwg-mimetype\": {"
    },
    {
      "sha": "1ad4b6527996198355cec11b9cd7d1eb09394a4c",
      "filename": "package.json",
      "status": "modified",
      "additions": 7,
      "deletions": 2,
      "changes": 9,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/package.json",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/package.json",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/package.json?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -296,6 +296,7 @@\n     \"html-webpack-plugin\": \"^4.0.4\",\n     \"husky\": \"^4.2.3\",\n     \"intersection-observer\": \"^0.7.0\",\n+    \"intl\": \"^1.2.5\",\n     \"jest\": \"^26.1.0\",\n     \"jest-axe\": \"^3.4.0\",\n     \"jest-junit\": \"^11.0.1\",\n@@ -381,7 +382,7 @@\n     \"webpack-bundle-analyzer\": \"^3.8.0\",\n     \"webpack-cli\": \"^3.3.12\",\n     \"webpack-dev-server\": \"^3.11.0\",\n-    \"whatwg-fetch\": \"^3.0.0\"\n+    \"whatwg-fetch\": \"^3.4.0\"\n   },\n   \"dependencies-pins-documentation\": {\n     \"ts-node-dev@1.0.0-pre.44\": [\n@@ -456,8 +457,12 @@\n   \"browsers\": [\n     \">1%\",\n     \"last 4 versions\",\n-    \"Firefox ESR\",\n     \"IE 11\",\n+    \"iOS >= 9\",\n+    \"Android >= 4.4.4\",\n+    \"Edge >= 17\",\n+    \"Firefox >= 68\",\n+    \"Chrome >= 49\",\n     \"not dead\"\n   ]\n }"
    },
    {
      "sha": "174f62822243b6a9ddf5e225fd8029368f0a4a38",
      "filename": "scripts/webpackHotDevClient.js",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/scripts/webpackHotDevClient.js",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/scripts/webpackHotDevClient.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/scripts/webpackHotDevClient.js?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -199,7 +199,7 @@ function handleAvailableHash(hash) {\n   mostRecentCompilationHash = hash;\n }\n \n-const debouncedReload = debounce(function() {\n+var debouncedReload = debounce(function() {\n   window.location.reload();\n }, 1000);\n "
    },
    {
      "sha": "714861efecba6ef696d78ebcbbaf427c4c7b90b1",
      "filename": "src/core/client/framework/helpers/index.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/helpers/index.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/helpers/index.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/helpers/index.ts?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -12,5 +12,6 @@ export { default as resolveStoryURL } from \"./resolveStoryURL\";\n export { default as detectCountScript } from \"./detectCountScript\";\n export { default as potentiallyInjectAxe } from \"./potentiallyInjectAxe\";\n export { default as injectConditionalPolyfills } from \"./injectConditionalPolyfills\";\n-export { default as polyfillCSSVarsForIE11 } from \"./polyfillCSSVarsForIE11\";\n+export { default as polyfillCSSVars } from \"./polyfillCSSVars\";\n+export { default as polyfillIntlLocale } from \"./polyfillIntlLocale\";\n export { default as getModerationLink, QUEUE_NAME } from \"./getModerationLink\";"
    },
    {
      "sha": "f2b98e144a10c812e55f18dedd7787f21928c8ed",
      "filename": "src/core/client/framework/helpers/injectConditionalPolyfills.tsx",
      "status": "modified",
      "additions": 26,
      "deletions": 15,
      "changes": 41,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/helpers/injectConditionalPolyfills.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/helpers/injectConditionalPolyfills.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/helpers/injectConditionalPolyfills.tsx?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -1,30 +1,41 @@\n import { getBrowserInfo } from \"../lib/browserInfo\";\n-import polyfillCSSVarsForIE11 from \"./polyfillCSSVarsForIE11\";\n+import polyfillCSSVars from \"./polyfillCSSVars\";\n \n export default async function injectConditionalPolyfills() {\n+  const browser = getBrowserInfo();\n   const pending: Promise<any>[] = [];\n \n   // Polyfill Intl.\n-  if (typeof Intl === \"undefined\" || !(Intl as any).PluralRules) {\n-    pending.push(import(\"fluent-intl-polyfill\"));\n+  let intlPromise = Promise.resolve();\n+  if (!browser.supports.intl) {\n+    intlPromise = (async () => {\n+      const IntlPolyfill = (await import(\"intl\")).default;\n+      Intl.NumberFormat = IntlPolyfill.NumberFormat;\n+      Intl.DateTimeFormat = IntlPolyfill.DateTimeFormat;\n+      return;\n+    })();\n   }\n-\n+  pending.push(\n+    intlPromise.then(() => {\n+      if (!browser.supports.intlPluralRules) {\n+        return import(\"fluent-intl-polyfill\");\n+      }\n+      return;\n+    })\n+  );\n   // Polyfill Intersection Observer.\n-  if (\n-    !(\"IntersectionObserver\" in window) ||\n-    !(\"IntersectionObserverEntry\" in window) ||\n-    !(\n-      \"intersectionRatio\" in (window as any).IntersectionObserverEntry.prototype\n-    )\n-  ) {\n+  if (!browser.supports.intersectionObserver) {\n     pending.push(import(\"intersection-observer\"));\n   }\n \n-  // CSS Vars Polyfill for IE11.\n-  if (getBrowserInfo().msie) {\n-    pending.push(import(\"whatwg-fetch\"));\n+  if (!browser.supports.proxyObject) {\n     pending.push(import(\"proxy-polyfill\"));\n-    pending.push(polyfillCSSVarsForIE11());\n+  }\n+  if (!browser.supports.fetch) {\n+    pending.push(import(\"whatwg-fetch\"));\n+  }\n+  if (!browser.supports.cssVariables) {\n+    pending.push(polyfillCSSVars());\n   }\n   await Promise.all(pending);\n }"
    },
    {
      "sha": "3fd3bf91c9e58b84c4d9d30ef585d06196f2d13a",
      "filename": "src/core/client/framework/helpers/polyfillCSSVars.tsx",
      "status": "added",
      "additions": 13,
      "deletions": 0,
      "changes": 13,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/helpers/polyfillCSSVars.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/helpers/polyfillCSSVars.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/helpers/polyfillCSSVars.tsx?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -0,0 +1,13 @@\n+import { getBrowserInfo } from \"../lib/browserInfo\";\n+\n+/**\n+ * Polyfills CSS Variables.\n+ * This needs to be called whenenver new css variables are introduced\n+ * through new CSS.\n+ */\n+export default function polyfillCSSVars() {\n+  if (!getBrowserInfo().supports.cssVariables) {\n+    return import(\"css-vars-ponyfill\").then((module) => module.default());\n+  }\n+  return Promise.resolve();\n+}"
    },
    {
      "sha": "af6413f28ec63a1b8d36557f1c9227676a793991",
      "filename": "src/core/client/framework/helpers/polyfillCSSVarsForIE11.tsx",
      "status": "removed",
      "additions": 0,
      "deletions": 8,
      "changes": 8,
      "blob_url": "https://github.com/coralproject/talk/blob/1b815089f555163e9e8e35ebebc13bcf5cf2c681/src/core/client/framework/helpers/polyfillCSSVarsForIE11.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/1b815089f555163e9e8e35ebebc13bcf5cf2c681/src/core/client/framework/helpers/polyfillCSSVarsForIE11.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/helpers/polyfillCSSVarsForIE11.tsx?ref=1b815089f555163e9e8e35ebebc13bcf5cf2c681",
      "patch": "@@ -1,8 +0,0 @@\n-import { getBrowserInfo } from \"../lib/browserInfo\";\n-\n-export default function polyfillCSSVarsForIE11() {\n-  if (getBrowserInfo().msie) {\n-    return import(\"css-vars-ponyfill\").then((module) => module.default());\n-  }\n-  return Promise.resolve();\n-}"
    },
    {
      "sha": "b0086d7de32fbab36398f6bef0c6d86693e6454c",
      "filename": "src/core/client/framework/helpers/polyfillIntlLocale.tsx",
      "status": "added",
      "additions": 16,
      "deletions": 0,
      "changes": 16,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/helpers/polyfillIntlLocale.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/helpers/polyfillIntlLocale.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/helpers/polyfillIntlLocale.tsx?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -0,0 +1,16 @@\n+import { getBrowserInfo } from \"../lib/browserInfo\";\n+\n+/**\n+ * Polyfills Intl Locale Data.\n+ * This is only needed when we use the Intl Polyfill.\n+ */\n+export default async function polyfillIntlLocale(locales: string[]) {\n+  if (!getBrowserInfo().supports.intl) {\n+    await Promise.all(\n+      locales.map((locale) =>\n+        import(\"intl/locale-data/jsonp/\" + locale + \".js\")\n+      )\n+    );\n+  }\n+  return Promise.resolve();\n+}"
    },
    {
      "sha": "253c2cee9177b6b9f4f148ad6a9c22a80080b02d",
      "filename": "src/core/client/framework/lib/bootstrap/createManaged.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/lib/bootstrap/createManaged.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/lib/bootstrap/createManaged.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/bootstrap/createManaged.tsx?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -8,6 +8,7 @@ import { Environment, RecordSource, Store } from \"relay-runtime\";\n import { v1 as uuid } from \"uuid\";\n \n import { LanguageCode } from \"coral-common/helpers/i18n\";\n+import polyfillIntlLocale from \"coral-framework/helpers/polyfillIntlLocale\";\n import { getBrowserInfo } from \"coral-framework/lib/browserInfo\";\n import { RestClient } from \"coral-framework/lib/rest\";\n import {\n@@ -309,6 +310,7 @@ export default async function createManaged({\n   }\n \n   const localeBundles = await generateBundles(locales, localesData);\n+  await polyfillIntlLocale(locales);\n \n   // Get the access token from storage.\n   const auth = retrieveAccessToken();"
    },
    {
      "sha": "f15ba77f0764cd47a71b342369c6ad40138a627a",
      "filename": "src/core/client/framework/lib/browserInfo.ts",
      "status": "modified",
      "additions": 30,
      "deletions": 3,
      "changes": 33,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/lib/browserInfo.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/lib/browserInfo.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/browserInfo.ts?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -1,20 +1,47 @@\n import Bowser from \"bowser\";\n \n export interface BrowserInfo {\n+  version: number;\n   ios: boolean;\n   msie: boolean;\n   mobile: boolean;\n+  supports: {\n+    cssVariables: boolean;\n+    fetch: boolean;\n+    proxyObject: boolean;\n+    intl: boolean;\n+    intlPluralRules: boolean;\n+    intersectionObserver: boolean;\n+  };\n }\n \n let browserInfo: BrowserInfo | null = null;\n \n export function getBrowserInfo(): BrowserInfo {\n   if (!browserInfo) {\n     const browser = Bowser.getParser(window.navigator.userAgent);\n+    const ios = browser.is(Bowser.OS_MAP.iOS);\n+    const msie = browser.is(Bowser.BROWSER_MAP.ie);\n+    const mobile = browser.is(Bowser.PLATFORMS_MAP.mobile);\n+    const version = Number.parseFloat(browser.getBrowserVersion());\n     browserInfo = {\n-      ios: browser.is(Bowser.OS_MAP.iOS),\n-      msie: browser.is(Bowser.BROWSER_MAP.ie),\n-      mobile: browser.is(Bowser.PLATFORMS_MAP.mobile),\n+      version,\n+      supports: {\n+        intl: typeof Intl !== \"undefined\",\n+        intlPluralRules:\n+          typeof Intl !== \"undefined\" && Boolean(Intl.PluralRules),\n+        proxyObject: Boolean(window.Proxy),\n+        cssVariables: window.CSS && CSS.supports(\"color\", \"var(--fake-var)\"),\n+        fetch: Boolean(window.fetch),\n+        intersectionObserver:\n+          \"IntersectionObserver\" in window &&\n+          \"IntersectionObserverEntry\" in window &&\n+          \"intersectionRatio\" in\n+            (window as any).IntersectionObserverEntry.prototype,\n+      },\n+      ios,\n+      msie,\n+      mobile,\n     };\n   }\n   return browserInfo;"
    },
    {
      "sha": "ec9b07b67d8e49cfedfb276ea3b4438985478629",
      "filename": "src/core/client/framework/lib/relay/lookup.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/lib/relay/lookup.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/lib/relay/lookup.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/relay/lookup.ts?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -56,7 +56,7 @@ const createProxy = <T = any>(\n   // IE11 does not have Proxy support and the polyfill only supports\n   // a subset of features under special circumstances.\n   // https://github.com/GoogleChrome/proxy-polyfill\n-  if (getBrowserInfo().msie) {\n+  if (!getBrowserInfo().supports.proxyObject) {\n     target = recordSource;\n     delete proxy.ownKeys;\n     delete proxy.getOwnPropertyDescriptor;"
    },
    {
      "sha": "a0629e6bc35490364fdd398b948e990f02a76d71",
      "filename": "src/core/client/framework/testHelpers/createTestRenderer.tsx",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/testHelpers/createTestRenderer.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/framework/testHelpers/createTestRenderer.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/testHelpers/createTestRenderer.tsx?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -96,6 +96,15 @@ export default function createTestRenderer<\n     rest: new RestClient(\"http://localhost/api\"),\n     postMessage: new PostMessageService(),\n     browserInfo: params.browserInfo || {\n+      supports: {\n+        cssVariables: true,\n+        intersectionObserver: true,\n+        fetch: true,\n+        intl: true,\n+        intlPluralRules: true,\n+        proxyObject: true,\n+      },\n+      version: 10.0,\n       ios: false,\n       mobile: false,\n       msie: false,"
    },
    {
      "sha": "0f528a17143c8d5cfa29fe27214b05295953c286",
      "filename": "src/core/client/stream/tabs/Configure/ConfigureQuery.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/stream/tabs/Configure/ConfigureQuery.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/stream/tabs/Configure/ConfigureQuery.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Configure/ConfigureQuery.tsx?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -3,7 +3,7 @@ import { once } from \"lodash\";\n import React, { FunctionComponent, Suspense } from \"react\";\n import { graphql } from \"react-relay\";\n \n-import { polyfillCSSVarsForIE11 } from \"coral-framework/helpers\";\n+import { polyfillCSSVars } from \"coral-framework/helpers\";\n import {\n   QueryRenderData,\n   QueryRenderer,\n@@ -18,7 +18,7 @@ const loadConfigureContainer = () =>\n   import(\"./ConfigureContainer\" /* webpackChunkName: \"configure\" */).then(\n     (x) => {\n       // New css is loaded, take care of polyfilling those css vars for IE11.\n-      void polyfillCSSVarsForIE11();\n+      void polyfillCSSVars();\n       return x;\n     }\n   );"
    },
    {
      "sha": "670f382fa49c6dd82675c806741d42a2e15293ca",
      "filename": "src/core/client/stream/tabs/Discussions/DiscussionsQuery.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/stream/tabs/Discussions/DiscussionsQuery.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/stream/tabs/Discussions/DiscussionsQuery.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Discussions/DiscussionsQuery.tsx?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -3,7 +3,7 @@ import { once } from \"lodash\";\n import React, { FunctionComponent, Suspense } from \"react\";\n import { graphql } from \"react-relay\";\n \n-import { polyfillCSSVarsForIE11 } from \"coral-framework/helpers\";\n+import { polyfillCSSVars } from \"coral-framework/helpers\";\n import {\n   QueryRenderData,\n   QueryRenderer,\n@@ -19,7 +19,7 @@ const loadDiscussionsContainer = () =>\n   import(\"./DiscussionsContainer\" /* webpackChunkName: \"profile\" */).then(\n     (x) => {\n       // New css is loaded, take care of polyfilling those css vars for IE11.\n-      void polyfillCSSVarsForIE11();\n+      void polyfillCSSVars();\n       return x;\n     }\n   );"
    },
    {
      "sha": "233a327f9883a94fd33ff6726c490cae654a7516",
      "filename": "src/core/client/stream/tabs/Profile/ProfileQuery.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/stream/tabs/Profile/ProfileQuery.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/core/client/stream/tabs/Profile/ProfileQuery.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Profile/ProfileQuery.tsx?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -3,7 +3,7 @@ import { once } from \"lodash\";\n import React, { FunctionComponent, Suspense } from \"react\";\n import { graphql } from \"react-relay\";\n \n-import { polyfillCSSVarsForIE11 } from \"coral-framework/helpers\";\n+import { polyfillCSSVars } from \"coral-framework/helpers\";\n import {\n   QueryRenderData,\n   QueryRenderer,\n@@ -18,7 +18,7 @@ import { ProfileQueryLocal as Local } from \"coral-stream/__generated__/ProfileQu\n const loadProfileContainer = () =>\n   import(\"./ProfileContainer\" /* webpackChunkName: \"profile\" */).then((x) => {\n     // New css is loaded, take care of polyfilling those css vars for IE11.\n-    void polyfillCSSVarsForIE11();\n+    void polyfillCSSVars();\n     return x;\n   });\n // (cvle) For some reason without `setTimeout` this request will block other requests."
    },
    {
      "sha": "567af93d588120dd6f6db2fdc3170ba8f70d3a2a",
      "filename": "src/types/intl.d.ts",
      "status": "added",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/types/intl.d.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/ec9a4544631ebbf695fb02f41735c7a368dcafa4/src/types/intl.d.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/types/intl.d.ts?ref=ec9a4544631ebbf695fb02f41735c7a368dcafa4",
      "patch": "@@ -0,0 +1 @@\n+declare module \"intl\";"
    }
  ]
}
