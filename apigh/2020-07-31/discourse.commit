{
  "sha": "c2276f0b7ec0a9b6ecfbdf9f68cdb35e038baad7",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODpjMjI3NmYwYjdlYzBhOWI2ZWNmYmRmOWY2OGNkYjM1ZTAzOGJhYWQ3",
  "commit": {
    "author": {
      "name": "Sam Saffron",
      "email": "sam.saffron@gmail.com",
      "date": "2020-07-31T01:23:12Z"
    },
    "committer": {
      "name": "Sam Saffron",
      "email": "sam.saffron@gmail.com",
      "date": "2020-07-31T01:23:12Z"
    },
    "message": "DEV: add acceptance test for topic list\n\nfollowup on dc14d156\n\nWe previously had no tests and no cleanup",
    "tree": {
      "sha": "ef5a759d2cb5f552edd822f32e30c9e70dd7ac35",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/ef5a759d2cb5f552edd822f32e30c9e70dd7ac35"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/c2276f0b7ec0a9b6ecfbdf9f68cdb35e038baad7",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEOSsR4Zg5f63AmUE+uWBhaNL/2fUFAl8jcoAACgkQuWBhaNL/\n2fWnRA/8CQ78Rd81W1KuvgYESEOgZ4Dx88yGhaUw8joR3e0aHeTMMf25E+CaC7xa\n3eXIxXk5GrQy4gvzYJROhPU1/JaZLy0NDIYuYvNInfyG4RkyBehd+lDc2WI7LZJ3\njze6N7JyRfMnHVlpV/yIxrLFOo8/aCidhsHZXkVHnxVR/frWrWYucGlIxZPCC68n\nKliVUmaRSfHcdVMYDNR4KxBA9qsPvHgX8QLNWt+hxaF1SXmzvYDNsddMxZnn0N/D\nM9qELA1b17xk4RwIF4mknJspvQdMmTIjyduoUiTRpauPF+JHULLao57LWNLDbi5w\nesXv7Wfv4Y/gJOUwTu7pJDac+X9oOAT/63SZGB0dZGW45JOMhAA2NeyW4a59MIVp\ngyg5RidnGwMH5s/0bntXJ0TczV4N/z3cprrHwea2JjfuOW5FX2cTUr+XIKJ1MKDg\nnOwzeSQzfBKiOY+XjPardM5psMdu6x0fFdrJV98bQ501gr6F4dSbNAX0FbdIJaNf\n85rghWhWKQ3clinzlrfOPjlCI3+QM0WrWw8tButclZIlZikqMM/rutuFx1fNe05S\npOICoWGj0ssU/g29pwVK+4ovlVZSIdqw/mVkfUTR6MISnanqyWPXA5Pv+pISD0qn\nXtARwEsEZYbmpNjxTC252l/RghBzuPLQKyMAeSQpWxaCzI7LsTU=\n=ti+N\n-----END PGP SIGNATURE-----",
      "payload": "tree ef5a759d2cb5f552edd822f32e30c9e70dd7ac35\nparent e6dbb4fcf52fa74853ed45616dd7cbf620c7deca\nauthor Sam Saffron <sam.saffron@gmail.com> 1596158592 +1000\ncommitter Sam Saffron <sam.saffron@gmail.com> 1596158592 +1000\n\nDEV: add acceptance test for topic list\n\nfollowup on dc14d156\n\nWe previously had no tests and no cleanup\n"
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/c2276f0b7ec0a9b6ecfbdf9f68cdb35e038baad7",
  "html_url": "https://github.com/discourse/discourse/commit/c2276f0b7ec0a9b6ecfbdf9f68cdb35e038baad7",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/c2276f0b7ec0a9b6ecfbdf9f68cdb35e038baad7/comments",
  "author": {
    "login": "SamSaffron",
    "id": 5213,
    "node_id": "MDQ6VXNlcjUyMTM=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/5213?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SamSaffron",
    "html_url": "https://github.com/SamSaffron",
    "followers_url": "https://api.github.com/users/SamSaffron/followers",
    "following_url": "https://api.github.com/users/SamSaffron/following{/other_user}",
    "gists_url": "https://api.github.com/users/SamSaffron/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SamSaffron/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SamSaffron/subscriptions",
    "organizations_url": "https://api.github.com/users/SamSaffron/orgs",
    "repos_url": "https://api.github.com/users/SamSaffron/repos",
    "events_url": "https://api.github.com/users/SamSaffron/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SamSaffron/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "SamSaffron",
    "id": 5213,
    "node_id": "MDQ6VXNlcjUyMTM=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/5213?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SamSaffron",
    "html_url": "https://github.com/SamSaffron",
    "followers_url": "https://api.github.com/users/SamSaffron/followers",
    "following_url": "https://api.github.com/users/SamSaffron/following{/other_user}",
    "gists_url": "https://api.github.com/users/SamSaffron/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SamSaffron/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SamSaffron/subscriptions",
    "organizations_url": "https://api.github.com/users/SamSaffron/orgs",
    "repos_url": "https://api.github.com/users/SamSaffron/repos",
    "events_url": "https://api.github.com/users/SamSaffron/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SamSaffron/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e6dbb4fcf52fa74853ed45616dd7cbf620c7deca",
      "url": "https://api.github.com/repos/discourse/discourse/commits/e6dbb4fcf52fa74853ed45616dd7cbf620c7deca",
      "html_url": "https://github.com/discourse/discourse/commit/e6dbb4fcf52fa74853ed45616dd7cbf620c7deca"
    }
  ],
  "stats": {
    "total": 23,
    "additions": 23,
    "deletions": 0
  },
  "files": [
    {
      "sha": "632b7927b73b96e305a3d9aed4bde4e5b28c8029",
      "filename": "test/javascripts/acceptance/topic-list-tracker-test.js",
      "status": "added",
      "additions": 21,
      "deletions": 0,
      "changes": 21,
      "blob_url": "https://github.com/discourse/discourse/blob/c2276f0b7ec0a9b6ecfbdf9f68cdb35e038baad7/test/javascripts/acceptance/topic-list-tracker-test.js",
      "raw_url": "https://github.com/discourse/discourse/raw/c2276f0b7ec0a9b6ecfbdf9f68cdb35e038baad7/test/javascripts/acceptance/topic-list-tracker-test.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/acceptance/topic-list-tracker-test.js?ref=c2276f0b7ec0a9b6ecfbdf9f68cdb35e038baad7",
      "patch": "@@ -0,0 +1,21 @@\n+import { acceptance } from \"helpers/qunit-helpers\";\n+import {\n+  nextTopicUrl,\n+  previousTopicUrl,\n+  setTopicId\n+} from \"discourse/lib/topic-list-tracker\";\n+acceptance(\"Topic list tracking\");\n+\n+QUnit.test(\"Navigation\", async assert => {\n+  await visit(\"/\");\n+  let url = await nextTopicUrl();\n+  assert.equal(url, \"/t/error-after-upgrade-to-0-9-7-9/11557\");\n+\n+  setTopicId(11557);\n+\n+  url = await nextTopicUrl();\n+  assert.equal(url, \"/t/welcome-to-meta-discourse-org/1\");\n+\n+  url = await previousTopicUrl();\n+  assert.equal(url, \"/t/error-after-upgrade-to-0-9-7-9/11557\");\n+});"
    },
    {
      "sha": "dd1528fc8abd6a1890101fd542f061d68e33bd5c",
      "filename": "test/javascripts/helpers/qunit-helpers.js",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/c2276f0b7ec0a9b6ecfbdf9f68cdb35e038baad7/test/javascripts/helpers/qunit-helpers.js",
      "raw_url": "https://github.com/discourse/discourse/raw/c2276f0b7ec0a9b6ecfbdf9f68cdb35e038baad7/test/javascripts/helpers/qunit-helpers.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/helpers/qunit-helpers.js?ref=c2276f0b7ec0a9b6ecfbdf9f68cdb35e038baad7",
      "patch": "@@ -27,6 +27,7 @@ import User from \"discourse/models/user\";\n import { mapRoutes } from \"discourse/mapping-router\";\n import { currentSettings, mergeSettings } from \"helpers/site-settings\";\n import { getOwner } from \"discourse-common/lib/get-owner\";\n+import { setTopicList } from \"discourse/lib/topic-list-tracker\";\n \n export function currentUser() {\n   return User.create(sessionFixtures[\"/session/current.json\"].current_user);\n@@ -198,6 +199,7 @@ export function acceptance(name, options) {\n       resetUsernameDecorators();\n       resetOneboxCache();\n       resetCustomPostMessageCallbacks();\n+      setTopicList(null);\n       _clearSnapshots();\n       Discourse._runInitializer(\n         \"instanceInitializers\","
    }
  ]
}
