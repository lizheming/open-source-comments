{
  "sha": "de79f1994717f0abd26f344a0b6133ce69a53a1f",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODpkZTc5ZjE5OTQ3MTdmMGFiZDI2ZjM0NGEwYjYxMzNjZTY5YTUzYTFm",
  "commit": {
    "author": {
      "name": "Jarek Radosz",
      "email": "jradosz@gmail.com",
      "date": "2020-07-17T21:31:01Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2020-07-17T21:31:01Z"
    },
    "message": "Revert \"UX: Style video elements, show descriptions (#10040)\" (#10258)\n\nThis reverts commit 7d289a4f3e9531a0c7e458a52af85d0ae5affab9.\r\n\r\nNow that 36bad0c31f6fb1afce2d311b72f5f9661be6af97 is in and we have video previews on all platforms, the commit that's being reverted is no longer needed. In the worst case scenario, the video description is clipped under the video poster if the video aspect ratio is other than 16:9. This commit removes descriptions and the custom style for the video elements.\r\n\r\n# Conflicts:\r\n#\tapp/assets/javascripts/pretty-text/addon/engines/discourse-markdown-it.js\r\n#\ttest/javascripts/lib/pretty-text-test.js",
    "tree": {
      "sha": "b0ee6c7555fc236d7e7063a75b5fdd00dc26da99",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/b0ee6c7555fc236d7e7063a75b5fdd00dc26da99"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/de79f1994717f0abd26f344a0b6133ce69a53a1f",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfEhiVCRBK7hj4Ov3rIwAAdHIIAFs1X+/1z4siKJ7BiuNYLymZ\nPpxUXTIL6ZNOcm5CX7FJy62znGM2yfgoyMLeGYAskZEfoJFm5qtsjXhL4syqY9wH\nOvn/9YP7JpmMSQatBeuVsXggWPmoz2ePjxvhw11TdJTayjo/UggCyzXQSW+gqDRK\ncygitxvOSMLx7goJBPfZuvUzoAnd5UphnMt6/bTMXjK0RyUYodBOCBrHX57wERRs\n/7KJ02964jWMc3PoSnFPKmg6PjN4Xb4FXwZZVbRYWZ8um2EIncQB6gBWBLEN90kB\nOFRjHoTLnM3esJGswIGqrtVN1WX0l8/eii4htZ8G22BzpxoPbHNEGtu79B0rMgc=\n=BJ33\n-----END PGP SIGNATURE-----\n",
      "payload": "tree b0ee6c7555fc236d7e7063a75b5fdd00dc26da99\nparent 72c44b3b199da236f9260f8af6d38118ffe37522\nauthor Jarek Radosz <jradosz@gmail.com> 1595021461 +0200\ncommitter GitHub <noreply@github.com> 1595021461 +0200\n\nRevert \"UX: Style video elements, show descriptions (#10040)\" (#10258)\n\nThis reverts commit 7d289a4f3e9531a0c7e458a52af85d0ae5affab9.\r\n\r\nNow that 36bad0c31f6fb1afce2d311b72f5f9661be6af97 is in and we have video previews on all platforms, the commit that's being reverted is no longer needed. In the worst case scenario, the video description is clipped under the video poster if the video aspect ratio is other than 16:9. This commit removes descriptions and the custom style for the video elements.\r\n\r\n# Conflicts:\r\n#\tapp/assets/javascripts/pretty-text/addon/engines/discourse-markdown-it.js\r\n#\ttest/javascripts/lib/pretty-text-test.js"
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/de79f1994717f0abd26f344a0b6133ce69a53a1f",
  "html_url": "https://github.com/discourse/discourse/commit/de79f1994717f0abd26f344a0b6133ce69a53a1f",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/de79f1994717f0abd26f344a0b6133ce69a53a1f/comments",
  "author": {
    "login": "CvX",
    "id": 66961,
    "node_id": "MDQ6VXNlcjY2OTYx",
    "avatar_url": "https://avatars1.githubusercontent.com/u/66961?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/CvX",
    "html_url": "https://github.com/CvX",
    "followers_url": "https://api.github.com/users/CvX/followers",
    "following_url": "https://api.github.com/users/CvX/following{/other_user}",
    "gists_url": "https://api.github.com/users/CvX/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/CvX/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/CvX/subscriptions",
    "organizations_url": "https://api.github.com/users/CvX/orgs",
    "repos_url": "https://api.github.com/users/CvX/repos",
    "events_url": "https://api.github.com/users/CvX/events{/privacy}",
    "received_events_url": "https://api.github.com/users/CvX/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "72c44b3b199da236f9260f8af6d38118ffe37522",
      "url": "https://api.github.com/repos/discourse/discourse/commits/72c44b3b199da236f9260f8af6d38118ffe37522",
      "html_url": "https://github.com/discourse/discourse/commit/72c44b3b199da236f9260f8af6d38118ffe37522"
    }
  ],
  "stats": {
    "total": 20,
    "additions": 2,
    "deletions": 18
  },
  "files": [
    {
      "sha": "1a5f50a6deaa68af424e462efa4a12cc9697ebf7",
      "filename": "app/assets/javascripts/pretty-text/addon/engines/discourse-markdown-it.js",
      "status": "modified",
      "additions": 2,
      "deletions": 6,
      "changes": 8,
      "blob_url": "https://github.com/discourse/discourse/blob/de79f1994717f0abd26f344a0b6133ce69a53a1f/app/assets/javascripts/pretty-text/addon/engines/discourse-markdown-it.js",
      "raw_url": "https://github.com/discourse/discourse/raw/de79f1994717f0abd26f344a0b6133ce69a53a1f/app/assets/javascripts/pretty-text/addon/engines/discourse-markdown-it.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/pretty-text/addon/engines/discourse-markdown-it.js?ref=de79f1994717f0abd26f344a0b6133ce69a53a1f",
      "patch": "@@ -141,12 +141,11 @@ export function extractDataAttribute(str) {\n \n // videoHTML and audioHTML follow the same HTML syntax\n // as oneboxer.rb when dealing with these formats\n-function videoHTML(token, opts) {\n+function videoHTML(token) {\n   const src = token.attrGet(\"src\");\n   const origSrc = token.attrGet(\"data-orig-src\");\n   const dataOrigSrcAttr = origSrc !== null ? `data-orig-src=\"${origSrc}\"` : \"\";\n   return `<div class=\"video-container\">\n-    <p class=\"video-description\">${opts.alt}</p>\n     <video width=\"100%\" height=\"100%\" preload=\"metadata\" controls>\n       <source src=\"${src}\" ${dataOrigSrcAttr}>\n       <a href=\"${src}\">${src}</a>\n@@ -174,11 +173,8 @@ function renderImageOrPlayableMedia(tokens, idx, options, env, slf) {\n   // markdown-it supports returning HTML instead of continuing to render the current token\n   // see https://github.com/markdown-it/markdown-it/blob/master/docs/architecture.md#renderer\n   // handles |video and |audio alt transformations for image tags\n-  const mediaOpts = {\n-    alt: split[0]\n-  };\n   if (split[1] === \"video\") {\n-    return videoHTML(token, mediaOpts);\n+    return videoHTML(token);\n   } else if (split[1] === \"audio\") {\n     return audioHTML(token);\n   }"
    },
    {
      "sha": "0d2ded7a4d2798f2fb308ff2ecb7ae093f145e47",
      "filename": "app/assets/javascripts/pretty-text/addon/white-lister.js",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/de79f1994717f0abd26f344a0b6133ce69a53a1f/app/assets/javascripts/pretty-text/addon/white-lister.js",
      "raw_url": "https://github.com/discourse/discourse/raw/de79f1994717f0abd26f344a0b6133ce69a53a1f/app/assets/javascripts/pretty-text/addon/white-lister.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/pretty-text/addon/white-lister.js?ref=de79f1994717f0abd26f344a0b6133ce69a53a1f",
      "patch": "@@ -185,7 +185,6 @@ export const DEFAULT_LIST = [\n   \"span.excerpt\",\n   \"div.excerpt\",\n   \"div.video-container\",\n-  \"p.video-description\",\n   \"span.hashtag\",\n   \"span.mention\",\n   \"strike\","
    },
    {
      "sha": "124da3ec4b6cdf7d4ce6e4e50a141ed3148febb6",
      "filename": "app/assets/stylesheets/common/base/onebox.scss",
      "status": "modified",
      "additions": 0,
      "deletions": 9,
      "changes": 9,
      "blob_url": "https://github.com/discourse/discourse/blob/de79f1994717f0abd26f344a0b6133ce69a53a1f/app/assets/stylesheets/common/base/onebox.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/de79f1994717f0abd26f344a0b6133ce69a53a1f/app/assets/stylesheets/common/base/onebox.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/common/base/onebox.scss?ref=de79f1994717f0abd26f344a0b6133ce69a53a1f",
      "patch": "@@ -703,9 +703,6 @@ aside.onebox.stackexchange .onebox-body {\n // Force oneboxed videos to 16:9 aspect ratio\n .onebox.video-onebox,\n .video-container {\n-  background: $primary-very-low;\n-  border: 1px solid $primary-low;\n-  border-radius: 2px;\n   position: relative;\n   padding: 0 0 56.25% 0;\n   width: 100%;\n@@ -717,12 +714,6 @@ aside.onebox.stackexchange .onebox-body {\n   }\n }\n \n-.video-description {\n-  color: $primary-medium;\n-  margin: 1rem;\n-  position: absolute;\n-}\n-\n .onebox-placeholder-container {\n   position: relative;\n   width: 100%;"
    },
    {
      "sha": "e02e8c7e6301c3613eae86ccd43e6d0faa6169b9",
      "filename": "test/javascripts/lib/pretty-text-test.js",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/de79f1994717f0abd26f344a0b6133ce69a53a1f/test/javascripts/lib/pretty-text-test.js",
      "raw_url": "https://github.com/discourse/discourse/raw/de79f1994717f0abd26f344a0b6133ce69a53a1f/test/javascripts/lib/pretty-text-test.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/lib/pretty-text-test.js?ref=de79f1994717f0abd26f344a0b6133ce69a53a1f",
      "patch": "@@ -1029,7 +1029,6 @@ QUnit.test(\"video\", assert => {\n   assert.cooked(\n     \"![baby shark|video](upload://eyPnj7UzkU0AkGkx2dx8G4YM1Jx.mp4)\",\n     `<p><div class=\"video-container\">\n-    <p class=\"video-description\">baby shark</p>\n     <video width=\"100%\" height=\"100%\" preload=\"metadata\" controls>\n       <source src=\"/404\" data-orig-src=\"upload://eyPnj7UzkU0AkGkx2dx8G4YM1Jx.mp4\">\n       <a href=\"/404\">/404</a>\n@@ -1056,7 +1055,6 @@ QUnit.test(\"video - mapped url - secure media enabled\", assert => {\n       lookupUploadUrls: lookupUploadUrls\n     },\n     `<p><div class=\"video-container\">\n-    <p class=\"video-description\">baby shark</p>\n     <video width=\"100%\" height=\"100%\" preload=\"metadata\" controls>\n       <source src=\"/secure-media-uploads/original/3X/c/b/test.mp4\">\n       <a href=\"/secure-media-uploads/original/3X/c/b/test.mp4\">/secure-media-uploads/original/3X/c/b/test.mp4</a>"
    }
  ]
}
