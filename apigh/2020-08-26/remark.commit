{
  "sha": "5c23206d00c60ed9fc7e6fb4a01ad0040c211562",
  "node_id": "MDY6Q29tbWl0MTE0ODI5NTAzOjVjMjMyMDZkMDBjNjBlZDlmYzdlNmZiNGEwMWFkMDA0MGMyMTE1NjI=",
  "commit": {
    "author": {
      "name": "Pavel Mineev",
      "email": "pavel@mineev.me",
      "date": "2020-08-20T22:00:16Z"
    },
    "committer": {
      "name": "Umputun",
      "email": "umputun@gmail.com",
      "date": "2020-08-20T23:15:50Z"
    },
    "message": "Hide email subscription by param from frontend",
    "tree": {
      "sha": "1738618b1ae06a384da68e15a1ddf3565a11787f",
      "url": "https://api.github.com/repos/umputun/remark42/git/trees/1738618b1ae06a384da68e15a1ddf3565a11787f"
    },
    "url": "https://api.github.com/repos/umputun/remark42/git/commits/5c23206d00c60ed9fc7e6fb4a01ad0040c211562",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/umputun/remark42/commits/5c23206d00c60ed9fc7e6fb4a01ad0040c211562",
  "html_url": "https://github.com/umputun/remark42/commit/5c23206d00c60ed9fc7e6fb4a01ad0040c211562",
  "comments_url": "https://api.github.com/repos/umputun/remark42/commits/5c23206d00c60ed9fc7e6fb4a01ad0040c211562/comments",
  "author": {
    "login": "akellbl4",
    "id": 2330682,
    "node_id": "MDQ6VXNlcjIzMzA2ODI=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/2330682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/akellbl4",
    "html_url": "https://github.com/akellbl4",
    "followers_url": "https://api.github.com/users/akellbl4/followers",
    "following_url": "https://api.github.com/users/akellbl4/following{/other_user}",
    "gists_url": "https://api.github.com/users/akellbl4/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/akellbl4/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/akellbl4/subscriptions",
    "organizations_url": "https://api.github.com/users/akellbl4/orgs",
    "repos_url": "https://api.github.com/users/akellbl4/repos",
    "events_url": "https://api.github.com/users/akellbl4/events{/privacy}",
    "received_events_url": "https://api.github.com/users/akellbl4/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "umputun",
    "id": 535880,
    "node_id": "MDQ6VXNlcjUzNTg4MA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/535880?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/umputun",
    "html_url": "https://github.com/umputun",
    "followers_url": "https://api.github.com/users/umputun/followers",
    "following_url": "https://api.github.com/users/umputun/following{/other_user}",
    "gists_url": "https://api.github.com/users/umputun/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/umputun/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/umputun/subscriptions",
    "organizations_url": "https://api.github.com/users/umputun/orgs",
    "repos_url": "https://api.github.com/users/umputun/repos",
    "events_url": "https://api.github.com/users/umputun/events{/privacy}",
    "received_events_url": "https://api.github.com/users/umputun/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "c9800a37997e9e0f5a8dc1b10ecae67cf0728d33",
      "url": "https://api.github.com/repos/umputun/remark42/commits/c9800a37997e9e0f5a8dc1b10ecae67cf0728d33",
      "html_url": "https://github.com/umputun/remark42/commit/c9800a37997e9e0f5a8dc1b10ecae67cf0728d33"
    }
  ],
  "stats": {
    "total": 11,
    "additions": 10,
    "deletions": 1
  },
  "files": [
    {
      "sha": "ff42ece35a21ed69b6ab1be39080f41fdb6b8ecb",
      "filename": "README.md",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/umputun/remark42/blob/5c23206d00c60ed9fc7e6fb4a01ad0040c211562/README.md",
      "raw_url": "https://github.com/umputun/remark42/raw/5c23206d00c60ed9fc7e6fb4a01ad0040c211562/README.md",
      "contents_url": "https://api.github.com/repos/umputun/remark42/contents/README.md?ref=5c23206d00c60ed9fc7e6fb4a01ad0040c211562",
      "patch": "@@ -455,6 +455,10 @@ Add this snippet to the bottom of web page:\n     theme: 'dark', // optional param; if it isn't defined default value ('light') will be used\n     page_title: 'Moving to Remark42', // optional param; if it isn't defined `document.title` will be used\n     locale: 'en' // set up locale and language, if it isn't defined default value ('en') will be used\n+    show_email_subscription: false // optional param; by default it is `true` and you can see email subscription feature\n+                                   // in interface when enable it from backend side\n+                                   // if you set this param in `false` you will get notifications email notifications as admin\n+                                   // but your users won't have interface for subscription\n   };\n \n   (function(c) {"
    },
    {
      "sha": "e2fdd913aedd9e0188112769468709126d50a2e0",
      "filename": "frontend/app/common/config-types.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/umputun/remark42/blob/5c23206d00c60ed9fc7e6fb4a01ad0040c211562/frontend/app/common/config-types.ts",
      "raw_url": "https://github.com/umputun/remark42/raw/5c23206d00c60ed9fc7e6fb4a01ad0040c211562/frontend/app/common/config-types.ts",
      "contents_url": "https://api.github.com/repos/umputun/remark42/contents/frontend/app/common/config-types.ts?ref=5c23206d00c60ed9fc7e6fb4a01ad0040c211562",
      "patch": "@@ -17,6 +17,7 @@ export interface CommentsConfig {\n   page_title?: string;\n   node?: string | HTMLElement;\n   locale?: string;\n+  show_email_subscription?: boolean;\n   // eslint-disable-next-line @typescript-eslint/no-explicit-any\n   __colors__?: any;\n }"
    },
    {
      "sha": "e36b3757c9269366bdac7cb367bbf6842a53e41d",
      "filename": "frontend/app/common/settings.ts",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/umputun/remark42/blob/5c23206d00c60ed9fc7e6fb4a01ad0040c211562/frontend/app/common/settings.ts",
      "raw_url": "https://github.com/umputun/remark42/raw/5c23206d00c60ed9fc7e6fb4a01ad0040c211562/frontend/app/common/settings.ts",
      "contents_url": "https://api.github.com/repos/umputun/remark42/contents/frontend/app/common/settings.ts?ref=5c23206d00c60ed9fc7e6fb4a01ad0040c211562",
      "patch": "@@ -10,6 +10,7 @@ export interface QuerySettingsType {\n   theme: Theme;\n   /* used in delete users data page */\n   token?: string;\n+  show_email_subscription?: boolean;\n }\n \n export const querySettings: Partial<QuerySettingsType> = parseQuery();\n@@ -25,6 +26,9 @@ if (!querySettings.theme || THEMES.indexOf(querySettings.theme) === -1) {\n   querySettings.theme = THEMES[0];\n }\n \n+// eslint-disable-next-line @typescript-eslint/no-explicit-any\n+querySettings.show_email_subscription = (querySettings.show_email_subscription as any) !== 'false';\n+\n export const siteId = querySettings.site_id;\n export const pageTitle = querySettings.page_title;\n export const url = querySettings.url;"
    },
    {
      "sha": "d5d56a8c6e6e03857bc9809aa24eedd832c79a5c",
      "filename": "frontend/app/components/comment-form/comment-form.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/umputun/remark42/blob/5c23206d00c60ed9fc7e6fb4a01ad0040c211562/frontend/app/components/comment-form/comment-form.tsx",
      "raw_url": "https://github.com/umputun/remark42/raw/5c23206d00c60ed9fc7e6fb4a01ad0040c211562/frontend/app/components/comment-form/comment-form.tsx",
      "contents_url": "https://api.github.com/repos/umputun/remark42/contents/frontend/app/components/comment-form/comment-form.tsx?ref=5c23206d00c60ed9fc7e6fb4a01ad0040c211562",
      "patch": "@@ -535,7 +535,7 @@ export class CommentForm extends Component<Props, State> {\n                   {this.renderMarkdownTip()}\n                   <FormattedMessage id=\"commentForm.subscribe-by\" defaultMessage=\"Subscribe by\" />{' '}\n                   <SubscribeByRSS userId={props.user !== null ? props.user.id : null} />\n-                  {StaticStore.config.email_notifications && (\n+                  {StaticStore.config.email_notifications && StaticStore.query.show_email_subscription && (\n                     <Fragment>\n                       {' '}\n                       <FormattedMessage id=\"commentForm.subscribe-or\" defaultMessage=\"or\" /> <SubscribeByEmail />"
    }
  ]
}
