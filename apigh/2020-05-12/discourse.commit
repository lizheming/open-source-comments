{
  "sha": "16137308b011146be29f88c3856b154d55d04abf",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODoxNjEzNzMwOGIwMTExNDZiZTI5Zjg4YzM4NTZiMTU0ZDU1ZDA0YWJm",
  "commit": {
    "author": {
      "name": "Bianca Nenciu",
      "email": "nbianca@users.noreply.github.com",
      "date": "2020-05-12T08:18:19Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2020-05-12T08:18:19Z"
    },
    "message": "FIX: Show Settings button if plugin has settings (#9728)\n\nIt used to check if the plugin has an enabled_setting.",
    "tree": {
      "sha": "0799e944fe7533418830ca8319a782449d76394d",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/0799e944fe7533418830ca8319a782449d76394d"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/16137308b011146be29f88c3856b154d55d04abf",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeulvLCRBK7hj4Ov3rIwAAdHIIAH7T/KL7KxhKkwqynmukjEV6\nPZL2hPA22pzdsrgFK+zRNPIzWvfGdA3jCpuGnH9A42QlBH8FpTerPQl3YfwTY/lX\nQd7NbxQkC6443sfSkdq+Gkxzufs1HKaQNry8MXUWw0ET7KqIwzWgB3AEWM4jjXNH\nTbEbu1y/BMdwTLidtUXo5+pDZdXxi7nWtZS8TlysYbttikoA/0NWzS98K6+4/oX+\n1T8qW5ng2bAsS8XcXsygMWe6mTHczMTqrGufYkzkN8RlwlYEwvpYDOmptGFfcduv\nH6eL7Nm9B5CdAhQ5Ur6Cf6B9Dt4OGvGThjeGiF6kMF1ViY0EEag6cHGylF5AgCo=\n=N1T1\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 0799e944fe7533418830ca8319a782449d76394d\nparent a29ae17d3a57c6cd92716b53bbab5b9a229f77e7\nauthor Bianca Nenciu <nbianca@users.noreply.github.com> 1589271499 +0300\ncommitter GitHub <noreply@github.com> 1589271499 +0300\n\nFIX: Show Settings button if plugin has settings (#9728)\n\nIt used to check if the plugin has an enabled_setting."
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/16137308b011146be29f88c3856b154d55d04abf",
  "html_url": "https://github.com/discourse/discourse/commit/16137308b011146be29f88c3856b154d55d04abf",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/16137308b011146be29f88c3856b154d55d04abf/comments",
  "author": {
    "login": "nbianca",
    "id": 23153890,
    "node_id": "MDQ6VXNlcjIzMTUzODkw",
    "avatar_url": "https://avatars3.githubusercontent.com/u/23153890?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nbianca",
    "html_url": "https://github.com/nbianca",
    "followers_url": "https://api.github.com/users/nbianca/followers",
    "following_url": "https://api.github.com/users/nbianca/following{/other_user}",
    "gists_url": "https://api.github.com/users/nbianca/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nbianca/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nbianca/subscriptions",
    "organizations_url": "https://api.github.com/users/nbianca/orgs",
    "repos_url": "https://api.github.com/users/nbianca/repos",
    "events_url": "https://api.github.com/users/nbianca/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nbianca/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "a29ae17d3a57c6cd92716b53bbab5b9a229f77e7",
      "url": "https://api.github.com/repos/discourse/discourse/commits/a29ae17d3a57c6cd92716b53bbab5b9a229f77e7",
      "html_url": "https://github.com/discourse/discourse/commit/a29ae17d3a57c6cd92716b53bbab5b9a229f77e7"
    }
  ],
  "stats": {
    "total": 7,
    "additions": 6,
    "deletions": 1
  },
  "files": [
    {
      "sha": "072f7d2141d2b790fdfacf48716268b348f1cde1",
      "filename": "app/assets/javascripts/admin/templates/plugins-index.hbs",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/16137308b011146be29f88c3856b154d55d04abf/app/assets/javascripts/admin/templates/plugins-index.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/16137308b011146be29f88c3856b154d55d04abf/app/assets/javascripts/admin/templates/plugins-index.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/admin/templates/plugins-index.hbs?ref=16137308b011146be29f88c3856b154d55d04abf",
      "patch": "@@ -47,7 +47,7 @@\n           </td>\n           <td class=\"settings\">\n             {{#if currentUser.admin}}\n-              {{#if plugin.enabled_setting}}\n+              {{#if plugin.has_settings}}\n                 {{d-button class=\"btn-default\" action=(route-action \"showSettings\") actionParam=plugin icon=\"cog\" label=\"admin.plugins.change_settings_short\"}}\n               {{/if}}\n             {{/if}}"
    },
    {
      "sha": "809773c854abe24b04dcf08f96ac89b03e6ef8d1",
      "filename": "app/serializers/admin_plugin_serializer.rb",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/discourse/discourse/blob/16137308b011146be29f88c3856b154d55d04abf/app/serializers/admin_plugin_serializer.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/16137308b011146be29f88c3856b154d55d04abf/app/serializers/admin_plugin_serializer.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/serializers/admin_plugin_serializer.rb?ref=16137308b011146be29f88c3856b154d55d04abf",
      "patch": "@@ -8,6 +8,7 @@ class AdminPluginSerializer < ApplicationSerializer\n              :admin_route,\n              :enabled,\n              :enabled_setting,\n+             :has_settings,\n              :is_official\n \n   def id\n@@ -38,6 +39,10 @@ def enabled_setting\n     object.enabled_site_setting\n   end\n \n+  def has_settings\n+    SiteSetting.plugins.values.include?(id)\n+  end\n+\n   def include_url?\n     url.present?\n   end"
    }
  ]
}
