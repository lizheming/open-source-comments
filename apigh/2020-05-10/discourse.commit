{
  "sha": "3b2b635e9b3779e19c3fb03a62f64aa1dca143c1",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODozYjJiNjM1ZTliMzc3OWUxOWMzZmIwM2E2MmY2NGFhMWRjYTE0M2Mx",
  "commit": {
    "author": {
      "name": "Joffrey JAFFEUX",
      "email": "j.jaffeux@gmail.com",
      "date": "2020-05-10T06:57:48Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2020-05-10T06:57:48Z"
    },
    "message": "DEV: removes setInterval as it might cause issues (#9722)",
    "tree": {
      "sha": "6d2670bc86e22bcab4a15379b16be89471dcd200",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/6d2670bc86e22bcab4a15379b16be89471dcd200"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/3b2b635e9b3779e19c3fb03a62f64aa1dca143c1",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJet6XsCRBK7hj4Ov3rIwAAdHIIACU6Ve+5IaCROd/AsYX2v3Bd\n80U+j55JIBxEkIsr1ajAs4mGWB826yPsP433WNXFt2R583ooE12W85/N3GV76Xcv\nEsWxDnFcKug2w0u750jAtojHwLB8U+HAlXCXRZRDOcWXRjinWQY6yFCD24ljnx2f\n23RSJqp7s0cgDmteoB9H0PZQElwXYiMd4Yy2TxD/85EspEJW2y8IqoBknYSrEF20\nMRbxLFBEjBSLtXn4VFQmk9DecOhGSaqG/kwytWvik0a4dmVWfuwsYcEBt/KRo/nh\nQ0nVxYmov97XQUnNzhFb7F1MY5jJx9WR1mYQM9K2dmE4FYFzAeDy77SLAlu0Zgg=\n=m/ht\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 6d2670bc86e22bcab4a15379b16be89471dcd200\nparent 862d153f54d7786277de1339b659958e4c24f20d\nauthor Joffrey JAFFEUX <j.jaffeux@gmail.com> 1589093868 +0200\ncommitter GitHub <noreply@github.com> 1589093868 +0200\n\nDEV: removes setInterval as it might cause issues (#9722)\n\n"
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/3b2b635e9b3779e19c3fb03a62f64aa1dca143c1",
  "html_url": "https://github.com/discourse/discourse/commit/3b2b635e9b3779e19c3fb03a62f64aa1dca143c1",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/3b2b635e9b3779e19c3fb03a62f64aa1dca143c1/comments",
  "author": {
    "login": "jjaffeux",
    "id": 339945,
    "node_id": "MDQ6VXNlcjMzOTk0NQ==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/339945?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jjaffeux",
    "html_url": "https://github.com/jjaffeux",
    "followers_url": "https://api.github.com/users/jjaffeux/followers",
    "following_url": "https://api.github.com/users/jjaffeux/following{/other_user}",
    "gists_url": "https://api.github.com/users/jjaffeux/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jjaffeux/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jjaffeux/subscriptions",
    "organizations_url": "https://api.github.com/users/jjaffeux/orgs",
    "repos_url": "https://api.github.com/users/jjaffeux/repos",
    "events_url": "https://api.github.com/users/jjaffeux/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jjaffeux/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "862d153f54d7786277de1339b659958e4c24f20d",
      "url": "https://api.github.com/repos/discourse/discourse/commits/862d153f54d7786277de1339b659958e4c24f20d",
      "html_url": "https://github.com/discourse/discourse/commit/862d153f54d7786277de1339b659958e4c24f20d"
    }
  ],
  "stats": {
    "total": 16,
    "additions": 9,
    "deletions": 7
  },
  "files": [
    {
      "sha": "a77b564e593d63b5d32bcbe08e1e2320d27bb706",
      "filename": "app/assets/javascripts/discourse/app/components/emoji-picker.js",
      "status": "modified",
      "additions": 9,
      "deletions": 7,
      "changes": 16,
      "blob_url": "https://github.com/discourse/discourse/blob/3b2b635e9b3779e19c3fb03a62f64aa1dca143c1/app/assets/javascripts/discourse/app/components/emoji-picker.js",
      "raw_url": "https://github.com/discourse/discourse/raw/3b2b635e9b3779e19c3fb03a62f64aa1dca143c1/app/assets/javascripts/discourse/app/components/emoji-picker.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/components/emoji-picker.js?ref=3b2b635e9b3779e19c3fb03a62f64aa1dca143c1",
      "patch": "@@ -1,5 +1,5 @@\n import { inject as service } from \"@ember/service\";\n-import { throttle, debounce, schedule } from \"@ember/runloop\";\n+import { throttle, debounce, schedule, later } from \"@ember/runloop\";\n import Component from \"@ember/component\";\n import { on, observes } from \"discourse-common/utils/decorators\";\n import { findRawTemplate } from \"discourse-common/lib/raw-templates\";\n@@ -196,6 +196,8 @@ export default Component.extend({\n     if (!this.site.isMobileDevice) {\n       this._bindHover();\n     }\n+\n+    later(this, this._onScroll, 100);\n   },\n \n   _bindModalClick() {\n@@ -221,7 +223,6 @@ export default Component.extend({\n   _unbindEvents() {\n     $(this.element).off();\n     $(window).off(\"resize\");\n-    clearInterval(this._refreshInterval);\n     $(\"#reply-control\").off(\"div-resizing\");\n     $(\"html\").off(\"mouseup.emoji-picker\");\n   },\n@@ -370,12 +371,11 @@ export default Component.extend({\n   },\n \n   _bindSectionsScroll() {\n-    let onScroll = () => {\n-      debounce(this, this._checkVisibleSection, 50);\n-    };\n+    this.$list.on(\"scroll\", this._onScroll.bind(this));\n+  },\n \n-    this.$list.on(\"scroll\", onScroll);\n-    this._refreshInterval = setInterval(onScroll, 100);\n+  _onScroll() {\n+    debounce(this, this._checkVisibleSection, 50);\n   },\n \n   _checkVisibleSection(force) {\n@@ -420,6 +420,8 @@ export default Component.extend({\n \n       this._loadVisibleSections();\n     }\n+\n+    later(this, this._checkVisibleSection, 100);\n   },\n \n   _loadVisibleSections() {"
    }
  ]
}
