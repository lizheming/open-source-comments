{
  "sha": "df1afab38e2cb8ab0edae75afefd999d9ae862ce",
  "node_id": "MDY6Q29tbWl0NzI0NTQyNDI6ZGYxYWZhYjM4ZTJjYjhhYjBlZGFlNzVhZmVmZDk5OWQ5YWU4NjJjZQ==",
  "commit": {
    "author": {
      "name": "Wyatt Johnson",
      "email": "wyattjoh@gmail.com",
      "date": "2020-09-17T17:35:42Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2020-09-17T17:35:42Z"
    },
    "message": "[CORL-1386] Timeout Job Processing (#3194)\n\n* feat: added timeout for job processing\n\n* fix: upgraded bull",
    "tree": {
      "sha": "79b4550dd69279aa5590a46c713d349b2854fa16",
      "url": "https://api.github.com/repos/coralproject/talk/git/trees/79b4550dd69279aa5590a46c713d349b2854fa16"
    },
    "url": "https://api.github.com/repos/coralproject/talk/git/commits/df1afab38e2cb8ab0edae75afefd999d9ae862ce",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfY55uCRBK7hj4Ov3rIwAAdHIIABGmnCyh5E+e9gFPWE4zGvl5\nm+3hJz/veJd9TIhGu19oN+u8zK0zA0Io2fl4qjvj9URnBRyTijFrXPA/07bkMoy7\nzAAEq65gaiKel3rKb5Kt2RVIUckw4PxD0fI+iIfitA09ivL2Hi5TatHHub7ul7YG\nHlZKD3bJoMhQCOcYA8luEbkWK32j8V2PPN44/OsmkKyO5DcsrDAG+J5oXpkpIbVK\nClvmZU4YxgXy/V2t5KAc2zN6oc3hKkRir3EDMtNT6Vo9BCzeMDIXT1cIzXpwDOoh\nJ2TPmc2789xgsQzPvrNRIzSo7GEd2c2sAn61oipVRxx5U4RTxLJCo2ms/dSN2FE=\n=krFp\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 79b4550dd69279aa5590a46c713d349b2854fa16\nparent 6838b6d2b2f91804b90330f6830a3323525a4dec\nauthor Wyatt Johnson <wyattjoh@gmail.com> 1600364142 -0600\ncommitter GitHub <noreply@github.com> 1600364142 +0000\n\n[CORL-1386] Timeout Job Processing (#3194)\n\n* feat: added timeout for job processing\n\n* fix: upgraded bull"
    }
  },
  "url": "https://api.github.com/repos/coralproject/talk/commits/df1afab38e2cb8ab0edae75afefd999d9ae862ce",
  "html_url": "https://github.com/coralproject/talk/commit/df1afab38e2cb8ab0edae75afefd999d9ae862ce",
  "comments_url": "https://api.github.com/repos/coralproject/talk/commits/df1afab38e2cb8ab0edae75afefd999d9ae862ce/comments",
  "author": {
    "login": "wyattjoh",
    "id": 633002,
    "node_id": "MDQ6VXNlcjYzMzAwMg==",
    "avatar_url": "https://avatars2.githubusercontent.com/u/633002?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wyattjoh",
    "html_url": "https://github.com/wyattjoh",
    "followers_url": "https://api.github.com/users/wyattjoh/followers",
    "following_url": "https://api.github.com/users/wyattjoh/following{/other_user}",
    "gists_url": "https://api.github.com/users/wyattjoh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wyattjoh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wyattjoh/subscriptions",
    "organizations_url": "https://api.github.com/users/wyattjoh/orgs",
    "repos_url": "https://api.github.com/users/wyattjoh/repos",
    "events_url": "https://api.github.com/users/wyattjoh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wyattjoh/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6838b6d2b2f91804b90330f6830a3323525a4dec",
      "url": "https://api.github.com/repos/coralproject/talk/commits/6838b6d2b2f91804b90330f6830a3323525a4dec",
      "html_url": "https://github.com/coralproject/talk/commit/6838b6d2b2f91804b90330f6830a3323525a4dec"
    }
  ],
  "stats": {
    "total": 168,
    "additions": 89,
    "deletions": 79
  },
  "files": [
    {
      "sha": "69ceb014b92a31aa8f8698e0053781418687043c",
      "filename": "package-lock.json",
      "status": "modified",
      "additions": 71,
      "deletions": 74,
      "changes": 145,
      "blob_url": "https://github.com/coralproject/talk/blob/df1afab38e2cb8ab0edae75afefd999d9ae862ce/package-lock.json",
      "raw_url": "https://github.com/coralproject/talk/raw/df1afab38e2cb8ab0edae75afefd999d9ae862ce/package-lock.json",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/package-lock.json?ref=df1afab38e2cb8ab0edae75afefd999d9ae862ce",
      "patch": "@@ -8602,7 +8602,7 @@\n     },\n     \"@types/accepts\": {\n       \"version\": \"1.3.5\",\n-      \"resolved\": \"http://registry.npmjs.org/@types/accepts/-/accepts-1.3.5.tgz\",\n+      \"resolved\": \"https://registry.npmjs.org/@types/accepts/-/accepts-1.3.5.tgz\",\n       \"integrity\": \"sha512-jOdnI/3qTpHABjM5cx1Hc0sKsPoYCp+DP/GJRGtDlPd7fiV9oXGGIcjW/ZOxLIvjGz8MA+uMZI9metHlgqbgwQ==\",\n       \"requires\": {\n         \"@types/node\": \"*\"\n@@ -8780,9 +8780,9 @@\n       }\n     },\n     \"@types/bull\": {\n-      \"version\": \"3.12.1\",\n-      \"resolved\": \"https://registry.npmjs.org/@types/bull/-/bull-3.12.1.tgz\",\n-      \"integrity\": \"sha512-mn1xmqKBNxllUGuOSBDOvsRpLHPDTSOsGQiHTv6t1gvGtIc/L1IFsN3YTmwf3AZenKzUcBQDGFLrCKt+abhrvQ==\",\n+      \"version\": \"3.14.2\",\n+      \"resolved\": \"https://registry.npmjs.org/@types/bull/-/bull-3.14.2.tgz\",\n+      \"integrity\": \"sha512-+g3Qha7ObdadnM4v/Sz9WDx8eKEaRL4usQmkeUEC25uAltFLioDbAaLnUggfWHONVzW2AxOgzS19ekMmx6zLzA==\",\n       \"dev\": true,\n       \"requires\": {\n         \"@types/ioredis\": \"*\"\n@@ -9143,7 +9143,8 @@\n     \"@types/he\": {\n       \"version\": \"1.1.1\",\n       \"resolved\": \"https://registry.npmjs.org/@types/he/-/he-1.1.1.tgz\",\n-      \"integrity\": \"sha512-jpzrsR1ns0n3kyWt92QfOUQhIuJGQ9+QGa7M62rO6toe98woQjnsnzjdMtsQXCdvjjmqjS2ZBCC7xKw0cdzU+Q==\"\n+      \"integrity\": \"sha512-jpzrsR1ns0n3kyWt92QfOUQhIuJGQ9+QGa7M62rO6toe98woQjnsnzjdMtsQXCdvjjmqjS2ZBCC7xKw0cdzU+Q==\",\n+      \"dev\": true\n     },\n     \"@types/helmet\": {\n       \"version\": \"0.0.45\",\n@@ -13969,20 +13970,20 @@\n       \"dev\": true\n     },\n     \"bull\": {\n-      \"version\": \"3.13.0\",\n-      \"resolved\": \"https://registry.npmjs.org/bull/-/bull-3.13.0.tgz\",\n-      \"integrity\": \"sha512-nP8ICMNHGYDNt6cgPqBPm90n57xA+/Om2wI2EGEOIJtWutjrYt8JAWiiFYjZKrly9UkKlrfG9qgOCwFFdS5xaw==\",\n+      \"version\": \"3.18.0\",\n+      \"resolved\": \"https://registry.npmjs.org/bull/-/bull-3.18.0.tgz\",\n+      \"integrity\": \"sha512-nE/BKlg1dnJ/AcOy5D1nzthcmpAKqpUVXzQ43mJfnVC8ZM7mi4ZzP3spN7745UuikzmGGsbTe9px2TbEKhR+DQ==\",\n       \"requires\": {\n         \"cron-parser\": \"^2.13.0\",\n         \"debuglog\": \"^1.0.0\",\n         \"get-port\": \"^5.1.1\",\n         \"ioredis\": \"^4.14.1\",\n-        \"lodash\": \"^4.17.15\",\n+        \"lodash\": \"^4.17.19\",\n         \"p-timeout\": \"^3.2.0\",\n         \"promise.prototype.finally\": \"^3.1.2\",\n-        \"semver\": \"^6.3.0\",\n+        \"semver\": \"^7.3.2\",\n         \"util.promisify\": \"^1.0.1\",\n-        \"uuid\": \"^3.4.0\"\n+        \"uuid\": \"^8.3.0\"\n       },\n       \"dependencies\": {\n         \"define-properties\": {\n@@ -13994,21 +13995,21 @@\n           }\n         },\n         \"es-abstract\": {\n-          \"version\": \"1.17.4\",\n-          \"resolved\": \"https://registry.npmjs.org/es-abstract/-/es-abstract-1.17.4.tgz\",\n-          \"integrity\": \"sha512-Ae3um/gb8F0mui/jPL+QiqmglkUsaQf7FwBEHYIFkztkneosu9imhqHpBzQ3h1vit8t5iQ74t6PEVvphBZiuiQ==\",\n+          \"version\": \"1.17.6\",\n+          \"resolved\": \"https://registry.npmjs.org/es-abstract/-/es-abstract-1.17.6.tgz\",\n+          \"integrity\": \"sha512-Fr89bON3WFyUi5EvAeI48QTWX0AyekGgLA8H+c+7fbfCkJwRWRMLd8CQedNEyJuoYYhmtEqY92pgte1FAhBlhw==\",\n           \"requires\": {\n             \"es-to-primitive\": \"^1.2.1\",\n             \"function-bind\": \"^1.1.1\",\n             \"has\": \"^1.0.3\",\n             \"has-symbols\": \"^1.0.1\",\n-            \"is-callable\": \"^1.1.5\",\n-            \"is-regex\": \"^1.0.5\",\n+            \"is-callable\": \"^1.2.0\",\n+            \"is-regex\": \"^1.1.0\",\n             \"object-inspect\": \"^1.7.0\",\n             \"object-keys\": \"^1.1.1\",\n             \"object.assign\": \"^4.1.0\",\n-            \"string.prototype.trimleft\": \"^2.1.1\",\n-            \"string.prototype.trimright\": \"^2.1.1\"\n+            \"string.prototype.trimend\": \"^1.0.1\",\n+            \"string.prototype.trimstart\": \"^1.0.1\"\n           },\n           \"dependencies\": {\n             \"object-keys\": {\n@@ -14034,16 +14035,16 @@\n           \"integrity\": \"sha512-PLcsoqu++dmEIZB+6totNFKq/7Do+Z0u4oT0zKOJNl3lYK6vGwwu2hjHs+68OEZbTjiUE9bgOABXbP/GvrS0Kg==\"\n         },\n         \"is-callable\": {\n-          \"version\": \"1.1.5\",\n-          \"resolved\": \"https://registry.npmjs.org/is-callable/-/is-callable-1.1.5.tgz\",\n-          \"integrity\": \"sha512-ESKv5sMCJB2jnHTWZ3O5itG+O128Hsus4K4Qh1h2/cgn2vbgnLSVqfV46AeJA9D5EeeLa9w81KUXMtn34zhX+Q==\"\n+          \"version\": \"1.2.1\",\n+          \"resolved\": \"https://registry.npmjs.org/is-callable/-/is-callable-1.2.1.tgz\",\n+          \"integrity\": \"sha512-wliAfSzx6V+6WfMOmus1xy0XvSgf/dlStkvTfq7F0g4bOIW0PSUbnyse3NhDwdyYS1ozfUtAAySqTws3z9Eqgg==\"\n         },\n         \"is-regex\": {\n-          \"version\": \"1.0.5\",\n-          \"resolved\": \"https://registry.npmjs.org/is-regex/-/is-regex-1.0.5.tgz\",\n-          \"integrity\": \"sha512-vlKW17SNq44owv5AQR3Cq0bQPEb8+kF3UKZ2fiZNOWtztYE5i0CzCZxFDwO58qAOWtxdBRVO/V5Qin1wjCqFYQ==\",\n+          \"version\": \"1.1.1\",\n+          \"resolved\": \"https://registry.npmjs.org/is-regex/-/is-regex-1.1.1.tgz\",\n+          \"integrity\": \"sha512-1+QkEcxiLlB7VEyFtyBg94e08OAsvq7FUBgApTq/w2ymCLyKJgDPsybBENVtA7XCQEgEXxKPonG+mvYRxh/LIg==\",\n           \"requires\": {\n-            \"has\": \"^1.0.3\"\n+            \"has-symbols\": \"^1.0.1\"\n           }\n         },\n         \"is-symbol\": {\n@@ -14064,9 +14065,9 @@\n           }\n         },\n         \"semver\": {\n-          \"version\": \"6.3.0\",\n-          \"resolved\": \"https://registry.npmjs.org/semver/-/semver-6.3.0.tgz\",\n-          \"integrity\": \"sha512-b39TBaTSfV6yBrapU89p5fKekE2m/NwnDocOVruQFS1/veMgdzuPcnOM34M6CwxW8jH/lxEa5rBoDeUwu5HHTw==\"\n+          \"version\": \"7.3.2\",\n+          \"resolved\": \"https://registry.npmjs.org/semver/-/semver-7.3.2.tgz\",\n+          \"integrity\": \"sha512-OrOb32TeeambH6UrhtShmF7CRDqhL6/5XpPNp2DuRH6+9QLw/orhp72j87v8Qa1ScDkvrrBNpZcDejAirJmfXQ==\"\n         },\n         \"util.promisify\": {\n           \"version\": \"1.0.1\",\n@@ -14080,9 +14081,9 @@\n           }\n         },\n         \"uuid\": {\n-          \"version\": \"3.4.0\",\n-          \"resolved\": \"https://registry.npmjs.org/uuid/-/uuid-3.4.0.tgz\",\n-          \"integrity\": \"sha512-HjSDRw6gZE5JMggctHBcjVak08+KEVhSIiDzFnT9S9aegmp85S/bReBVTb4QTFaRNptJ9kuYaNhnbNEOkbKb/A==\"\n+          \"version\": \"8.3.0\",\n+          \"resolved\": \"https://registry.npmjs.org/uuid/-/uuid-8.3.0.tgz\",\n+          \"integrity\": \"sha512-fX6Z5o4m6XsXBdli9g7DtWgAx+osMsRRZFKma1mIUsLCz6vRvv+pz5VNbyu9UEDzpMWulZfvpgb/cmDXVulYFQ==\"\n         }\n       }\n     },\n@@ -15953,12 +15954,22 @@\n       }\n     },\n     \"cron-parser\": {\n-      \"version\": \"2.13.0\",\n-      \"resolved\": \"https://registry.npmjs.org/cron-parser/-/cron-parser-2.13.0.tgz\",\n-      \"integrity\": \"sha512-UWeIpnRb0eyoWPVk+pD3TDpNx3KCFQeezO224oJIkktBrcW6RoAPOx5zIKprZGfk6vcYSmA8yQXItejSaDBhbQ==\",\n+      \"version\": \"2.16.3\",\n+      \"resolved\": \"https://registry.npmjs.org/cron-parser/-/cron-parser-2.16.3.tgz\",\n+      \"integrity\": \"sha512-XNJBD1QLFeAMUkZtZQuncAAOgJFWNhBdIbwgD22hZxrcWOImBFMKgPC66GzaXpyoJs7UvYLLgPH/8BRk/7gbZg==\",\n       \"requires\": {\n-        \"is-nan\": \"^1.2.1\",\n-        \"moment-timezone\": \"^0.5.25\"\n+        \"is-nan\": \"^1.3.0\",\n+        \"moment-timezone\": \"^0.5.31\"\n+      },\n+      \"dependencies\": {\n+        \"moment-timezone\": {\n+          \"version\": \"0.5.31\",\n+          \"resolved\": \"https://registry.npmjs.org/moment-timezone/-/moment-timezone-0.5.31.tgz\",\n+          \"integrity\": \"sha512-+GgHNg8xRhMXfEbv81iDtrVeTcWt0kWmTEY1XQK14dICTXnWJnT0dxdlPspwqF3keKMVPXwayEsk1DI0AA/jdA==\",\n+          \"requires\": {\n+            \"moment\": \">= 2.9.0\"\n+          }\n+        }\n       }\n     },\n     \"cross-fetch\": {\n@@ -45617,21 +45628,21 @@\n           }\n         },\n         \"es-abstract\": {\n-          \"version\": \"1.17.4\",\n-          \"resolved\": \"https://registry.npmjs.org/es-abstract/-/es-abstract-1.17.4.tgz\",\n-          \"integrity\": \"sha512-Ae3um/gb8F0mui/jPL+QiqmglkUsaQf7FwBEHYIFkztkneosu9imhqHpBzQ3h1vit8t5iQ74t6PEVvphBZiuiQ==\",\n+          \"version\": \"1.17.6\",\n+          \"resolved\": \"https://registry.npmjs.org/es-abstract/-/es-abstract-1.17.6.tgz\",\n+          \"integrity\": \"sha512-Fr89bON3WFyUi5EvAeI48QTWX0AyekGgLA8H+c+7fbfCkJwRWRMLd8CQedNEyJuoYYhmtEqY92pgte1FAhBlhw==\",\n           \"requires\": {\n             \"es-to-primitive\": \"^1.2.1\",\n             \"function-bind\": \"^1.1.1\",\n             \"has\": \"^1.0.3\",\n             \"has-symbols\": \"^1.0.1\",\n-            \"is-callable\": \"^1.1.5\",\n-            \"is-regex\": \"^1.0.5\",\n+            \"is-callable\": \"^1.2.0\",\n+            \"is-regex\": \"^1.1.0\",\n             \"object-inspect\": \"^1.7.0\",\n             \"object-keys\": \"^1.1.1\",\n             \"object.assign\": \"^4.1.0\",\n-            \"string.prototype.trimleft\": \"^2.1.1\",\n-            \"string.prototype.trimright\": \"^2.1.1\"\n+            \"string.prototype.trimend\": \"^1.0.1\",\n+            \"string.prototype.trimstart\": \"^1.0.1\"\n           },\n           \"dependencies\": {\n             \"object-keys\": {\n@@ -45657,16 +45668,16 @@\n           \"integrity\": \"sha512-PLcsoqu++dmEIZB+6totNFKq/7Do+Z0u4oT0zKOJNl3lYK6vGwwu2hjHs+68OEZbTjiUE9bgOABXbP/GvrS0Kg==\"\n         },\n         \"is-callable\": {\n-          \"version\": \"1.1.5\",\n-          \"resolved\": \"https://registry.npmjs.org/is-callable/-/is-callable-1.1.5.tgz\",\n-          \"integrity\": \"sha512-ESKv5sMCJB2jnHTWZ3O5itG+O128Hsus4K4Qh1h2/cgn2vbgnLSVqfV46AeJA9D5EeeLa9w81KUXMtn34zhX+Q==\"\n+          \"version\": \"1.2.1\",\n+          \"resolved\": \"https://registry.npmjs.org/is-callable/-/is-callable-1.2.1.tgz\",\n+          \"integrity\": \"sha512-wliAfSzx6V+6WfMOmus1xy0XvSgf/dlStkvTfq7F0g4bOIW0PSUbnyse3NhDwdyYS1ozfUtAAySqTws3z9Eqgg==\"\n         },\n         \"is-regex\": {\n-          \"version\": \"1.0.5\",\n-          \"resolved\": \"https://registry.npmjs.org/is-regex/-/is-regex-1.0.5.tgz\",\n-          \"integrity\": \"sha512-vlKW17SNq44owv5AQR3Cq0bQPEb8+kF3UKZ2fiZNOWtztYE5i0CzCZxFDwO58qAOWtxdBRVO/V5Qin1wjCqFYQ==\",\n+          \"version\": \"1.1.1\",\n+          \"resolved\": \"https://registry.npmjs.org/is-regex/-/is-regex-1.1.1.tgz\",\n+          \"integrity\": \"sha512-1+QkEcxiLlB7VEyFtyBg94e08OAsvq7FUBgApTq/w2ymCLyKJgDPsybBENVtA7XCQEgEXxKPonG+mvYRxh/LIg==\",\n           \"requires\": {\n-            \"has\": \"^1.0.3\"\n+            \"has-symbols\": \"^1.0.1\"\n           }\n         },\n         \"is-symbol\": {\n@@ -50803,7 +50814,6 @@\n       \"version\": \"1.0.1\",\n       \"resolved\": \"https://registry.npmjs.org/string.prototype.trimend/-/string.prototype.trimend-1.0.1.tgz\",\n       \"integrity\": \"sha512-LRPxFUaTtpqYsTeNKaFOw3R4bxIzWOnbQ837QfBylo8jIxtcbK/A/sMV7Q+OAV/vWo+7s25pOE10KYSjaSO06g==\",\n-      \"dev\": true,\n       \"requires\": {\n         \"define-properties\": \"^1.1.3\",\n         \"es-abstract\": \"^1.17.5\"\n@@ -50813,7 +50823,6 @@\n           \"version\": \"1.1.3\",\n           \"resolved\": \"https://registry.npmjs.org/define-properties/-/define-properties-1.1.3.tgz\",\n           \"integrity\": \"sha512-3MqfYKj2lLzdMSf8ZIZE/V+Zuy+BgD6f164e8K2w7dgnpKArBDerGYpM46IYYcjnkdPNMjPk9A6VFB8+3SKlXQ==\",\n-          \"dev\": true,\n           \"requires\": {\n             \"object-keys\": \"^1.0.12\"\n           }\n@@ -50822,7 +50831,6 @@\n           \"version\": \"1.17.6\",\n           \"resolved\": \"https://registry.npmjs.org/es-abstract/-/es-abstract-1.17.6.tgz\",\n           \"integrity\": \"sha512-Fr89bON3WFyUi5EvAeI48QTWX0AyekGgLA8H+c+7fbfCkJwRWRMLd8CQedNEyJuoYYhmtEqY92pgte1FAhBlhw==\",\n-          \"dev\": true,\n           \"requires\": {\n             \"es-to-primitive\": \"^1.2.1\",\n             \"function-bind\": \"^1.1.1\",\n@@ -50840,16 +50848,14 @@\n             \"object-keys\": {\n               \"version\": \"1.1.1\",\n               \"resolved\": \"https://registry.npmjs.org/object-keys/-/object-keys-1.1.1.tgz\",\n-              \"integrity\": \"sha512-NuAESUOUMrlIXOfHKzD6bpPu3tYt3xvjNdRIQ+FeT0lNb4K8WR70CaDxhuNguS2XG+GjkyMwOzsN5ZktImfhLA==\",\n-              \"dev\": true\n+              \"integrity\": \"sha512-NuAESUOUMrlIXOfHKzD6bpPu3tYt3xvjNdRIQ+FeT0lNb4K8WR70CaDxhuNguS2XG+GjkyMwOzsN5ZktImfhLA==\"\n             }\n           }\n         },\n         \"es-to-primitive\": {\n           \"version\": \"1.2.1\",\n           \"resolved\": \"https://registry.npmjs.org/es-to-primitive/-/es-to-primitive-1.2.1.tgz\",\n           \"integrity\": \"sha512-QCOllgZJtaUo9miYBcLChTUaHNjJF3PYs1VidD7AwiEj1kYxKeQTctLAezAOH5ZKRH0g2IgPn6KwB4IT8iRpvA==\",\n-          \"dev\": true,\n           \"requires\": {\n             \"is-callable\": \"^1.1.4\",\n             \"is-date-object\": \"^1.0.1\",\n@@ -50859,20 +50865,17 @@\n         \"has-symbols\": {\n           \"version\": \"1.0.1\",\n           \"resolved\": \"https://registry.npmjs.org/has-symbols/-/has-symbols-1.0.1.tgz\",\n-          \"integrity\": \"sha512-PLcsoqu++dmEIZB+6totNFKq/7Do+Z0u4oT0zKOJNl3lYK6vGwwu2hjHs+68OEZbTjiUE9bgOABXbP/GvrS0Kg==\",\n-          \"dev\": true\n+          \"integrity\": \"sha512-PLcsoqu++dmEIZB+6totNFKq/7Do+Z0u4oT0zKOJNl3lYK6vGwwu2hjHs+68OEZbTjiUE9bgOABXbP/GvrS0Kg==\"\n         },\n         \"is-callable\": {\n           \"version\": \"1.2.0\",\n           \"resolved\": \"https://registry.npmjs.org/is-callable/-/is-callable-1.2.0.tgz\",\n-          \"integrity\": \"sha512-pyVD9AaGLxtg6srb2Ng6ynWJqkHU9bEM087AKck0w8QwDarTfNcpIYoU8x8Hv2Icm8u6kFJM18Dag8lyqGkviw==\",\n-          \"dev\": true\n+          \"integrity\": \"sha512-pyVD9AaGLxtg6srb2Ng6ynWJqkHU9bEM087AKck0w8QwDarTfNcpIYoU8x8Hv2Icm8u6kFJM18Dag8lyqGkviw==\"\n         },\n         \"is-regex\": {\n           \"version\": \"1.1.0\",\n           \"resolved\": \"https://registry.npmjs.org/is-regex/-/is-regex-1.1.0.tgz\",\n           \"integrity\": \"sha512-iI97M8KTWID2la5uYXlkbSDQIg4F6o1sYboZKKTDpnDQMLtUL86zxhgDet3Q2SriaYsyGqZ6Mn2SjbRKeLHdqw==\",\n-          \"dev\": true,\n           \"requires\": {\n             \"has-symbols\": \"^1.0.1\"\n           }\n@@ -50881,7 +50884,6 @@\n           \"version\": \"1.0.3\",\n           \"resolved\": \"https://registry.npmjs.org/is-symbol/-/is-symbol-1.0.3.tgz\",\n           \"integrity\": \"sha512-OwijhaRSgqvhm/0ZdAcXNZt9lYdKFpcRDT5ULUuYXPoT794UNOdU+gpT6Rzo7b4V2HUl/op6GqY894AZwv9faQ==\",\n-          \"dev\": true,\n           \"requires\": {\n             \"has-symbols\": \"^1.0.1\"\n           }\n@@ -50892,6 +50894,7 @@\n       \"version\": \"2.1.1\",\n       \"resolved\": \"https://registry.npmjs.org/string.prototype.trimleft/-/string.prototype.trimleft-2.1.1.tgz\",\n       \"integrity\": \"sha512-iu2AGd3PuP5Rp7x2kEZCrB2Nf41ehzh+goo8TV7z8/XDBbsvc6HQIlUl9RjkZ4oyrW1XM5UwlGl1oVEaDjg6Ag==\",\n+      \"dev\": true,\n       \"requires\": {\n         \"define-properties\": \"^1.1.3\",\n         \"function-bind\": \"^1.1.1\"\n@@ -50901,6 +50904,7 @@\n           \"version\": \"1.1.3\",\n           \"resolved\": \"https://registry.npmjs.org/define-properties/-/define-properties-1.1.3.tgz\",\n           \"integrity\": \"sha512-3MqfYKj2lLzdMSf8ZIZE/V+Zuy+BgD6f164e8K2w7dgnpKArBDerGYpM46IYYcjnkdPNMjPk9A6VFB8+3SKlXQ==\",\n+          \"dev\": true,\n           \"requires\": {\n             \"object-keys\": \"^1.0.12\"\n           }\n@@ -50911,6 +50915,7 @@\n       \"version\": \"2.1.1\",\n       \"resolved\": \"https://registry.npmjs.org/string.prototype.trimright/-/string.prototype.trimright-2.1.1.tgz\",\n       \"integrity\": \"sha512-qFvWL3/+QIgZXVmJBfpHmxLB7xsUXz6HsUmP8+5dRaC3Q7oKUv9Vo6aMCRZC1smrtyECFsIT30PqBJ1gTjAs+g==\",\n+      \"dev\": true,\n       \"requires\": {\n         \"define-properties\": \"^1.1.3\",\n         \"function-bind\": \"^1.1.1\"\n@@ -50920,6 +50925,7 @@\n           \"version\": \"1.1.3\",\n           \"resolved\": \"https://registry.npmjs.org/define-properties/-/define-properties-1.1.3.tgz\",\n           \"integrity\": \"sha512-3MqfYKj2lLzdMSf8ZIZE/V+Zuy+BgD6f164e8K2w7dgnpKArBDerGYpM46IYYcjnkdPNMjPk9A6VFB8+3SKlXQ==\",\n+          \"dev\": true,\n           \"requires\": {\n             \"object-keys\": \"^1.0.12\"\n           }\n@@ -50930,7 +50936,6 @@\n       \"version\": \"1.0.1\",\n       \"resolved\": \"https://registry.npmjs.org/string.prototype.trimstart/-/string.prototype.trimstart-1.0.1.tgz\",\n       \"integrity\": \"sha512-XxZn+QpvrBI1FOcg6dIpxUPgWCPuNXvMD72aaRaUQv1eD4e/Qy8i/hFTe0BUmD60p/QA6bh1avmuPTfNjqVWRw==\",\n-      \"dev\": true,\n       \"requires\": {\n         \"define-properties\": \"^1.1.3\",\n         \"es-abstract\": \"^1.17.5\"\n@@ -50940,7 +50945,6 @@\n           \"version\": \"1.1.3\",\n           \"resolved\": \"https://registry.npmjs.org/define-properties/-/define-properties-1.1.3.tgz\",\n           \"integrity\": \"sha512-3MqfYKj2lLzdMSf8ZIZE/V+Zuy+BgD6f164e8K2w7dgnpKArBDerGYpM46IYYcjnkdPNMjPk9A6VFB8+3SKlXQ==\",\n-          \"dev\": true,\n           \"requires\": {\n             \"object-keys\": \"^1.0.12\"\n           }\n@@ -50949,7 +50953,6 @@\n           \"version\": \"1.17.6\",\n           \"resolved\": \"https://registry.npmjs.org/es-abstract/-/es-abstract-1.17.6.tgz\",\n           \"integrity\": \"sha512-Fr89bON3WFyUi5EvAeI48QTWX0AyekGgLA8H+c+7fbfCkJwRWRMLd8CQedNEyJuoYYhmtEqY92pgte1FAhBlhw==\",\n-          \"dev\": true,\n           \"requires\": {\n             \"es-to-primitive\": \"^1.2.1\",\n             \"function-bind\": \"^1.1.1\",\n@@ -50967,16 +50970,14 @@\n             \"object-keys\": {\n               \"version\": \"1.1.1\",\n               \"resolved\": \"https://registry.npmjs.org/object-keys/-/object-keys-1.1.1.tgz\",\n-              \"integrity\": \"sha512-NuAESUOUMrlIXOfHKzD6bpPu3tYt3xvjNdRIQ+FeT0lNb4K8WR70CaDxhuNguS2XG+GjkyMwOzsN5ZktImfhLA==\",\n-              \"dev\": true\n+              \"integrity\": \"sha512-NuAESUOUMrlIXOfHKzD6bpPu3tYt3xvjNdRIQ+FeT0lNb4K8WR70CaDxhuNguS2XG+GjkyMwOzsN5ZktImfhLA==\"\n             }\n           }\n         },\n         \"es-to-primitive\": {\n           \"version\": \"1.2.1\",\n           \"resolved\": \"https://registry.npmjs.org/es-to-primitive/-/es-to-primitive-1.2.1.tgz\",\n           \"integrity\": \"sha512-QCOllgZJtaUo9miYBcLChTUaHNjJF3PYs1VidD7AwiEj1kYxKeQTctLAezAOH5ZKRH0g2IgPn6KwB4IT8iRpvA==\",\n-          \"dev\": true,\n           \"requires\": {\n             \"is-callable\": \"^1.1.4\",\n             \"is-date-object\": \"^1.0.1\",\n@@ -50986,20 +50987,17 @@\n         \"has-symbols\": {\n           \"version\": \"1.0.1\",\n           \"resolved\": \"https://registry.npmjs.org/has-symbols/-/has-symbols-1.0.1.tgz\",\n-          \"integrity\": \"sha512-PLcsoqu++dmEIZB+6totNFKq/7Do+Z0u4oT0zKOJNl3lYK6vGwwu2hjHs+68OEZbTjiUE9bgOABXbP/GvrS0Kg==\",\n-          \"dev\": true\n+          \"integrity\": \"sha512-PLcsoqu++dmEIZB+6totNFKq/7Do+Z0u4oT0zKOJNl3lYK6vGwwu2hjHs+68OEZbTjiUE9bgOABXbP/GvrS0Kg==\"\n         },\n         \"is-callable\": {\n           \"version\": \"1.2.0\",\n           \"resolved\": \"https://registry.npmjs.org/is-callable/-/is-callable-1.2.0.tgz\",\n-          \"integrity\": \"sha512-pyVD9AaGLxtg6srb2Ng6ynWJqkHU9bEM087AKck0w8QwDarTfNcpIYoU8x8Hv2Icm8u6kFJM18Dag8lyqGkviw==\",\n-          \"dev\": true\n+          \"integrity\": \"sha512-pyVD9AaGLxtg6srb2Ng6ynWJqkHU9bEM087AKck0w8QwDarTfNcpIYoU8x8Hv2Icm8u6kFJM18Dag8lyqGkviw==\"\n         },\n         \"is-regex\": {\n           \"version\": \"1.1.0\",\n           \"resolved\": \"https://registry.npmjs.org/is-regex/-/is-regex-1.1.0.tgz\",\n           \"integrity\": \"sha512-iI97M8KTWID2la5uYXlkbSDQIg4F6o1sYboZKKTDpnDQMLtUL86zxhgDet3Q2SriaYsyGqZ6Mn2SjbRKeLHdqw==\",\n-          \"dev\": true,\n           \"requires\": {\n             \"has-symbols\": \"^1.0.1\"\n           }\n@@ -51008,7 +51006,6 @@\n           \"version\": \"1.0.3\",\n           \"resolved\": \"https://registry.npmjs.org/is-symbol/-/is-symbol-1.0.3.tgz\",\n           \"integrity\": \"sha512-OwijhaRSgqvhm/0ZdAcXNZt9lYdKFpcRDT5ULUuYXPoT794UNOdU+gpT6Rzo7b4V2HUl/op6GqY894AZwv9faQ==\",\n-          \"dev\": true,\n           \"requires\": {\n             \"has-symbols\": \"^1.0.1\"\n           }"
    },
    {
      "sha": "0bdb50d4515e7c3a9e9cc571fa65e874b421f9c5",
      "filename": "package.json",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "blob_url": "https://github.com/coralproject/talk/blob/df1afab38e2cb8ab0edae75afefd999d9ae862ce/package.json",
      "raw_url": "https://github.com/coralproject/talk/raw/df1afab38e2cb8ab0edae75afefd999d9ae862ce/package.json",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/package.json?ref=df1afab38e2cb8ab0edae75afefd999d9ae862ce",
      "patch": "@@ -67,7 +67,6 @@\n     \"@metascraper/helpers\": \"^5.11.6\",\n     \"@rudderstack/rudder-sdk-node\": \"0.0.2\",\n     \"@sentry/node\": \"^5.21.1\",\n-    \"@types/he\": \"^1.1.1\",\n     \"abort-controller\": \"^3.0.0\",\n     \"akismet-api\": \"^5.0.0\",\n     \"apollo-server-express\": \"^2.16.1\",\n@@ -76,7 +75,7 @@\n     \"axios\": \"^0.19.2\",\n     \"basic-auth\": \"^2.0.1\",\n     \"bcryptjs\": \"^2.4.3\",\n-    \"bull\": \"^3.13.0\",\n+    \"bull\": \"^3.18.0\",\n     \"bunyan\": \"^1.8.12\",\n     \"bytes\": \"^3.1.0\",\n     \"cheerio\": \"^1.0.0-rc.3\",\n@@ -125,6 +124,7 @@\n     \"node-fetch\": \"^2.6.1\",\n     \"nunjucks\": \"^3.2.1\",\n     \"on-finished\": \"^2.3.0\",\n+    \"p-timeout\": \"^3.2.0\",\n     \"passport\": \"^0.4.1\",\n     \"passport-facebook\": \"^3.0.0\",\n     \"passport-google-oauth2\": \"^0.2.0\",\n@@ -158,7 +158,7 @@\n     \"@types/archiver\": \"^3.1.0\",\n     \"@types/basic-auth\": \"^1.1.3\",\n     \"@types/bcryptjs\": \"^2.4.2\",\n-    \"@types/bull\": \"^3.12.1\",\n+    \"@types/bull\": \"^3.14.2\",\n     \"@types/bunyan\": \"^1.8.6\",\n     \"@types/bytes\": \"^3.1.0\",\n     \"@types/case-sensitive-paths-webpack-plugin\": \"^2.1.4\",\n@@ -181,6 +181,7 @@\n     \"@types/flat\": \"^5.0.0\",\n     \"@types/fs-extra\": \"^8.1.0\",\n     \"@types/hapi__joi\": \"^16.0.12\",\n+    \"@types/he\": \"^1.1.1\",\n     \"@types/helmet\": \"^0.0.45\",\n     \"@types/html-to-text\": \"^1.4.31\",\n     \"@types/html-webpack-plugin\": \"^3.2.3\","
    },
    {
      "sha": "fe9c45376c59ad79552d596e5214a95a18e593e7",
      "filename": "src/core/server/queue/Task.ts",
      "status": "modified",
      "additions": 10,
      "deletions": 2,
      "changes": 12,
      "blob_url": "https://github.com/coralproject/talk/blob/df1afab38e2cb8ab0edae75afefd999d9ae862ce/src/core/server/queue/Task.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/df1afab38e2cb8ab0edae75afefd999d9ae862ce/src/core/server/queue/Task.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/server/queue/Task.ts?ref=df1afab38e2cb8ab0edae75afefd999d9ae862ce",
      "patch": "@@ -1,5 +1,6 @@\n import Queue, { Job, JobCounts, Queue as QueueType } from \"bull\";\n import Logger from \"bunyan\";\n+import timeoutPromiseAfter from \"p-timeout\";\n \n import TIME from \"coral-common/time\";\n import { createTimer } from \"coral-server/helpers\";\n@@ -13,6 +14,7 @@ export interface TaskOptions<T, U = void> {\n   jobProcessor: JobProcessor<T, U>;\n   jobOptions?: Queue.JobOptions;\n   queue: Queue.QueueOptions;\n+  timeout?: number;\n }\n \n export default class Task<T extends TenantResource, U = any> {\n@@ -25,6 +27,7 @@ export default class Task<T extends TenantResource, U = any> {\n     jobProcessor,\n     jobOptions = {},\n     queue,\n+    timeout = 30 * TIME.SECOND,\n   }: TaskOptions<T, U>) {\n     this.log = logger.child({ jobName }, true);\n     this.queue = new Queue(jobName, queue);\n@@ -52,6 +55,7 @@ export default class Task<T extends TenantResource, U = any> {\n         ...jobOptions,\n       },\n       queue,\n+      timeout,\n     };\n \n     // TODO: (wyattjoh) attach event handlers to the queue for metrics via: https://github.com/OptimalBits/bull/blob/develop/REFERENCE.md#events\n@@ -90,8 +94,12 @@ export default class Task<T extends TenantResource, U = any> {\n       log.info(\"processing job from queue\");\n \n       try {\n-        // Send the job off to the job processor to be handled.\n-        const promise: U = await this.options.jobProcessor(job);\n+        // Send the job off to the job processor to be handled. If the\n+        // processing of the job takes too long time it out.\n+        const promise: U = await timeoutPromiseAfter(\n+          this.options.jobProcessor(job),\n+          this.options.timeout\n+        );\n \n         // Log it!\n         log.info({ took: timer() }, \"processing completed\");"
    },
    {
      "sha": "549dcaee9e3b4d66050c44cd83f681b258a48b33",
      "filename": "src/core/server/queue/tasks/scraper.ts",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/df1afab38e2cb8ab0edae75afefd999d9ae862ce/src/core/server/queue/tasks/scraper.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/df1afab38e2cb8ab0edae75afefd999d9ae862ce/src/core/server/queue/tasks/scraper.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/server/queue/tasks/scraper.ts?ref=df1afab38e2cb8ab0edae75afefd999d9ae862ce",
      "patch": "@@ -58,5 +58,9 @@ export function createScraperTask(\n     jobName: JOB_NAME,\n     jobProcessor: createJobProcessor(options),\n     queue,\n+    // Timeout the job processor twice the time of the scrape timeout. This will\n+    // give the scraper a chance to time itself out after the scraper fails, but\n+    // will catch it if the scraping takes too long.\n+    timeout: options.config.get(\"scrape_timeout\") * 2,\n   });\n }"
    }
  ]
}
