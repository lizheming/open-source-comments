{
  "sha": "8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
  "node_id": "C_kwDOAKEu-toAKDhjYjdmNzNmZTNkZDUyM2JjZDAzMzJiMTFhMTg3YWY1ZjllYmVlNmI",
  "commit": {
    "author": {
      "name": "Kaj Magnus Lindberg",
      "email": "kajmagnus3@gmail.com",
      "date": "2021-10-11T10:15:15Z"
    },
    "committer": {
      "name": "Kaj Magnus Lindberg",
      "email": "kajmagnus3@gmail.com",
      "date": "2021-10-11T10:15:15Z"
    },
    "message": "Merge v0.2021.29 into 'release'.",
    "tree": {
      "sha": "7e142a318870e6249b801773066f85ba462c1f8a",
      "url": "https://api.github.com/repos/debiki/talkyard/git/trees/7e142a318870e6249b801773066f85ba462c1f8a"
    },
    "url": "https://api.github.com/repos/debiki/talkyard/git/commits/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/debiki/talkyard/commits/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
  "html_url": "https://github.com/debiki/talkyard/commit/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
  "comments_url": "https://api.github.com/repos/debiki/talkyard/commits/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/comments",
  "author": {
    "login": "kajmagnus",
    "id": 7477359,
    "node_id": "MDQ6VXNlcjc0NzczNTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7477359?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kajmagnus",
    "html_url": "https://github.com/kajmagnus",
    "followers_url": "https://api.github.com/users/kajmagnus/followers",
    "following_url": "https://api.github.com/users/kajmagnus/following{/other_user}",
    "gists_url": "https://api.github.com/users/kajmagnus/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kajmagnus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kajmagnus/subscriptions",
    "organizations_url": "https://api.github.com/users/kajmagnus/orgs",
    "repos_url": "https://api.github.com/users/kajmagnus/repos",
    "events_url": "https://api.github.com/users/kajmagnus/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kajmagnus/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "kajmagnus",
    "id": 7477359,
    "node_id": "MDQ6VXNlcjc0NzczNTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7477359?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kajmagnus",
    "html_url": "https://github.com/kajmagnus",
    "followers_url": "https://api.github.com/users/kajmagnus/followers",
    "following_url": "https://api.github.com/users/kajmagnus/following{/other_user}",
    "gists_url": "https://api.github.com/users/kajmagnus/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kajmagnus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kajmagnus/subscriptions",
    "organizations_url": "https://api.github.com/users/kajmagnus/orgs",
    "repos_url": "https://api.github.com/users/kajmagnus/repos",
    "events_url": "https://api.github.com/users/kajmagnus/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kajmagnus/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "af66b690544d0c172d365b0129cca7779d4907ef",
      "url": "https://api.github.com/repos/debiki/talkyard/commits/af66b690544d0c172d365b0129cca7779d4907ef",
      "html_url": "https://github.com/debiki/talkyard/commit/af66b690544d0c172d365b0129cca7779d4907ef"
    },
    {
      "sha": "5ee803d5a3b9ebd47cba37124f1b519814469691",
      "url": "https://api.github.com/repos/debiki/talkyard/commits/5ee803d5a3b9ebd47cba37124f1b519814469691",
      "html_url": "https://github.com/debiki/talkyard/commit/5ee803d5a3b9ebd47cba37124f1b519814469691"
    }
  ],
  "stats": {
    "total": 61,
    "additions": 36,
    "deletions": 25
  },
  "files": [
    {
      "sha": "844346490fef1cae3550fb3ab897b86bc13bcda5",
      "filename": "appsv/server/debiki/Globals.scala",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/debiki/talkyard/blob/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/appsv/server/debiki/Globals.scala",
      "raw_url": "https://github.com/debiki/talkyard/raw/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/appsv/server/debiki/Globals.scala",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/appsv/server/debiki/Globals.scala?ref=8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
      "patch": "@@ -801,11 +801,12 @@ class Globals(  // RENAME to TyApp? or AppContext? TyAppContext? variable name =\n             die(\"DwE20SE4\")\n         }\n       case None =>\n+        /* Not really needed. Better to use a real domain name.\n         if (Site.Ipv4AnyPortRegex.matches(hostname)) {\n           // Make it possible to access the server before any domain has been pointed\n           // to it, just after installation, by lazy-creating an empty default site.\n           return defaultSiteIdAndHostname\n-        }\n+        } */\n         throwSiteNotFound(\n           hostname, debugCode = \"LKPCANHOST\")\n     }"
    },
    {
      "sha": "b34dcdf74db1b67955269acd97c2deccd185e828",
      "filename": "appsv/server/talkyard/server/api/GetController.scala",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/debiki/talkyard/blob/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/appsv/server/talkyard/server/api/GetController.scala",
      "raw_url": "https://github.com/debiki/talkyard/raw/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/appsv/server/talkyard/server/api/GetController.scala",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/appsv/server/talkyard/server/api/GetController.scala?ref=8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
      "patch": "@@ -64,8 +64,8 @@ class GetController @Inject()(cc: ControllerComponents, edContext: EdContext)\n \n     val authzCtx = dao.getForumAuthzContext(requester)\n \n-    throwUnimplementedIf(pageRefs.size >= 30,\n-          \"TyE603MRT4\", \"Currently at most 30 at a time\")\n+    throwUnimplementedIf(pageRefs.size > 50,\n+          \"TyE603MRT4\", \"Currently at most 50 at a time\")\n \n     def notFoundMsg(embUrl: St, pageId: PageId = NoPageId): St = {\n       s\"No page with that embedding url or discussion id: $embUrl\""
    },
    {
      "sha": "a3d0d343f67077bec7a4fd99794db5ef20650fbf",
      "filename": "client/app-slim/model.ts",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/debiki/talkyard/blob/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/client/app-slim/model.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/client/app-slim/model.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/client/app-slim/model.ts?ref=8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
      "patch": "@@ -2113,18 +2113,18 @@ interface SuperAdminStuff {\n \n \n interface SASite {\n-  id: number;\n+  id: SiteId;\n   status: SiteStatus;\n-  name: string;\n-  hostnames: string[];\n-  canonicalHostname: string;\n+  name: St;\n+  hostnames: St[];\n+  canonicalHostname: St;\n   createdAtMs: Nr;\n   deletedAtMs?: Nr;\n   autoPurgeAtMs?: Nr;\n   purgedAtMs?: Nr;\n-  staffUsers: UserInclDetails[];\n+  staffUsers: PatVb[];\n   stats: SiteStats;\n-  superStaffNotes?: string;\n+  superStaffNotes?: St;\n   // CLEAN_UP use also for display not only when saving. Remove from SiteStats [.6093456]\n   rdbQuotaMiBs?: Nr;\n   fileQuotaMiBs?: Nr;"
    },
    {
      "sha": "b8daf656ca5dd2285d43950b8b5cbb5516d1fa98",
      "filename": "client/app-slim/oop-methods.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/debiki/talkyard/blob/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/client/app-slim/oop-methods.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/client/app-slim/oop-methods.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/client/app-slim/oop-methods.ts?ref=8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
      "patch": "@@ -1477,9 +1477,9 @@ export function tags_mkSortFn(tagTypesById: TagTypesById): (a: Tag, b: Tag) => N\n     if (numTagTypeMissingWarnings < 3 && (!tagTypeA || !tagTypeB)) {\n       numTagTypeMissingWarnings += 1;\n       const warningNr = `\\n\\n(Warning nr ${numTagTypeMissingWarnings} of max 3)`;\n-      !tagTypeA && debiki2.pagedialogs.showClientSideError(\n+      !tagTypeA && showClientError(\n             `Tag type missing, id: ${tagA.tagTypeId} [TyE5MW208M2]` + warningNr);\n-      !tagTypeB && debiki2.pagedialogs.showClientSideError(\n+      !tagTypeB && showClientError(\n             `Tag type missing, id: ${tagB.tagTypeId} [TyE5MW208M3]` + warningNr);\n     }\n     // @endif"
    },
    {
      "sha": "e20f59c12b5992396691ff0087349e93784ad74d",
      "filename": "client/app-slim/page-dialogs/server-error-dialog.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/debiki/talkyard/blob/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/client/app-slim/page-dialogs/server-error-dialog.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/client/app-slim/page-dialogs/server-error-dialog.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/client/app-slim/page-dialogs/server-error-dialog.ts?ref=8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
      "patch": "@@ -36,12 +36,12 @@ export function getServerErrorDialog() {\n \n \n export function showAndThrowClientSideError(errMsg: St) {\n-  showClientSideError(errMsg);\n+  showClientError(errMsg);\n   throw new Error(errMsg);\n }\n \n \n-export function showClientSideError(errMsg: St) {\n+export function showClientError(errMsg: St) {\n   // Don't call immediately, in case we're in a React render() pass — then we're not allowed\n   // to render even more stuff, which getServerErrorDialog() might do.\n   setTimeout(function() {"
    },
    {
      "sha": "27426a8dbf81f03596b97b7e1ddb65987ce364d1",
      "filename": "client/app-slim/prelude.ts",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/debiki/talkyard/blob/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/client/app-slim/prelude.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/client/app-slim/prelude.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/client/app-slim/prelude.ts?ref=8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
      "patch": "@@ -203,6 +203,13 @@ export function dieIf(condition, errorMessage: string) {\n }\n \n \n+export function showClientError(errMsg: St) {\n+  if (isServerSide()) return;\n+  // Not incl in server bundle, so access via lookup, to avoid harmless transpiler warnings.\n+  debiki2.pagedialogs['showClientError'](errMsg);\n+}\n+\n+\n export function logError(errorMessage: string) {\n   console.error(Error(errorMessage));\n   // Why setTimeout()? I don't remember, see above in die(errorMessage)."
    },
    {
      "sha": "5daef9fb7adaef9044e20edf3bc6dc139b0bcdf8",
      "filename": "client/app-slim/slim-bundle.d.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/debiki/talkyard/blob/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/client/app-slim/slim-bundle.d.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/client/app-slim/slim-bundle.d.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/client/app-slim/slim-bundle.d.ts?ref=8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
      "patch": "@@ -490,7 +490,8 @@ declare namespace debiki2 {\n   }\n   namespace pagedialogs {\n     function getServerErrorDialog(): any;\n-    function showAndThrowClientSideError(errorMessage: string);\n+    function showClientError(errorMessage: St);\n+    function showAndThrowClientSideError(errorMessage: St);\n     var openSharePopup;\n     const Facebook;\n     const Twitter;"
    },
    {
      "sha": "07726e3740d1032fee1c6f7534df25f02f3cdad2",
      "filename": "client/app-staff/superadmin/superadmin-app.staff.ts",
      "status": "modified",
      "additions": 7,
      "deletions": 5,
      "changes": 12,
      "blob_url": "https://github.com/debiki/talkyard/blob/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/client/app-staff/superadmin/superadmin-app.staff.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/client/app-staff/superadmin/superadmin-app.staff.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/client/app-staff/superadmin/superadmin-app.staff.ts?ref=8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
      "patch": "@@ -82,13 +82,15 @@ const DashboardPanel = createFactory({\n     if (!stuff)\n       return r.p({}, \"Loading ...\");\n \n-    let filteredSites = [];\n+    let filteredSites: SASite[] = [];\n \n-    const filterText: string = this.state.filter;\n+    const filterText: St = this.state.filter;\n     if (filterText && filterText.length >= 2) {\n       _.each(stuff.sites, (site: SASite) => {\n-        let show = _.some(site.hostnames, h => h.indexOf(filterText) >= 0);\n-        show = show || _.some(site.staffUsers, (m: UserInclDetails) =>\n+        let show =\n+              _.some(site.hostnames, h => h.indexOf(filterText) >= 0) ||\n+              site.featureFlags.toLowerCase().indexOf(filterText) >= 0;\n+        show = show || _.some(site.staffUsers, (m: PatVb) =>\n             m.email?.toLowerCase().indexOf(filterText) >= 0 ||\n             m.username?.toLowerCase().indexOf(filterText) >= 0 ||\n             m.fullName?.toLowerCase().indexOf(filterText) >= 0);\n@@ -118,7 +120,7 @@ const DashboardPanel = createFactory({\n \n     const filter =\n         r.div({ className: 's_SA_Filter' },\n-          r.div({}, \"Filter hostnames, staff names, emails: (at least 2 chars)\"),\n+          r.div({}, \"Filter hostnames, staff names, emails, feature flags: (at least 2 chars)\"),\n           r.input({\n             tabIndex: 1,\n             value: this.state.filter,"
    },
    {
      "sha": "80e643e912857e8223eab4273549f1f99495617d",
      "filename": "relchans/tyse-v0-dev",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": null,
      "raw_url": null,
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/relchans/tyse-v0-dev?ref=8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
      "patch": "@@ -1 +1 @@\n-Subproject commit 8906d99e39706933fc1344b8062a1b7682f4ecd7\n+Subproject commit 80e643e912857e8223eab4273549f1f99495617d"
    },
    {
      "sha": "fa949b75b8a6361fa54c321ff991bff6717791e7",
      "filename": "relchans/tyse-v0-regular",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": null,
      "raw_url": null,
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/relchans/tyse-v0-regular?ref=8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
      "patch": "@@ -1 +1 @@\n-Subproject commit 2ce9d4d13036002a94e3f61ed10f05ebafeebe45\n+Subproject commit fa949b75b8a6361fa54c321ff991bff6717791e7"
    },
    {
      "sha": "34f052d27761f41832b086f929d3a646badac205",
      "filename": "tests/e2e-wdio7/specs/badges-basic.2br.e2e.ts",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/debiki/talkyard/blob/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/tests/e2e-wdio7/specs/badges-basic.2br.e2e.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/tests/e2e-wdio7/specs/badges-basic.2br.e2e.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/tests/e2e-wdio7/specs/badges-basic.2br.e2e.ts?ref=8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
      "patch": "@@ -158,9 +158,9 @@ describe(`badges-basic.2br  TyTE2EBADGESBSC`, () => {\n   it(`Owen removes Maria's 2nd badge`, async () => {\n     await owen_brA.userProfilePage.preferences.goHere(maria.username);\n     await owen_brA.userProfilePage.aboutPanel.openBadgesDialog();\n-    // This should remove badgeTwoSpace, which is the 2nd one added,\n-    // should be in the middle (regardless of sort order).\n-    await owen_brA.tagsDialog.removeNthTag(2, { numAfterwards: 2 });\n+    // This should remove badgeTwoSpace, which is the last one, index 3 (1 based)\n+    // — badges sorted by name [sort_tags]: ['badgeOne..', '..Three...', '...Two..'].\n+    await owen_brA.tagsDialog.removeNthTag(3, { numAfterwards: 2 });\n     await owen_brA.tagsDialog.saveAndClose();\n   });\n "
    },
    {
      "sha": "a1dc22aa7313b9fba8d5a67dc5222022ca962f8e",
      "filename": "version.txt",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/debiki/talkyard/blob/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/version.txt",
      "raw_url": "https://github.com/debiki/talkyard/raw/8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b/version.txt",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/version.txt?ref=8cb7f73fe3dd523bcd0332b11a187af5f9ebee6b",
      "patch": "@@ -1 +1 @@\n-v0.2021.28\n+v0.2021.29"
    }
  ]
}
