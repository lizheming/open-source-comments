{
  "sha": "789a15a897c4809412970b59b5a0c9fb5d55a75a",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODo3ODlhMTVhODk3YzQ4MDk0MTI5NzBiNTliNWEwYzlmYjVkNTVhNzVh",
  "commit": {
    "author": {
      "name": "Joffrey JAFFEUX",
      "email": "j.jaffeux@gmail.com",
      "date": "2020-07-06T07:28:57Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2020-07-06T07:28:57Z"
    },
    "message": "DEV: allows autocomplete to be debounced (#10166)\n\nUsage:\r\n\r\n```\r\n$(\".foo\").autocomplete({debounced: true});\r\n```",
    "tree": {
      "sha": "1cecddcec4f6643698a3fafb61ca6e27131c5a62",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/1cecddcec4f6643698a3fafb61ca6e27131c5a62"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/789a15a897c4809412970b59b5a0c9fb5d55a75a",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfAtK5CRBK7hj4Ov3rIwAAdHIIAAoI+ykMWIDVc/7oMPjLfYQi\nYnbELtgGmFWrY3vxUoNvashNxHgrlNB+52/VUDEQSoRXCdkLMUNe1JHvYo9ijnNw\nL4uG8VdGhBn3LpKXGwtcWWhqtlPPUpi/1a6VCWgVFFQINp6+bdALEZ46w/tJhOkx\n+TEd8b9jYvbXDtFCQilZhu4hw77pidyTQbL4UqF36xPUoo9NIS0oc3bZTSNobrEX\nkSWMrwiPHdo9lZbon1q/0R+iKzXQiWIAYPrMg4aatmexKk7gAP2uKHujkyMnETqD\niwFTaKUDcWcw7RgyVFb3YL07TNmGYmJq2SM+BCGiFhe4TjmXm87/1JGkDRlycWM=\n=EeDJ\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 1cecddcec4f6643698a3fafb61ca6e27131c5a62\nparent b2a2e4f1e5d03d8f1e7d9bfd4841543f0aee65ea\nauthor Joffrey JAFFEUX <j.jaffeux@gmail.com> 1594020537 +0200\ncommitter GitHub <noreply@github.com> 1594020537 +0200\n\nDEV: allows autocomplete to be debounced (#10166)\n\nUsage:\r\n\r\n```\r\n$(\".foo\").autocomplete({debounced: true});\r\n```"
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/789a15a897c4809412970b59b5a0c9fb5d55a75a",
  "html_url": "https://github.com/discourse/discourse/commit/789a15a897c4809412970b59b5a0c9fb5d55a75a",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/789a15a897c4809412970b59b5a0c9fb5d55a75a/comments",
  "author": {
    "login": "jjaffeux",
    "id": 339945,
    "node_id": "MDQ6VXNlcjMzOTk0NQ==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/339945?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jjaffeux",
    "html_url": "https://github.com/jjaffeux",
    "followers_url": "https://api.github.com/users/jjaffeux/followers",
    "following_url": "https://api.github.com/users/jjaffeux/following{/other_user}",
    "gists_url": "https://api.github.com/users/jjaffeux/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jjaffeux/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jjaffeux/subscriptions",
    "organizations_url": "https://api.github.com/users/jjaffeux/orgs",
    "repos_url": "https://api.github.com/users/jjaffeux/repos",
    "events_url": "https://api.github.com/users/jjaffeux/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jjaffeux/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b2a2e4f1e5d03d8f1e7d9bfd4841543f0aee65ea",
      "url": "https://api.github.com/repos/discourse/discourse/commits/b2a2e4f1e5d03d8f1e7d9bfd4841543f0aee65ea",
      "html_url": "https://github.com/discourse/discourse/commit/b2a2e4f1e5d03d8f1e7d9bfd4841543f0aee65ea"
    }
  ],
  "stats": {
    "total": 14,
    "additions": 12,
    "deletions": 2
  },
  "files": [
    {
      "sha": "e39aadecbc798dfa7d7620be5b675703b4199b68",
      "filename": "app/assets/javascripts/discourse/app/components/group-selector.js",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/789a15a897c4809412970b59b5a0c9fb5d55a75a/app/assets/javascripts/discourse/app/components/group-selector.js",
      "raw_url": "https://github.com/discourse/discourse/raw/789a15a897c4809412970b59b5a0c9fb5d55a75a/app/assets/javascripts/discourse/app/components/group-selector.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/components/group-selector.js?ref=789a15a897c4809412970b59b5a0c9fb5d55a75a",
      "patch": "@@ -25,6 +25,7 @@ export default Component.extend({\n     let groupNames = this.groupNames;\n \n     $(this.element.querySelector(\"input\")).autocomplete({\n+      debounced: true,\n       allowAny: false,\n       items: _.isArray(groupNames)\n         ? groupNames"
    },
    {
      "sha": "1b2a0b6100dbc867fb9d018398c761b82d44f2a1",
      "filename": "app/assets/javascripts/discourse/app/lib/autocomplete.js",
      "status": "modified",
      "additions": 11,
      "deletions": 2,
      "changes": 13,
      "blob_url": "https://github.com/discourse/discourse/blob/789a15a897c4809412970b59b5a0c9fb5d55a75a/app/assets/javascripts/discourse/app/lib/autocomplete.js",
      "raw_url": "https://github.com/discourse/discourse/raw/789a15a897c4809412970b59b5a0c9fb5d55a75a/app/assets/javascripts/discourse/app/lib/autocomplete.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/app/lib/autocomplete.js?ref=789a15a897c4809412970b59b5a0c9fb5d55a75a",
      "patch": "@@ -1,4 +1,5 @@\n-import { cancel, later } from \"@ember/runloop\";\n+import { INPUT_DELAY } from \"discourse-common/config/environment\";\n+import { debounce, cancel, later } from \"@ember/runloop\";\n import { iconHTML } from \"discourse-common/lib/icon-library\";\n import { setCaretPosition, caretPosition } from \"discourse/lib/utilities\";\n import Site from \"discourse/models/site\";\n@@ -413,6 +414,14 @@ export default function(options) {\n   }\n \n   $(this).on(\"keyup.autocomplete\", function(e) {\n+    if (options.debounced) {\n+      debounce(this, performAutocomplete, e, INPUT_DELAY);\n+    } else {\n+      performAutocomplete(e);\n+    }\n+  });\n+\n+  function performAutocomplete(e) {\n     if ([keys.esc, keys.enter].indexOf(e.which) !== -1) return true;\n \n     let cp = caretPosition(me[0]);\n@@ -445,7 +454,7 @@ export default function(options) {\n       let term = me.val().substring(completeStart + (options.key ? 1 : 0), cp);\n       updateAutoComplete(dataSource(term, options));\n     }\n-  });\n+  }\n \n   $(this).on(\"keydown.autocomplete\", function(e) {\n     var c, i, initial, prev, prevIsGood, stopFound, term, total, userToComplete;"
    }
  ]
}
