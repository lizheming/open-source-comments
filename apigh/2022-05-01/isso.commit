{
  "sha": "ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
  "node_id": "C_kwDOAF-mA9oAKGFlMWZlOWY1NjdjMjlkYmRjMjhmOTk3NmU1NzdhMGY1MTQxN2Q1M2Q",
  "commit": {
    "author": {
      "name": "ix5",
      "email": "ix5@users.noreply.github.com",
      "date": "2022-05-01T01:05:27Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2022-05-01T01:05:27Z"
    },
    "message": "Merge pull request #852 from ix5/docs-testing-contrib\n\n docs [MAJOR]: Fill in community, testing, contrib pages, add news entries",
    "tree": {
      "sha": "2fe6a5df0205b1bf26dc73ec0d0e8b2f7994bc45",
      "url": "https://api.github.com/repos/posativ/isso/git/trees/2fe6a5df0205b1bf26dc73ec0d0e8b2f7994bc45"
    },
    "url": "https://api.github.com/repos/posativ/isso/git/commits/ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJibdzXCRBK7hj4Ov3rIwAAsIUIAFIaoMfDime+IXVyPBIcQI0z\n4R0NUbgClg5XgxSUa8IgYeRVceKdxMvBu3Eo68GJgZf+grJ8zvWmxW5V86JtO6Y2\nJSWV0eakYc8NIzPh9qrCyPrw9dvIANrmWqUWOcwapndp4lYyV6lpmJV47kJ4tJNu\nU7GPRAeuhBXhSpCZTWBbPVn3tsPAm31+iBxnKq7EovRfmqS0xEA+agMFI0t+lUW0\ne2CUFG8juGg1eqxc3TPAfhhjjGurfGdvrJueB1tzV+FU0LzQ+Q8Y/NxXoJoeb3jN\nDOpDtR2pSaCqi/4q98P4LBMTtKhWXDcFrRD7UBPrt/5+CAdzRsqT7I32tHLriZ4=\n=iti1\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 2fe6a5df0205b1bf26dc73ec0d0e8b2f7994bc45\nparent f61f180a44cd4335fd5f926c880dfc007e0f5b5a\nparent 498b6bf7387a6c808ec3e4360dd2c57a6eab051c\nauthor ix5 <ix5@users.noreply.github.com> 1651367127 +0200\ncommitter GitHub <noreply@github.com> 1651367127 +0200\n\nMerge pull request #852 from ix5/docs-testing-contrib\n\n docs [MAJOR]: Fill in community, testing, contrib pages, add news entries "
    }
  },
  "url": "https://api.github.com/repos/posativ/isso/commits/ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
  "html_url": "https://github.com/posativ/isso/commit/ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
  "comments_url": "https://api.github.com/repos/posativ/isso/commits/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/comments",
  "author": {
    "login": "ix5",
    "id": 10212877,
    "node_id": "MDQ6VXNlcjEwMjEyODc3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10212877?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ix5",
    "html_url": "https://github.com/ix5",
    "followers_url": "https://api.github.com/users/ix5/followers",
    "following_url": "https://api.github.com/users/ix5/following{/other_user}",
    "gists_url": "https://api.github.com/users/ix5/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ix5/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ix5/subscriptions",
    "organizations_url": "https://api.github.com/users/ix5/orgs",
    "repos_url": "https://api.github.com/users/ix5/repos",
    "events_url": "https://api.github.com/users/ix5/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ix5/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "f61f180a44cd4335fd5f926c880dfc007e0f5b5a",
      "url": "https://api.github.com/repos/posativ/isso/commits/f61f180a44cd4335fd5f926c880dfc007e0f5b5a",
      "html_url": "https://github.com/posativ/isso/commit/f61f180a44cd4335fd5f926c880dfc007e0f5b5a"
    },
    {
      "sha": "498b6bf7387a6c808ec3e4360dd2c57a6eab051c",
      "url": "https://api.github.com/repos/posativ/isso/commits/498b6bf7387a6c808ec3e4360dd2c57a6eab051c",
      "html_url": "https://github.com/posativ/isso/commit/498b6bf7387a6c808ec3e4360dd2c57a6eab051c"
    }
  ],
  "stats": {
    "total": 750,
    "additions": 703,
    "deletions": 47
  },
  "files": [
    {
      "sha": "f662dab33991c22940cd596cd29d01a2df934e2d",
      "filename": "docs/_static/css/site.css",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/posativ/isso/blob/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2F_static%2Fcss%2Fsite.css",
      "raw_url": "https://github.com/posativ/isso/raw/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2F_static%2Fcss%2Fsite.css",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2F_static%2Fcss%2Fsite.css?ref=ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
      "patch": "@@ -322,6 +322,8 @@ main {\n         list-style-type: square;\n         margin-left: 2em;\n         margin-right: 2em; }\n+        main .docs ul li > ul {\n+          margin: 0; }\n   main .vcs-edit {\n     font-size: 1.16em;\n     line-height: 1.16em;"
    },
    {
      "sha": "83343452103e9c46732820d96ab22ad8a842ff8d",
      "filename": "docs/_static/css/site.scss",
      "status": "modified",
      "additions": 7,
      "deletions": 1,
      "changes": 8,
      "blob_url": "https://github.com/posativ/isso/blob/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2F_static%2Fcss%2Fsite.scss",
      "raw_url": "https://github.com/posativ/isso/raw/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2F_static%2Fcss%2Fsite.scss",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2F_static%2Fcss%2Fsite.scss?ref=ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
      "patch": "@@ -384,13 +384,19 @@ main {\n     }\n \n     ul {\n-\n       margin: 1em 0;\n \n       li {\n         list-style-type: square;\n         margin-left: 2em;\n         margin-right: 2em;\n+\n+        > {\n+          // Nested lists shouldn't have margins\n+          ul {\n+              margin: 0;\n+          }\n+        }\n       }\n     }\n   }"
    },
    {
      "sha": "f06a2ccb3cfffaf907ee8963e47e8d3d4de89e20",
      "filename": "docs/community.rst",
      "status": "modified",
      "additions": 53,
      "deletions": 8,
      "changes": 61,
      "blob_url": "https://github.com/posativ/isso/blob/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fcommunity.rst",
      "raw_url": "https://github.com/posativ/isso/raw/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fcommunity.rst",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2Fcommunity.rst?ref=ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
      "patch": "@@ -3,6 +3,24 @@\n Community\n =========\n \n+.. _contact:\n+\n+Getting in contact\n+------------------\n+\n+The main place of interaction for the Isso community is the\n+`GitHub issue tracker <https://github.com/posativ/isso/issues>`_.\n+\n+A few people - including the lead developers and maintainers - frequent the\n+``#isso`` channel, which you can join via\n+`Matrix <https://matrix.to/#/#isso:libera.chat\">`_ or via IRC on\n+`Libera.Chat <https://libera.chat/>`_\n+\n+You may also ask questions or suggest improvements on\n+`GitHub Discussions <https://github.com/posativ/isso/discussions>`_.\n+\n+.. _scripts-and-helpers:\n+\n Scripts & Helpers\n -----------------\n \n@@ -13,17 +31,44 @@ They are stored in the `GitHub contrib/ directory\n * `dump_comments.py` : dump isso comments as text, optionally with color\n * `import_blogger.py` : comment importer from Blogger\n \n-Tips & Tricks\n--------------\n+.. _powered-by-isso:\n+\n+Powered by Isso\n+---------------\n+\n+A list of websites and people that use Isso can be found at\n+`the wiki at GitHub <https://github.com/posativ/isso/wiki/Powered-by-isso>`_.\n \n-.. todo::\n+Feel free to add your own project to the list!\n \n-   Write tips & tricks section\n+.. _adjacent-projects:\n \n Isso-adjacent Projects\n ----------------------\n \n-* `wonderfall/isso Docker image <https://github.com/Wonderfall/docker-isso>`\n-* `a grav plugin to integrate isso comments <https://github.com/Sommerregen/grav-plugin-jscomments>`\n-* `a Pelican theme supporting isso comments <https://github.com/Lucas-C/pelican-mg>`\n-* `a Sphinx extension to integrate isso comments <https://github.com/sphinx-notes/isso>`\n+* `wonderfall/isso Docker image <https://github.com/Wonderfall/docker-isso>`_\n+* `a grav plugin to integrate isso comments <https://github.com/Sommerregen/grav-plugin-jscomments>`_\n+* `a Pelican theme supporting isso comments <https://github.com/Lucas-C/pelican-mg>`_\n+* `a Sphinx extension to integrate isso comments <https://github.com/sphinx-notes/isso>`_\n+\n+\n+.. attention::\n+\n+   This section of the Isso documentation is incomplete. Please help by expanding it.\n+\n+   Click the ``Edit on GitHub`` button in the top right corner and read the\n+   GitHub Issue named\n+   `Improve & Expand Documentation <https://github.com/posativ/isso/issues/797>`_\n+   for further information.\n+\n+   **What's missing?**\n+\n+   - Import a few suggestions and links from\n+     `the wiki on GitHub <https://github.com/posativ/isso/wiki/>`_\n+   - Define and refine community standards\n+   - Link to more related projects, investigate moving the \"Other options\"\n+     section from the main docs here\n+\n+   Ideas:\n+\n+   - `Ansible community page <https://docs.ansible.com/ansible/latest/community/>`_"
    },
    {
      "sha": "aca8bdc91337fc84272475afe1ad9cab0bc0c5bd",
      "filename": "docs/docs/contributing/documentation.rst",
      "status": "modified",
      "additions": 13,
      "deletions": 0,
      "changes": 13,
      "blob_url": "https://github.com/posativ/isso/blob/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Fcontributing%2Fdocumentation.rst",
      "raw_url": "https://github.com/posativ/isso/raw/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Fcontributing%2Fdocumentation.rst",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2Fdocs%2Fcontributing%2Fdocumentation.rst?ref=ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
      "patch": "@@ -1,6 +1,19 @@\n Writing Documentation\n =====================\n \n+Syntax standards\n+----------------\n+\n+- Use ``(.venv) $ python [cmd]`` for things that need to be run inside a\n+  virtual environment and be consistent, see\n+  `Sphinx: Narrative Documentation`__\n+- Admonitions should only be: ``note``, ``tip``, ``warning``, ``attention``,\n+  (maybe also ``error``?). See `docutils: Admonitions`__.\n+\n+.. __: https://www.sphinx-doc.org/en/master/tutorial/narrative-documentation.html\n+.. __: https://docutils.sourceforge.io/docs/ref/rst/directives.html#admonitions\n+\n+\n .. attention::\n \n    This section of the Isso documentation is incomplete. Please help by expanding it."
    },
    {
      "sha": "079d0e1bba8620a1ab91985dadf55c81a6d72c3d",
      "filename": "docs/docs/contributing/index.rst",
      "status": "modified",
      "additions": 189,
      "deletions": 26,
      "changes": 215,
      "blob_url": "https://github.com/posativ/isso/blob/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Fcontributing%2Findex.rst",
      "raw_url": "https://github.com/posativ/isso/raw/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Fcontributing%2Findex.rst",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2Fdocs%2Fcontributing%2Findex.rst?ref=ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
      "patch": "@@ -1,24 +1,28 @@\n Contribute\n ==========\n \n-Write some code.\n-----------------\n+Sections covered in this document:\n \n-I appreciate any help and love pull requests. Here are some things you\n-need to respect:\n+.. contents::\n+    :local:\n \n-*  no hard-wired external services (e.g. Gravatar, Akismet)\n-*  no support for ancient browsers (e.g. IE6-9)\n+.. note:: In short: We welcome your changes. We don't bite and are happy for\n+   anyone who donates their time and effort to the project.\n \n-If you create a feature request, start a new branch. If you fix an\n-issue, start off the *master* branch and pull request against the\n-master. I'll cherry-pick/backport the fix onto the current legacy\n-(maintenance) release.\n+.. _contribute-report-issues:\n \n Report issues\n -------------\n \n-.. _contribute-report-issues:\n+You are welcome report issues at the\n+`GitHub Issue tracker <https://github.com/posativ/isso/issues>`_.\n+\n+If you need help or want to request a feature, please `open a discussion`__\n+instead. For more ways to get in contact, see the :doc:`/community` page.\n+\n+.. __: https://github.com/posativ/isso/discussions\n+\n+Here are a few general rules to keep in mind when reporting issues:\n \n - **Disqus import fails** – if ``isso import /path/to/disqus.xml`` fails,\n   please do *NOT* attach the raw dump file to GH:Issues. Please anonymize all\n@@ -32,14 +36,14 @@ Report issues\n - **Isso-related issues** – Copy and paste traceback into a ticket and provide\n   some details of your usage.\n \n+.. _contribute-translations:\n+\n Translations\n ------------\n \n-.. _contribute-translations:\n-\n Isso supports multiple languages and it is fairly easy to add new translations.\n-You can use the `english translation file`__ and `other translations`__ as a referece and open a Pull\n-Request.\n+You can use the `english translation file`__ and `other translations`__ as a\n+referece and open a Pull Request.\n \n You may notice some \"weird\" newlines in translations -- that's the separator\n for pluralforms_ in the templating engine.\n@@ -48,18 +52,177 @@ for pluralforms_ in the templating engine.\n .. __: https://github.com/posativ/isso/blob/master/isso/js/app/i18n/\n .. _pluralforms: http://docs.translatehouse.org/projects/localization-guide/en/latest/l10n/pluralforms.html?id=l10n/pluralforms\n \n-Where I need help.\n+Code contributions\n ------------------\n \n-Isso is my first projects which involves JavaScript. If you are more\n-experienced in JS, please take a look at the code (that does not mean, the\n-Python code is perfect ;-). A few feature requests and issues, where I\n-definitely need help:\n-\n-* `Admin Web Interface <https://github.com/posativ/isso/issues/10>`_ –\n+You do not have to read this whole section; the maintainers will give you\n+feedback in the review process. But if you want to be a nice and helpful\n+person, you can make the lives of the maintainers a lot easier.\n+\n+These guidelines are here to help your thought process and hopefully make you\n+aware of a few aspects you might not have thought about yet.\n+\n+.. The project author @posativ has stipulated these basic two tenets:\n+.. *  no hard-wired external services (e.g. Gravatar, Akismet)\n+.. *  no support for ancient browsers (e.g. IE6-9)\n+\n+Submitting a change\n+^^^^^^^^^^^^^^^^^^^\n+\n+- Please, if possible, run all test suites (see\n+  :doc:`/docs/technical-docs/testing`) and make sure they pass\n+- If it's a user-facing feature or an important bugfix, add ``CHANGES.rst``\n+  entry\n+- Add yourself to ``CONTRIBUTORS.txt``, if you like\n+\n+How to write commit messages\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+- Mention the affected part in the title\n+- Keep title under 50 characters if possible, at most 72\n+- Keep body under 80 characters of width\n+- Explain what the change does\n+- Link to related issues or references\n+\n+Design philosophy / Zen of Isso\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+- Isso should not be a \"move fast and break things\" project.\n+- Be mindful of the users. They do not anxiously await a new release - they\n+  simply want their websites to work.\n+- Try to avoid breaking changes: People do not want to dig through changelogs\n+  to find out why suddenly their comment section is gone.\n+\n+What kind of changes will be accepted?\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+As a rule, you want to make the life of the maintainers as easy as possible.\n+Removing cruft is good, as is improving tests or docs. Introducing new\n+features, possibly with new config options, should have good reasoning and is\n+harder to review.\n+\n+What should I think about?\n+\n+- Will everyone benefit from my contribution or is this just fixing my pet\n+  peeve/supporting my exotic use case?\n+- Will this add complexity? If many changes similar to mine are introduced, will\n+  this make the project more confusing and complex?\n+- Should this be done in a more generalized manner? As a hypothetical example,\n+  do not create a new toggle with ``is-submit-button-green`` or\n+  ``submit-button-color``, but rather create a mechanism by which the color of\n+  all buttons can be set.\n+\n+If adding a new option/config:\n+\n+- Is the option well-named? Can users already figure out what it does, without\n+  having to read the description?\n+- Is the option really necessary? Should the default behaviour be changed\n+  instead?\n+- Is the option well-documented? Is it clear what it does? Are the available\n+  choices well-documented?\n+- Is the option in the right config section?\n+- Backward compatibility\n+\n+A config option is sort of a promise to users. They will be confused if it is\n+removed and their setup no longer works.\n+\n+What is currently needed?\n+^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+- **Improvements of test coverage** - really important for the project to move\n+  forward!\n+- Look at `open issues with label \"needs-contributor\"`__\n+- Look at `open issues with label \"good-first-issue\"`__\n+- Look at `open issues with label \"needs-decision\"`__ and chime in with your\n+  well thought-out opinion\n+- Look at `milestones`__\n+- Nicer automated testing, via docker or GH actions, of most of the available\n+  setup options (fastcgi/proxy configs, docker, apachge/nginx, ...)\n+\n+@posativ's wishlist:\n+\n+- `Admin Web Interface <https://github.com/posativ/isso/issues/10>`_ –\n   administration via email is cumbersome with a high amount of comments. A\n   administration web interface should include the ability to:\n-\n-  - delete or activate comments matching a filter (e.g. name, email, ip address)\n-\n-  - close threads and remove threads completely\n+- Delete or activate comments matching a filter (e.g. name, email, ip address)\n+- Close threads and remove threads completely\n+\n+.. __: https://github.com/posativ/isso/labels/needs-contributor\n+.. __: https://github.com/posativ/isso/labels/good-first-issue\n+.. __: https://github.com/posativ/isso/labels/needs-decision\n+.. __: https://github.com/posativ/isso/milestones\n+\n+Regarding fancy new CI tools\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+- Linters are fine, but please create sensible configs\n+- Nothing too \"magic\", AI-based\n+- Keep in mind that too many bots running will need constant updates and maintenance\n+- Nothing that compromises this project's integrity, by granting repo access to bots\n+- Nothing too \"chatty\" - it will just be ignored and increase the burden on\n+  maintainers even more\n+\n+Complexity\n+^^^^^^^^^^\n+\n+Isso started out as a fairly simple project, but it has grown over time.\n+It is built using many different technologies and moving parts\n+\n+.. Try to avoid adding new dependencies to the project. Adding complexity makes it\n+.. exponentially harder to understand the breadth of components, makes it harder\n+.. to keep track of the growing list of external dependencies, and also means that\n+.. the maintainers will have to do even more work before merging your change - in\n+.. practice, they will probably not be able to find the time.\n+\n+Below is a non-exhaustive list of tools, services, dependencies and\n+technologies Isso's contributors and maintainers need to at least peripherally\n+be aware of - that's a lot to demand of someone!\n+\n+Docs\n+    - apiDoc\n+    - sphinx with reST syntax\n+\n+Python\n+    - Pallets project: werkzeug, jinja2, flask\n+    - misaka (and changing config opts)\n+    - bleach, html5lib\n+    - different python versions, OS versions\n+    - flake8\n+    - setuptools, pip\n+    - python package index (pypa) uploading\n+\n+Python testing\n+    - pytest (unit testing)\n+    - coverage\n+\n+Convenience tools\n+    - docker\n+    - vagrant\n+    - ansible\n+\n+Javascript\n+    - nodejs\n+    - npm\n+    - package.json oddities\n+    - webpack\n+    - Jest\n+    - puppeteer\n+    - Browser compatibility and ES5/ES6 standards\n+\n+Development tools\n+    - make\n+    - Github Actions\n+\n+Deployment options\n+    - ``isso run [opts]``\n+    - Apache (``mod_wsgi``)\n+    - Apache (``mod_fastcgi``)\n+    - Apache (proxy)\n+    - nginx (proxy)\n+    - uwswgi\n+    - gunicorn\n+    - gevent\n+\n+Importers\n+    - Current disqus export format\n+    - Current and past Wordpress export formats"
    },
    {
      "sha": "c9ce2c3c0377ff9b8a658c7a1fab7acdf72570c9",
      "filename": "docs/docs/reference/installation.rst",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/posativ/isso/blob/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Freference%2Finstallation.rst",
      "raw_url": "https://github.com/posativ/isso/raw/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Freference%2Finstallation.rst",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2Fdocs%2Freference%2Finstallation.rst?ref=ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
      "patch": "@@ -152,6 +152,8 @@ use the following command to spawn the Docker container:\n \n Then, you can use a reverse proxy to expose port 8080.\n \n+.. _install-from-source:\n+\n Install from Source\n -------------------\n "
    },
    {
      "sha": "11369ea3c3503a3576b93cc2fb415c054e1f0125",
      "filename": "docs/docs/technical-docs/client.rst",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/posativ/isso/blob/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Ftechnical-docs%2Fclient.rst",
      "raw_url": "https://github.com/posativ/isso/raw/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Ftechnical-docs%2Fclient.rst",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2Fdocs%2Ftechnical-docs%2Fclient.rst?ref=ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
      "patch": "@@ -16,7 +16,7 @@ Technical Documentation: Client\n    - JS, webpack (explain why each is needed)\n    - Coding standards (ES5?), goals (compartmentalization, testability,\n      ease of maintenance)\n-   - Compatibility: Browser/IE versions, used ES versions\n-     Keep udpated for JS and CSS features (e.g. CSS vars)\n+   - Compatibility: Browser/IE versions, used ES versions -\n+     keep updated for JS and CSS features (e.g. CSS vars)\n \n    ... and other things about the client that should be documented."
    },
    {
      "sha": "636395819358224aa2688254817cad557d8c82f6",
      "filename": "docs/docs/technical-docs/server.rst",
      "status": "modified",
      "additions": 18,
      "deletions": 2,
      "changes": 20,
      "blob_url": "https://github.com/posativ/isso/blob/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Ftechnical-docs%2Fserver.rst",
      "raw_url": "https://github.com/posativ/isso/raw/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Ftechnical-docs%2Fserver.rst",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2Fdocs%2Ftechnical-docs%2Fserver.rst?ref=ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
      "patch": "@@ -2,6 +2,16 @@\n Technical Documentation: Server\n ###############################\n \n+Dependencies\n+------------\n+\n+Isso uses some of the following dependencies:\n+\n+- `werkzeug <https://github.com/mitsuhiko/werkzeug>`_ – WSGI toolkit\n+- `itsdangerous <https://github.com/mitsuhiko/itsdangerous>`_ – store signed data on untrusted clients\n+- `misaka <http://misaka.61924.nl/>`_ – fast Markdown processor written in C\n+- `html5lib <https://github.com/html5lib/html5lib-python>`_ – HTML(5) parser and sanitizer\n+\n .. attention::\n \n    This section of the Isso documentation is incomplete. Please help by expanding it.\n@@ -13,8 +23,14 @@ Technical Documentation: Server\n \n    **What's missing?**\n \n-   - Technologies used (flask, werkzeug, misaka)\n-   - Explain structure\n+   - Technologies used (flask, werkzeug, misaka, ...)\n+   - Explain code structure\n+   - Request handling and HTTP\n+   - Database handling code\n+   - Comment schema\n+   - Comment (Markdown) rendering using misaka and custom extensions\n+   - Cross-Origin Resource Sharing (CORS)\n+   - Content Security Policy\n    - Future plans: Rewrite/Refactor, SQLAlchemy, MVC\n \n    ... and other things about the server that should be documented."
    },
    {
      "sha": "d72df34e953b47def6996157ab130646f8c36591",
      "filename": "docs/docs/technical-docs/testing-client.rst",
      "status": "modified",
      "additions": 146,
      "deletions": 0,
      "changes": 146,
      "blob_url": "https://github.com/posativ/isso/blob/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Ftechnical-docs%2Ftesting-client.rst",
      "raw_url": "https://github.com/posativ/isso/raw/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Ftechnical-docs%2Ftesting-client.rst",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2Fdocs%2Ftechnical-docs%2Ftesting-client.rst?ref=ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
      "patch": "@@ -2,6 +2,152 @@\n Testing the Client\n ##################\n \n+The Javascript client part of Isso is tested by the\n+`Jest testing framework <https://jestjs.io/>`_.\n+\n+.. note::\n+   Improvements to Isso's test coverage and/or different testing strategies are\n+   always welcome! Please see the :doc:`/docs/contributing/index` page for\n+   further information.\n+\n+Sections covered in this document:\n+\n+.. contents::\n+    :local:\n+\n+Unit tests\n+----------\n+\n+The unit tests that cover the frontend client ensure that the individual\n+components are working fine in isolation.\n+\n+Install the needed ``Jest``-related packages\n+(listed as ``optionalDependencies`` in ``package.json``):\n+\n+.. code-block:: bash\n+\n+   $ npm install\n+\n+Then run the unit tests:\n+\n+.. code-block:: bash\n+\n+   $ npm run tests-unit\n+\n+You should receive output that looks similar to the following:\n+\n+.. code-block:: bash\n+\n+   > test-unit\n+   > jest --config isso/js/jest-unit.config.js isso/js/tests/unit/\n+\n+   PASS  isso/js/tests/unit/isso.test.js\n+   PASS  isso/js/tests/unit/config.test.js\n+   PASS  isso/js/tests/unit/utils.test.js\n+\n+   Test Suites: 3 passed, 3 total\n+   Tests:       3 passed, 3 total\n+   Snapshots:   1 passed, 1 total\n+   Time:        0.907 s, estimated 1 s\n+   Ran all test suites matching /isso\\/js\\/tests\\/unit\\//i.\n+\n+\n+End-to-End Integration tests\n+----------------------------\n+\n+For the end-to-end integration tests, the Python server part needs to be up and\n+running - this part of the test suite pretends to be a real user sitting in\n+front of a keyboard.\n+\n+The tests are run using the `puppeteer`__ browser automation tool. It runs a\n+real Chromium browser in the background and can be instrumented to allow\n+simulation of user interaction.\n+\n+.. __: https://puppeteer.github.io/puppeteer/\n+\n+First, ensure all the client files are built and that the server part is ready\n+to be run. Refer to :ref:`install-from-source` for details. Here's the\n+important part:\n+\n+.. code-block:: bash\n+\n+   $ make init\n+   $ make js\n+\n+Start the server:\n+\n+.. code-block:: bash\n+\n+   $ virtualenv .venv\n+   $ source .venv/bin/activate\n+   (.venv) $ isso -c share/isso-dev.cfg run\n+\n+Install the necessary ``puppeteer``-related Javascript packages:\n+\n+.. code-block:: bash\n+\n+   $ npm install --no-save jest jest-puppeteer puppeteer\n+\n+.. note::\n+   This will take some time as a headless ``chromium`` browser needs to be\n+   downloaded, which requires about 400Mb of space.\n+\n+Then run the integration tests:\n+\n+.. code-block:: bash\n+\n+   $ npm run tests-integration\n+\n+You should receive output that looks similar to the following:\n+\n+.. code-block:: bash\n+\n+    > test-integration\n+    > jest --config isso/js/jest-integration.config.js isso/js/tests/integration/\n+\n+    PASS  isso/js/tests/integration/puppet.test.js\n+     ✓ window.Isso functions should be idempotent (87 ms)\n+     ✓ should have correct ISSO_ENDPOINT on page (26 ms)\n+     ✓ should display \"Isso Demo\" text on page (34 ms)\n+     ✓ should fill Postbox with valid data and receive 201 reply (319 ms)\n+\n+    Test Suites: 1 passed, 1 total\n+    Tests:       4 passed, 4 total\n+    Snapshots:   0 total\n+    Time:        0.752 s, estimated 21 s\n+    Ran all test suites matching /isso\\/js\\/tests\\/integration\\//i.\n+\n+\n+Skip downloading Chromium\n+^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+The downloaded browser will be saved to ``node_modules/puppeteer/.local-chromium/``.\n+You can set ``PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true`` in your environment to\n+skip downloading the bundled browser and instead use the locally installed\n+version of Chrome/Chromium via e.g. ``PUPPETEER_EXECUTABLE_PATH=$(which chromium)``.\n+\n+For further information, see `puppeteer docs: Environment variables`__.\n+\n+.. __: https://github.com/puppeteer/puppeteer/blob/main/docs/api.md#environment-variables\n+\n+Testing standards\n+-----------------\n+\n+A good starting point are the `MailChimp standards`__\n+\n+You may use ``ES6`` syntax in tests (the restriction for ``ES5`` syntax is only\n+for the production client code which needs to run on as many browsers as\n+possible).\n+\n+Try not to introduce any race conditions - especially the asynchronous code is\n+very tricky to get right.\n+\n+The current test suite was written largely by one of the main project leads,\n+who happens to know very little about testing (or even Javascript in general).\n+Feel free to suggest improvements and change this!\n+\n+.. __: https://mailchimp.com/developer/open-commerce/docs/testing-requirements/>\n+\n .. attention::\n \n    This section of the Isso documentation is incomplete. Please help by expanding it."
    },
    {
      "sha": "82d59c2540bd03388a0d7d554cde15a31c76bf8e",
      "filename": "docs/docs/technical-docs/testing-server.rst",
      "status": "modified",
      "additions": 32,
      "deletions": 7,
      "changes": 39,
      "blob_url": "https://github.com/posativ/isso/blob/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Ftechnical-docs%2Ftesting-server.rst",
      "raw_url": "https://github.com/posativ/isso/raw/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Ftechnical-docs%2Ftesting-server.rst",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2Fdocs%2Ftechnical-docs%2Ftesting-server.rst?ref=ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
      "patch": "@@ -2,13 +2,42 @@\n Testing the Server\n ##################\n \n-Isso is tested by the `pytest`_ tool. You should also install the `coverage`_\n-module with the `pytest-cov`_ plugin to receive code coverage statistics.\n+The server part of Isso is tested by the `pytest`_ tool. You should also\n+install the `coverage`_ module with the `pytest-cov`_ plugin to receive code\n+coverage statistics.\n \n-.. code-block:: sh\n+.. code-block:: bash\n \n     $ pip install pytest pytest-cov coverage\n \n+Run Isso's standard server **test suite**:\n+\n+.. code-block:: bash\n+\n+    make tests\n+\n+You can also run tests independently via ``pytest [options] isso/``.\n+\n+.. note::\n+   Improvements to Isso's test coverage and/or different testing strategies are\n+   always welcome! Please see the :doc:`/docs/contributing/index` page for\n+   further information.\n+\n+Generate and view server **test coverage**:\n+\n+.. code-block:: bash\n+\n+    make coverage\n+\n+.. note::\n+   The Continuous Integration suite running via\n+   `GitHub Actions <https://github.com/posativ/isso/blob/master/.github/workflows/python-tests.yml>`_\n+   will throw an **error** if the code coverage falls **below 70%**.\n+\n+\n+DistributionNotFound error\n+--------------------------\n+\n Pytest needs your Isso package to be installed as a site package to work, else it\n will complain with:\n \n@@ -23,9 +52,6 @@ your current working directory.\n Use ``pip install -e .`` to install Isso as an \"editable\" package (the package\n in ``site-packages`` will be a symlink to your current development directory).\n \n-You can run tests independently via ``pytest [options] isso/`` or use Isso's\n-standard test suite via ``make tests coverage``.\n-\n .. _pytest: https://docs.pytest.org/\n .. _pytest-cov: https://github.com/pytest-dev/pytest-cov\n .. _coverage: https://coverage.readthedocs.io/en/latest/\n@@ -41,7 +67,6 @@ standard test suite via ``make tests coverage``.\n \n    **What's missing?**\n \n-   - Unit tests: unittest, pytest, coverage\n    - Maybe some links to \"how to write good python tests\"\n \n    ... and other things about server testing that should be documented."
    },
    {
      "sha": "432f30e622297ec6b9e958696a40940f0814ce5f",
      "filename": "docs/docs/technical-docs/testing.rst",
      "status": "modified",
      "additions": 187,
      "deletions": 0,
      "changes": 187,
      "blob_url": "https://github.com/posativ/isso/blob/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Ftechnical-docs%2Ftesting.rst",
      "raw_url": "https://github.com/posativ/isso/raw/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fdocs%2Ftechnical-docs%2Ftesting.rst",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2Fdocs%2Ftechnical-docs%2Ftesting.rst?ref=ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
      "patch": "@@ -2,6 +2,193 @@\n Testing\n #######\n \n+Before submitting a change, you need to verify that it does not inadvertently\n+break any existing functionality in Isso.\n+\n+A test suite for the **Python server** part ensures that the most basic things\n+are not broken, but it can only catch as many errors as it is configured to be\n+aware of (this is called \"test coverage\"). For more information, see\n+:doc:`testing-server`.\n+\n+The **Javascript client** code is covered by both unit tests and end-to-end\n+integration tests. The test coverage is very small at the moment - see\n+`this GitHub issue <https://github.com/posativ/isso/issues/754>`_.\n+For detailed instructions about running client tests, see\n+:doc:`testing-client`.\n+\n+.. note::\n+   Improvements to Isso's test coverage and/or different testing strategies are\n+   always welcome! Please see the :doc:`/docs/contributing/index` page for\n+   further information.\n+\n+\n+Sections covered in this document:\n+\n+.. contents::\n+    :local:\n+\n+\n+Development server\n+------------------\n+\n+After you've set up Isso according to :ref:`install-from-source`, you will have\n+a development server available at ``localhost:8080``.\n+\n+.. code-block:: bash\n+\n+   $ virtualenv .venv\n+   $ source .venv/bin/activate\n+   (.venv) $ isso -c share/isso-dev.cfg run\n+\n+From there, the page ``localhost:8080/demo`` will be available, from where you\n+can try out the embedded Isso widget yourself. For convenience, the development\n+version of the bundled client code is used (``embed.dev.js`` with source map).\n+\n+This enables easier debugging - e.g. Firefox shows a ``webpack`` entry in the\n+\"Debugger\" tab and shows the actual line of source code in any console traces.\n+\n+Using docker\n+------------\n+\n+Testing via `docker <https://en.wikipedia.org/wiki/Docker_(software)>`_ is not\n+a requirement, but can make a few tests faster to set up, makes automation\n+easier and ensures a consistent testing environment across developer machines.\n+\n+Isso ships with several ``Dockerfiles`` - the ones under the\n+`docker/ folder <https://github.com/posativ/isso/tree/master/docker>`_ are for\n+creating a container that can run the unit and integration tests.\n+\n+Build images\n+^^^^^^^^^^^^\n+\n+First, ensure all images are built:\n+\n+.. code-block:: bash\n+\n+    # Download Jest and puppeteer files\n+    $ docker build -f docker/Dockerfile-js-puppeteer -t isso-js-puppeteer .\n+\n+This will take some time as headless chromium needs to be downloaded, once\n+(~400Mb), as well as necessary libraries installed. Will be cached on subsequent\n+runs.\n+\n+.. code-block:: bash\n+\n+    # Prepare testbed image\n+    $ docker build -f docker/Dockerfile-js-testbed -t isso-js-testbed .\n+\n+    # Create production image\n+    $ docker build -f Dockerfile -t isso .\n+\n+Start server\n+^^^^^^^^^^^^\n+\n+Start up server part via ``docker compose``:\n+\n+.. code-block:: bash\n+\n+    $ docker compose up -d\n+\n+Now you should have the Isso server part available at ``localhost:8080``.\n+\n+Running tests\n+^^^^^^^^^^^^^\n+\n+Run **unit tests:**\n+\n+.. code-block:: bash\n+\n+    $ docker run \\\n+        --mount type=bind,source=${PWD}/package.json,target=/src/package.json,readonly \\\n+        --mount type=bind,source=${PWD}/isso/js/,target=/src/isso/js/,readonly \\\n+        isso-js-testbed npm run test-unit\n+\n+Run **integration tests:**\n+\n+.. code-block:: bash\n+\n+    $ docker run \\\n+        --mount type=bind,source=${PWD}/package.json,target=/src/package.json,readonly \\\n+        --mount type=bind,source=${PWD}/isso/js/,target=/src/isso/js/,readonly \\\n+        --env ISSO_ENDPOINT='http://isso-dev.local:8080' \\\n+        --network container:isso-server \\\n+        isso-js-testbed npm run test-integration\n+\n+(The ``--network`` part ensures that the client container can see the server\n+part. This is *not* set automatically by docker since this container is\n+considered a transient one)\n+\n+Finally, bring down the containers again\n+\n+.. code-block:: bash\n+\n+    $ docker compose down -v\n+\n+(The ``-v`` flag removes the transient volumes again, ensuring each test run\n+can start afresh).\n+\n+Testing strategies\n+------------------\n+\n+Manual testing\n+^^^^^^^^^^^^^^\n+\n+Here are a few ideas of how to manually test the client to reveal potentially\n+uncovered scenarios:\n+\n+- Post a comment\n+- Post an answer to a comment\n+- Edit your comment\n+- Test the admin interface\n+- Delete a comment from admin, then try to delete from frontend\n+- Reply to a comment that you have deleted from the admin/as another user\n+- Use ``curl`` commands\n+- Clear your cookies\n+- Restore certain cookies\n+- Embed into a single-page application (SPA)\n+- Zoom inside your browser\n+- Play with the embed parameters (``data-isso-*``)\n+- Play with the server config\n+- Test whether the docker container still works\n+\n+Performance testing\n+^^^^^^^^^^^^^^^^^^^\n+\n+Find a way to have 100, 1,000, 10,000, 100k commments at once.\n+\n+Then, test responsiveness, speed of insertion, the updating of all timestamps\n+every minute, and whatever else might be performance-related.\n+\n+Here is an example to insert into the database (might be better optimized):\n+\n+.. code-block:: bash\n+\n+    for i in {1..1000}; do\n+      sqlite3 comments.db \"INSERT INTO comments (tid, created, remote_addr, text, mode, voters) VALUES (1, 100, '127.0.0.1', 'hello', 1, 0);\";\n+    done\n+\n+Also set the comments to be loaded at once to ``infinity``:\n+\n+.. code-block:: html\n+\n+    <script data-isso-max-comments-top=\"inf\" src=\"../js/embed.dev.js\"></script>\n+\n+Unconventional testing\n+^^^^^^^^^^^^^^^^^^^^^^\n+\n+Be a chaos monkey! Think of unconventional ways of breaking Isso.\n+\n+\n+.. epigraph::\n+\n+   A QA engineer walks into a bar. Orders a beer. Orders 0 beers. Orders\n+   99999999999 beers. Orders a lizard. Orders -1 beers. Orders a ueicbksjdhd.\n+\n+   First real customer walks in and asks where the bathroom is. The bar bursts\n+   into flames, killing everyone.\n+\n+   -- `brenankeller <https://twitter.com/brenankeller/status/1068615953989087232>`_\n+\n .. attention::\n \n    This section of the Isso documentation is incomplete. Please help by expanding it."
    },
    {
      "sha": "fd2733b39621c8e1e69609aa6176fcf1440b81b8",
      "filename": "docs/news.rst",
      "status": "modified",
      "additions": 52,
      "deletions": 1,
      "changes": 53,
      "blob_url": "https://github.com/posativ/isso/blob/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fnews.rst",
      "raw_url": "https://github.com/posativ/isso/raw/ae1fe9f567c29dbdc28f9976e577a0f51417d53d/docs%2Fnews.rst",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2Fnews.rst?ref=ae1fe9f567c29dbdc28f9976e577a0f51417d53d",
      "patch": "@@ -3,4 +3,55 @@\n News\n ====\n \n-To be written.\n+Isso version 0.12.6.2 released\n+------------------------------\n+\n+*Date: 2022-04-23*\n+\n+- Hotfix release to note compatibility with werkzeug 2.1+\n+\n+Isso version 0.12.6.1 released\n+------------------------------\n+\n+*Date: 2022-03-20*\n+\n+- Hotfix release to restore position of Postbox before comments\n+  (#815, ix5)\n+\n+Isso version 0.12.6 released\n+----------------------------\n+\n+*Date: 2022-03-06*\n+\n+- Serve isso.css separately to avoid ``style-src: unsafe-inline`` CSP and allow\n+  clients to override fetch location (#704, ix5):\n+\n+  .. code-block:: html\n+\n+      data-isso-css-url=\"https://comments.example.org/css/isso.css\"\n+\n+- New \"samesite\" option in [server] section to override SameSite header for\n+  cookies. (#700, ix5)\n+- Fallback for SameSite header depending on whether host is served over https\n+  or http (#700, ix5)\n+- Have client read out shared settings from server. (#311, pellenilsson)\n+  This affects these settings for which ``data-isso-*`` values will be ignored:\n+\n+  .. code-block:: ini\n+\n+      [general]\n+      reply-notifications\n+      gravatar\n+      [guard]\n+      reply-to-self\n+      require-author\n+      require-email\n+- Improved detection of browser-supplied language preferences (#521)\n+  Isso will now honor the newer ``navigator.languages`` global property\n+  as well as ``navigator.language`` and ``navigator.userLanguage``.\n+  There is a new configuration property ``data-isso-default-lang``\n+  that specifies the language to use (instead of English) when none\n+  of these is available.  (The existing ``data-isso-lang`` *overrides*\n+  browser-supplied language preferences.)\n+- Remove ``ISSO_CORS_ORIGIN`` environ variable, which never worked at all\n+  (#803, ix5)"
    }
  ]
}
