{
  "sha": "7e621d94013e0054a916d432ff18923b14923089",
  "node_id": "C_kwDOAF-mA9oAKDdlNjIxZDk0MDEzZTAwNTRhOTE2ZDQzMmZmMTg5MjNiMTQ5MjMwODk",
  "commit": {
    "author": {
      "name": "ix5",
      "email": "ix5@users.noreply.github.com",
      "date": "2022-05-07T00:12:01Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2022-05-07T00:12:01Z"
    },
    "message": "Merge pull request #864 from ix5/docs-markdown-rendering\n\n[docs] Add Markdown rendering explanation, refs, more styling of tables and other elements",
    "tree": {
      "sha": "ad721050659beeabb982a391e67abb1a6c91cb89",
      "url": "https://api.github.com/repos/posativ/isso/git/trees/ad721050659beeabb982a391e67abb1a6c91cb89"
    },
    "url": "https://api.github.com/repos/posativ/isso/git/commits/7e621d94013e0054a916d432ff18923b14923089",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJidblRCRBK7hj4Ov3rIwAACXcIAJU6jyAjkSYH3I83NI+7yWvA\nk4vzqPEtofVBOVmgI9Sr/H2JYM9sw197HExlMEFHSDTmsk12O3jigqcA+xYbT2Kp\nHGWbDU+WvcAxOx18z7FsZlatg2prNk59bMJJfscSeR+Ti2zqDyfCE841xOHd/EOZ\n1K83ryqGtHqHgMo1mpy/Klc/kyVSQlsLgm4Exifg35glarZ4LnrE25VEnNizYm34\n4mxIH+i0LfuMzTo2X8Yfq6e/Wwd6/fDBfR4rxIvV7uVjhXuJlh4Ddx+ilMFzvLiJ\nBONZEweavtH0qkW+zyla+yGdzHgcdgVchROFfIkdZzg9DnivM90uokZUo8YB0zc=\n=WWRh\n-----END PGP SIGNATURE-----\n",
      "payload": "tree ad721050659beeabb982a391e67abb1a6c91cb89\nparent 2c4d47291f56140dd6471473c625335061338087\nparent 10fd82eccd4ee386b874241c7c186fa6d1f3f0e7\nauthor ix5 <ix5@users.noreply.github.com> 1651882321 +0200\ncommitter GitHub <noreply@github.com> 1651882321 +0200\n\nMerge pull request #864 from ix5/docs-markdown-rendering\n\n[docs] Add Markdown rendering explanation, refs, more styling of tables and other elements"
    }
  },
  "url": "https://api.github.com/repos/posativ/isso/commits/7e621d94013e0054a916d432ff18923b14923089",
  "html_url": "https://github.com/posativ/isso/commit/7e621d94013e0054a916d432ff18923b14923089",
  "comments_url": "https://api.github.com/repos/posativ/isso/commits/7e621d94013e0054a916d432ff18923b14923089/comments",
  "author": {
    "login": "ix5",
    "id": 10212877,
    "node_id": "MDQ6VXNlcjEwMjEyODc3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10212877?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ix5",
    "html_url": "https://github.com/ix5",
    "followers_url": "https://api.github.com/users/ix5/followers",
    "following_url": "https://api.github.com/users/ix5/following{/other_user}",
    "gists_url": "https://api.github.com/users/ix5/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ix5/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ix5/subscriptions",
    "organizations_url": "https://api.github.com/users/ix5/orgs",
    "repos_url": "https://api.github.com/users/ix5/repos",
    "events_url": "https://api.github.com/users/ix5/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ix5/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "2c4d47291f56140dd6471473c625335061338087",
      "url": "https://api.github.com/repos/posativ/isso/commits/2c4d47291f56140dd6471473c625335061338087",
      "html_url": "https://github.com/posativ/isso/commit/2c4d47291f56140dd6471473c625335061338087"
    },
    {
      "sha": "10fd82eccd4ee386b874241c7c186fa6d1f3f0e7",
      "url": "https://api.github.com/repos/posativ/isso/commits/10fd82eccd4ee386b874241c7c186fa6d1f3f0e7",
      "html_url": "https://github.com/posativ/isso/commit/10fd82eccd4ee386b874241c7c186fa6d1f3f0e7"
    }
  ],
  "stats": {
    "total": 230,
    "additions": 216,
    "deletions": 14
  },
  "files": [
    {
      "sha": "dc701c0057df787939f4ee4543ddaf66f6d120f1",
      "filename": "docs/_static/css/site.css",
      "status": "modified",
      "additions": 26,
      "deletions": 8,
      "changes": 34,
      "blob_url": "https://github.com/posativ/isso/blob/7e621d94013e0054a916d432ff18923b14923089/docs%2F_static%2Fcss%2Fsite.css",
      "raw_url": "https://github.com/posativ/isso/raw/7e621d94013e0054a916d432ff18923b14923089/docs%2F_static%2Fcss%2Fsite.css",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2F_static%2Fcss%2Fsite.css?ref=7e621d94013e0054a916d432ff18923b14923089",
      "patch": "@@ -331,15 +331,33 @@ main {\n           margin: 0; }\n     main .docs table.hlist * {\n       vertical-align: top; }\n+    main .docs table.docutils {\n+      margin: 1em 0;\n+      border-collapse: collapse; }\n+      main .docs table.docutils th, main .docs table.docutils td {\n+        padding: 0.4em 0.5em;\n+        border: 1px solid #d3d3d3;\n+        border-collapse: collapse; }\n     main .docs .versionadded,\n     main .docs .versionchanged,\n     main .docs .deprecated {\n       margin: 0.3em 0; }\n-      main .docs .versionadded span,\n-      main .docs .versionchanged span,\n-      main .docs .deprecated span {\n-        background: lightyellow;\n-        font-style: italic; }\n+      main .docs .versionadded span.added,\n+      main .docs .versionadded span.changed,\n+      main .docs .versionchanged span.added,\n+      main .docs .versionchanged span.changed,\n+      main .docs .deprecated span.added,\n+      main .docs .deprecated span.changed {\n+        background: lightyellow; }\n+      main .docs .versionadded span.deprecated,\n+      main .docs .versionchanged span.deprecated,\n+      main .docs .deprecated span.deprecated {\n+        background: #ffe0e0; }\n+      main .docs .versionadded span.versionmodified,\n+      main .docs .versionchanged span.versionmodified,\n+      main .docs .deprecated span.versionmodified {\n+        font-style: italic;\n+        margin-right: 0.6em; }\n   main .vcs-edit {\n     font-size: 1.16em;\n     line-height: 1.16em;\n@@ -389,11 +407,11 @@ main {\n       background: #f29f97; }\n       .admonition.danger .admonition-title:before, .admonition.error .admonition-title:before {\n         color: #f29f97; }\n-  .admonition.hint, .admonition.important, .admonition.tip {\n+  .admonition.hint, .admonition.important, .admonition.tip, .admonition.seealso {\n     background: #dbfaf4; }\n-    .admonition.hint .admonition-title, .admonition.important .admonition-title, .admonition.tip .admonition-title {\n+    .admonition.hint .admonition-title, .admonition.important .admonition-title, .admonition.tip .admonition-title, .admonition.seealso .admonition-title {\n       background: #1abc9c; }\n-      .admonition.hint .admonition-title:before, .admonition.important .admonition-title:before, .admonition.tip .admonition-title:before {\n+      .admonition.hint .admonition-title:before, .admonition.important .admonition-title:before, .admonition.tip .admonition-title:before, .admonition.seealso .admonition-title:before {\n         color: #1abc9c; }\n   .admonition.note {\n     background: #e7f2fa; }"
    },
    {
      "sha": "c1c6182cf7e5b0d09ba2aaadf9ed9028e84b2151",
      "filename": "docs/_static/css/site.scss",
      "status": "modified",
      "additions": 20,
      "deletions": 2,
      "changes": 22,
      "blob_url": "https://github.com/posativ/isso/blob/7e621d94013e0054a916d432ff18923b14923089/docs%2F_static%2Fcss%2Fsite.scss",
      "raw_url": "https://github.com/posativ/isso/raw/7e621d94013e0054a916d432ff18923b14923089/docs%2F_static%2Fcss%2Fsite.scss",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2F_static%2Fcss%2Fsite.scss?ref=7e621d94013e0054a916d432ff18923b14923089",
      "patch": "@@ -416,15 +416,33 @@ main {\n         vertical-align: top;\n     }\n \n+    table.docutils {\n+      margin: 1em 0;\n+      border-collapse: collapse;\n+\n+      th, td {\n+        padding: 0.4em 0.5em;\n+        border: 1px solid $code-block-border-color;\n+        border-collapse: collapse;\n+      }\n+    }\n+\n     .versionadded,\n     .versionchanged,\n     .deprecated {\n \n         margin: 0.3em 0;\n \n-        span {\n+        span.added,\n+        span.changed {\n             background: $versionchanged;\n+        }\n+        span.deprecated {\n+            background: #ffe0e0;\n+        }\n+        span.versionmodified {\n             font-style: italic;\n+            margin-right: 0.6em;\n         }\n     }\n   }\n@@ -505,7 +523,7 @@ main {\n       }\n     }\n   }\n-  &.hint, &.important, &.tip {\n+  &.hint, &.important, &.tip, &.seealso {\n     background: #dbfaf4;\n \n     .admonition-title {"
    },
    {
      "sha": "51cc64896aa0294bac660f59a60ccb091cc3479a",
      "filename": "docs/docs/reference/markdown-config.rst",
      "status": "added",
      "additions": 158,
      "deletions": 0,
      "changes": 158,
      "blob_url": "https://github.com/posativ/isso/blob/7e621d94013e0054a916d432ff18923b14923089/docs%2Fdocs%2Freference%2Fmarkdown-config.rst",
      "raw_url": "https://github.com/posativ/isso/raw/7e621d94013e0054a916d432ff18923b14923089/docs%2Fdocs%2Freference%2Fmarkdown-config.rst",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2Fdocs%2Freference%2Fmarkdown-config.rst?ref=7e621d94013e0054a916d432ff18923b14923089",
      "patch": "@@ -0,0 +1,158 @@\n+Configure how comments are rendered\n+===================================\n+\n+You can use the :ref:`configure-markup` section in your configuration file to\n+influence how the `Markdown`_ syntax in comments is rendered and displayed\n+to the user.\n+\n+Per Isso's defaults, commenters can use **standard Markdown syntax**, **minus\n+footnotes and tables**\n+(see :ref:`below <available-markdown-options>` on how to activate them).\n+\n+.. _Markdown: https://daringfireball.net/projects/markdown/\n+\n+Because users can enter untrusted, potentially **malicious text** into the\n+comment box, Isso applies some safety precautions so that the rendered comments\n+do not contain e.g. malware ``<script>`` tags or ``iframes``. You should not\n+blindly change these defaults to allow more elements without knowing what you\n+are doing.\n+\n+Plain HTML in comments\n+----------------------\n+\n+Per Isso's defaults, commenters can also enter plain HTML instead of or inside\n+of Markdown text.\n+\n+To disallow user-entered plain HTML, add ``skip-html`` to ``[markup] flags``.\n+\n+.. todo:: Maybe replace this list with a link to ``isso.conf``?\n+\n++-------------------------------------------+-----------------------------------+\n+| These HTML tags are allowed by default:   | These HTML *attributes* allowed   |\n+|                                           | by default:                       |\n+| ``<a>``, ``<blockquote>``, ``<br>``,      |                                   |\n+| ``<code>``, ``<del>``, ``<em>``,          | ``align`` (for tables) and        |\n+| ``<h1>``, ``<h2>``, ``<h3>``, ``<h4>``,   | ``href`` (for ``<a href=\"...\">``) |\n+| ``<h5>``, ``<h6>``, ``<hr>``, ``<ins>``,  |                                   |\n+| ``<li>``, ``<ol>``, ``<p>``, ``<pre>``,   |                                   |\n+| ``<strong>``, ``<table>``, ``<tbody>``,   |                                   |\n+| ``<td>``, ``<th>``, ``<thead>``,          |                                   |\n+| ``<ul>``.                                 |                                   |\n++-------------------------------------------+-----------------------------------+\n+\n+Elements and attributes not in the allowed list will just be stripped.\n+``<foo bar=1>text</foo>`` will simply become ``text``.\n+\n+.. note:: Keep in mind that removing an element from the allowed tags will not\n+   only disallow commenters from entering it as a plain HTML tag, but also\n+   remove formatting from any markdown that would generate the tag.\n+\n+   An example: Allowed elements are ``['a', 'strong']``. Then ``Some *text*``\n+   would not be rendered in italics since the ``em`` element would be\n+   forbidden.\n+\n+Line breaks\n+-----------\n+\n+By default, Markdown requires two new lines to create a paragraph break.\n+E.g. this block:\n+\n+.. code-block:: markdown\n+\n+   This is a quite **long paragraph** that spans multiple lines,\n+   which is split over multiple lines in the Markdown source code.\n+\n+   Thus, the width remains under about 80 characters and the writer does not\n+   have to scroll so far to the right.\n+\n+will be rendered as:\n+\n+    This is a quite **long paragraph** that spans multiple lines,\n+    which is split over multiple lines in the Markdown source code.\n+\n+    Thus, the width remains under about 80 characters and the writer does not\n+    have to scroll so far to the right.\n+\n+Set ``hard-wrap`` in ``[markup] flags`` to only require a single newline to\n+create a line break (``<br>``):\n+\n+.. code-block:: markdown\n+\n+   One line.\n+   Another line.\n+\n+will then be rendered as:\n+\n+   | One line.\n+   | Another line.\n+\n+\n+Defaults and available options\n+------------------------------\n+\n+.. _available-markdown-options:\n+\n+.. note:: Make sure to use e.g. ``fenced-code`` (with a ``-`` dash) instead of\n+   ``fenced_code`` (underline) to refer to extension names.\n+\n+The following behavior is **enabled by default:**\n+\n+.. role::  raw-html(raw)\n+    :format: html\n+\n++----------------------------------------------------------+-------------------+\n+| Explanation                                              | Extension name    |\n++==========================================================+===================+\n+| Automatically convert ``http://`` links and email        | ``autolink``      |\n+| addresses into clickable links, even if commenters did   |                   |\n+| not format them using ``[text](http://link.site)``       |                   |\n++----------------------------------------------------------+-------------------+\n+| Blocks that are surrounded by triple backticks (```````) | ``fenced-code``   |\n+| at the beginning and at the end are rendered as code     |                   |\n+| blocks, without needing to be indented.                  |                   |\n++----------------------------------------------------------+-------------------+\n+| Text surrounded in two ``~`` gets a line through:        | ``strikethrough`` |\n+| ``Text ~~deleted~~``                                     |                   |\n+| :raw-html:`&rarr; Text <del>deleted</del>`               |                   |\n++----------------------------------------------------------+-------------------+\n+| Text after the ``^`` character is rendered as            | ``superscript``   |\n+| \"superscript\": ``Intelligence^2`` :raw-html:`&rarr;`     |                   |\n+| Intelligence\\ :sup:`2`.                                  |                   |\n++----------------------------------------------------------+-------------------+\n+\n+The following **additional options** are available:\n+\n++----------------------------------------------------------+---------------------------+\n+| Explanation                                              | Extension name            |\n++==========================================================+===========================+\n+| Ignore indented code blocks                              | ``disable-indented-code`` |\n++----------------------------------------------------------+---------------------------+\n+| Parse inline LaTeX-style math blocks, such as            | ``math``                  |\n+| inline ``$equations$`` or display ``$$equations$$``      |                           |\n++----------------------------------------------------------+---------------------------+\n+| Normally, everything between two ``_underscores_`` would | ``no-intra-emphasis``     |\n+| be rendered with *emphasis*. This option disables        |                           |\n+| parsing of underscores *within* words.                   |                           |\n+| ``A_good_day`` :raw-html:`&rarr;` A_good_day,            |                           |\n+| not A\\ *good*\\ day                                       |                           |\n++----------------------------------------------------------+---------------------------+\n+| Parse markdown footnotes. Not recommended because        | ``footnotes``             |\n+| multiple footnotes by different commenters on the same   |                           |\n+| page could clash due to duplicate links to footnotes.    |                           |\n++----------------------------------------------------------+---------------------------+\n+| Use two ``=`` signs like ``==this==`` to highlight text  | ``highlight``             |\n++----------------------------------------------------------+---------------------------+\n+| Text inside quotes gets a special \"quote\" class.         | ``quote``                 |\n+| Perhaps useful for styling in CSS                        |                           |\n++----------------------------------------------------------+---------------------------+\n+| Enable Markdown tables                                   | ``tables``                |\n++----------------------------------------------------------+---------------------------+\n+| Instead of ``_underscore`` resulting in *emphasis*,      | ``underline``             |\n+| the resulting text will be... underlined                 |                           |\n++----------------------------------------------------------+---------------------------+\n+\n+.. todo:: ``no-intra-emphasis`` should be made default\n+\n+.. seealso::\n+    The `flask-misaka docs <https://flask-misaka.readthedocs.io/en/latest/#options>`_\n+    also have a good explanation of what each extension options does."
    },
    {
      "sha": "95f49e9fdd930841476cd9bfaee8351558a8ff9a",
      "filename": "docs/docs/reference/server-config.rst",
      "status": "modified",
      "additions": 11,
      "deletions": 4,
      "changes": 15,
      "blob_url": "https://github.com/posativ/isso/blob/7e621d94013e0054a916d432ff18923b14923089/docs%2Fdocs%2Freference%2Fserver-config.rst",
      "raw_url": "https://github.com/posativ/isso/raw/7e621d94013e0054a916d432ff18923b14923089/docs%2Fdocs%2Freference%2Fserver-config.rst",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2Fdocs%2Freference%2Fserver-config.rst?ref=7e621d94013e0054a916d432ff18923b14923089",
      "patch": "@@ -385,12 +385,13 @@ Markup\n \n Customize markup and sanitized HTML. Currently, only Markdown (via Misaka) is\n supported, but new languages are relatively easy to add.\n+For a more detailed explanation, see :doc:`/docs/reference/markdown-config`.\n \n .. code-block:: ini\n \n     [markup]\n     options = strikethrough, superscript, autolink, fenced-code\n-    flags = skip-html, escape, hard-wrap\n+    flags =\n     allowed-elements =\n     allowed-attributes =\n \n@@ -399,12 +400,12 @@ options\n     extension options can be used there, separated by comma, either by their\n     name (``fenced-code``) or as ``EXT_FENCED_CODE``.\n \n-    The `flask-misaka docs <https://flask-misaka.readthedocs.io/en/latest/#options>`_\n-    have a good explanation of what each extension options does.\n-\n     Note: Use e.g. ``fenced-code`` (with a ``-`` dash) instead of\n     ``fenced_code`` (underline) to refer to extension names.\n \n+    For a more detailed explanation, see\n+    :ref:`Markdown Configuration: Extensions <available-markdown-options>`\n+\n     Default: ``strikethrough, superscript, autolink, fenced-code``\n \n flags\n@@ -413,6 +414,8 @@ flags\n     can be used here, separated by comma, either by their name (``hard-wrap``)\n     or as e.g. ``HTML_HARD_WRAP``.\n \n+    For a more detailed explanation, see :doc:`/docs/reference/markdown-config`.\n+\n     Default: (empty)\n \n     .. versionadded:: 0.12.4\n@@ -425,6 +428,8 @@ allowed-elements\n     ``ol``, ``p``, ``pre``, ``strong``, ``table``, ``tbody``, ``td``, ``th``,\n     ``thead`` and ``ul`` are allowed.\n \n+    For a more detailed explanation, see :doc:`/docs/reference/markdown-config`.\n+\n     .. warning::\n \n        This option (together with ``allowed-attributes``) is frequently\n@@ -444,6 +449,8 @@ allowed-attributes\n     By default, only ``align`` and ``href`` are allowed (same caveats as for\n     ``allowed-elements`` above apply)\n \n+    For a more detailed explanation, see :doc:`/docs/reference/markdown-config`.\n+\n     Default: (empty)\n \n .. note:: To allow images in comments, you need to add"
    },
    {
      "sha": "ed0e77f48eb69b2f6560da5f14ba1f71c7835202",
      "filename": "docs/docs/toc.rst",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/posativ/isso/blob/7e621d94013e0054a916d432ff18923b14923089/docs%2Fdocs%2Ftoc.rst",
      "raw_url": "https://github.com/posativ/isso/raw/7e621d94013e0054a916d432ff18923b14923089/docs%2Fdocs%2Ftoc.rst",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/docs%2Fdocs%2Ftoc.rst?ref=7e621d94013e0054a916d432ff18923b14923089",
      "patch": "@@ -19,6 +19,7 @@\n    Installation <reference/installation>\n    Server Configuration <reference/server-config>\n    Client Configuration <reference/client-config>\n+   Markdown Configuration <reference/markdown-config>\n    Deployment <reference/deployment>\n    Multiple Sites & Sub-URI <reference/multi-site-sub-uri>\n    Server API <reference/server-api>"
    }
  ]
}
