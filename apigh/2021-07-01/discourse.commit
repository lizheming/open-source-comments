{
  "sha": "e4aa02365cc34c275c9a4bbddddf7bc887f959f9",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODplNGFhMDIzNjVjYzM0YzI3NWM5YTRiYmRkZGRmN2JjODg3Zjk1OWY5",
  "commit": {
    "author": {
      "name": "Jarek Radosz",
      "email": "jradosz@gmail.com",
      "date": "2021-07-01T08:58:26Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2021-07-01T08:58:26Z"
    },
    "message": "FIX: Set class on color scheme links in bootstrap (#13594)\n\nExposes to Ember CLI environment the feature provided in the production env by `lib/stylesheet/manager.rb:295`.\r\n\r\nFixes development env compatibility with discourse-color-scheme-toggle.",
    "tree": {
      "sha": "7a63d4591a9592e912c5dee646a4a1a1158d8af2",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/7a63d4591a9592e912c5dee646a4a1a1158d8af2"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/e4aa02365cc34c275c9a4bbddddf7bc887f959f9",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJg3YOyCRBK7hj4Ov3rIwAALwgIAFeJAcZl1iozgdeEOFzgcbXe\nca9rCnX9G0TE4EiJXRQsYmc8cwAvit/63aQhDkOpn3816x28/Cg+nf4g2H5AijII\ndbBGy30lh5QFwv1WPz3rOA9kpArI8/gy+gg8ACCgYLWSfBkT2g6DugdmkdlukxHZ\nWPy4F/ED5QGF+4lYrvyFg1E+pEkrss5KuOXWZh7t27qsp3DNPJacuSGm+S7nStIb\nKtGeWpDcTxXA+ofWVDTJJMUCvrJv7eAX2iN0K80CZQbNkhQnnB4frTmZ+EkTShso\ne1G4oj+BS4GmrDHQGk2B7k7MZP+C1N7f1t6HMijJNnnNM97ESKqD8we6p//PThE=\n=7RKq\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 7a63d4591a9592e912c5dee646a4a1a1158d8af2\nparent eb898e5523eaf5e9d7e62bf598f1605da757c88c\nauthor Jarek Radosz <jradosz@gmail.com> 1625129906 +0200\ncommitter GitHub <noreply@github.com> 1625129906 +0200\n\nFIX: Set class on color scheme links in bootstrap (#13594)\n\nExposes to Ember CLI environment the feature provided in the production env by `lib/stylesheet/manager.rb:295`.\r\n\r\nFixes development env compatibility with discourse-color-scheme-toggle."
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/e4aa02365cc34c275c9a4bbddddf7bc887f959f9",
  "html_url": "https://github.com/discourse/discourse/commit/e4aa02365cc34c275c9a4bbddddf7bc887f959f9",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/e4aa02365cc34c275c9a4bbddddf7bc887f959f9/comments",
  "author": {
    "login": "CvX",
    "id": 66961,
    "node_id": "MDQ6VXNlcjY2OTYx",
    "avatar_url": "https://avatars.githubusercontent.com/u/66961?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/CvX",
    "html_url": "https://github.com/CvX",
    "followers_url": "https://api.github.com/users/CvX/followers",
    "following_url": "https://api.github.com/users/CvX/following{/other_user}",
    "gists_url": "https://api.github.com/users/CvX/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/CvX/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/CvX/subscriptions",
    "organizations_url": "https://api.github.com/users/CvX/orgs",
    "repos_url": "https://api.github.com/users/CvX/repos",
    "events_url": "https://api.github.com/users/CvX/events{/privacy}",
    "received_events_url": "https://api.github.com/users/CvX/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "eb898e5523eaf5e9d7e62bf598f1605da757c88c",
      "url": "https://api.github.com/repos/discourse/discourse/commits/eb898e5523eaf5e9d7e62bf598f1605da757c88c",
      "html_url": "https://github.com/discourse/discourse/commit/eb898e5523eaf5e9d7e62bf598f1605da757c88c"
    }
  ],
  "stats": {
    "total": 13,
    "additions": 9,
    "deletions": 4
  },
  "files": [
    {
      "sha": "73fbcba86a732952a08c1636f9da3b6f318bd513",
      "filename": "app/assets/javascripts/discourse/lib/bootstrap-json/index.js",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/discourse/discourse/blob/e4aa02365cc34c275c9a4bbddddf7bc887f959f9/app/assets/javascripts/discourse/lib/bootstrap-json/index.js",
      "raw_url": "https://github.com/discourse/discourse/raw/e4aa02365cc34c275c9a4bbddddf7bc887f959f9/app/assets/javascripts/discourse/lib/bootstrap-json/index.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/lib/bootstrap-json/index.js?ref=e4aa02365cc34c275c9a4bbddddf7bc887f959f9",
      "patch": "@@ -65,6 +65,9 @@ function head(buffer, bootstrap) {\n     if (s.theme_id) {\n       attrs.push(`data-theme-id=\"${s.theme_id}\"`);\n     }\n+    if (s.class) {\n+      attrs.push(`class=\"${s.class}\"`);\n+    }\n     let link = `<link rel=\"stylesheet\" type=\"text/css\" href=\"${\n       s.href\n     }\" ${attrs.join(\" \")}></script>\\n`;"
    },
    {
      "sha": "e10120e0c52e8bd233770fc04ce5daa2d8ed9345",
      "filename": "app/controllers/bootstrap_controller.rb",
      "status": "modified",
      "additions": 6,
      "deletions": 4,
      "changes": 10,
      "blob_url": "https://github.com/discourse/discourse/blob/e4aa02365cc34c275c9a4bbddddf7bc887f959f9/app/controllers/bootstrap_controller.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/e4aa02365cc34c275c9a4bbddddf7bc887f959f9/app/controllers/bootstrap_controller.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/controllers/bootstrap_controller.rb?ref=e4aa02365cc34c275c9a4bbddddf7bc887f959f9",
      "patch": "@@ -17,8 +17,10 @@ def index\n     end\n \n     @stylesheets = []\n-    add_scheme(scheme_id, 'all')\n-    add_scheme(dark_scheme_id, '(prefers-color-scheme: dark)')\n+\n+    add_scheme(scheme_id, \"all\", \"light-scheme\")\n+    add_scheme(dark_scheme_id, \"(prefers-color-scheme: dark)\", \"dark-scheme\")\n+\n     if rtl?\n       add_style(mobile_view? ? :mobile_rtl : :desktop_rtl)\n     else\n@@ -73,11 +75,11 @@ def index\n   end\n \n private\n-  def add_scheme(scheme_id, media)\n+  def add_scheme(scheme_id, media, css_class)\n     return if scheme_id.to_i == -1\n \n     if style = Stylesheet::Manager.new(theme_id: theme_id).color_scheme_stylesheet_details(scheme_id, media)\n-      @stylesheets << { href: style[:new_href], media: media }\n+      @stylesheets << { href: style[:new_href], media: media, class: css_class }\n     end\n   end\n "
    }
  ]
}
