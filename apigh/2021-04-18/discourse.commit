{
  "sha": "8c6ea967aefadbd2133e635190b85107d862e4d7",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODo4YzZlYTk2N2FlZmFkYmQyMTMzZTYzNTE5MGI4NTEwN2Q4NjJlNGQ3",
  "commit": {
    "author": {
      "name": "Andrei Prigorshnev",
      "email": "a.prigorshnev@gmail.com",
      "date": "2021-04-17T19:40:09Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2021-04-17T19:40:09Z"
    },
    "message": "FEATURE: Show the slow mode indicator in composer (#12720)",
    "tree": {
      "sha": "8e6c70e42947f66437b90478b3ca91b8e39a0a35",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/8e6c70e42947f66437b90478b3ca91b8e39a0a35"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/8c6ea967aefadbd2133e635190b85107d862e4d7",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgezmZCRBK7hj4Ov3rIwAAv8wIAHSBLS34vm7Yytn73vIJ4p83\ngUfGrk4QXqPkeC7JBgOk0Gurl7j2g+397x+gwH+XeWnFha4WVndGSiLNpRmTInDQ\nRPjWBx+PxbU2+6d6X3rkMVnGqIC+fZFdEmQ9HpfRv6bUMNxS9eoTbZn9TKFA/B5V\nSXSA0YLdZqlrRR+PYQAunb+EFBIq7+bNNU6MrLOyIv2+l4IF16uNnt+XqnRr8RQI\n3Ai/3qgmFnzNwRuogiO7jkuapLXPi43GSCiw+P6XeGBr44fmELrcA2IyTuyIaxZa\ncXUZmP2mfaAtxvHESSR0gavX9GdbkELvILFr29xu+/Z3h2SRTMXK/Bt23jm8t/A=\n=xern\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 8e6c70e42947f66437b90478b3ca91b8e39a0a35\nparent 75abe8d295072235a7555cd5c18f9d9e6d259b3c\nauthor Andrei Prigorshnev <a.prigorshnev@gmail.com> 1618688409 +0400\ncommitter GitHub <noreply@github.com> 1618688409 +0400\n\nFEATURE: Show the slow mode indicator in composer (#12720)\n\n"
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/8c6ea967aefadbd2133e635190b85107d862e4d7",
  "html_url": "https://github.com/discourse/discourse/commit/8c6ea967aefadbd2133e635190b85107d862e4d7",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/8c6ea967aefadbd2133e635190b85107d862e4d7/comments",
  "author": {
    "login": "AndrewPrigorshnev",
    "id": 1274517,
    "node_id": "MDQ6VXNlcjEyNzQ1MTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1274517?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AndrewPrigorshnev",
    "html_url": "https://github.com/AndrewPrigorshnev",
    "followers_url": "https://api.github.com/users/AndrewPrigorshnev/followers",
    "following_url": "https://api.github.com/users/AndrewPrigorshnev/following{/other_user}",
    "gists_url": "https://api.github.com/users/AndrewPrigorshnev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AndrewPrigorshnev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AndrewPrigorshnev/subscriptions",
    "organizations_url": "https://api.github.com/users/AndrewPrigorshnev/orgs",
    "repos_url": "https://api.github.com/users/AndrewPrigorshnev/repos",
    "events_url": "https://api.github.com/users/AndrewPrigorshnev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AndrewPrigorshnev/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "75abe8d295072235a7555cd5c18f9d9e6d259b3c",
      "url": "https://api.github.com/repos/discourse/discourse/commits/75abe8d295072235a7555cd5c18f9d9e6d259b3c",
      "html_url": "https://github.com/discourse/discourse/commit/75abe8d295072235a7555cd5c18f9d9e6d259b3c"
    }
  ],
  "stats": {
    "total": 31,
    "additions": 18,
    "deletions": 13
  },
  "files": [
    {
      "sha": "f3221e25aa75864a88b0068341a98f410a26e73b",
      "filename": "app/assets/javascripts/select-kit/addon/components/composer-actions.js",
      "status": "modified",
      "additions": 18,
      "deletions": 13,
      "changes": 31,
      "blob_url": "https://github.com/discourse/discourse/blob/8c6ea967aefadbd2133e635190b85107d862e4d7/app/assets/javascripts/select-kit/addon/components/composer-actions.js",
      "raw_url": "https://github.com/discourse/discourse/raw/8c6ea967aefadbd2133e635190b85107d862e4d7/app/assets/javascripts/select-kit/addon/components/composer-actions.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/addon/components/composer-actions.js?ref=8c6ea967aefadbd2133e635190b85107d862e4d7",
      "patch": "@@ -5,13 +5,13 @@ import {\n   PRIVATE_MESSAGE,\n   REPLY,\n } from \"discourse/models/composer\";\n+import discourseComputed from \"discourse-common/utils/decorators\";\n import Draft from \"discourse/models/draft\";\n import DropdownSelectBoxComponent from \"select-kit/components/dropdown-select-box\";\n import I18n from \"I18n\";\n import bootbox from \"bootbox\";\n import { camelize } from \"@ember/string\";\n-import { computed } from \"@ember/object\";\n-import { equal } from \"@ember/object/computed\";\n+import { equal, gt } from \"@ember/object/computed\";\n import { isEmpty } from \"@ember/utils\";\n \n // Component can get destroyed and lose state\n@@ -30,6 +30,7 @@ export default DropdownSelectBoxComponent.extend({\n   pluginApiIdentifiers: [\"composer-actions\"],\n   classNames: [\"composer-actions\"],\n   isEditing: equal(\"action\", EDIT),\n+  isInSlowMode: gt(\"topic.slow_mode_seconds\", 0),\n \n   selectKitOptions: {\n     icon: \"iconForComposerAction\",\n@@ -38,23 +39,26 @@ export default DropdownSelectBoxComponent.extend({\n     preventHeaderFocus: true,\n   },\n \n-  iconForComposerAction: computed(\"action\", \"whisper\", \"noBump\", function () {\n-    if (this.isEditing) {\n-      return \"pencil-alt\";\n-    } else if (this.action === CREATE_TOPIC) {\n+  @discourseComputed(\"isEditing\", \"action\", \"whisper\", \"noBump\", \"isInSlowMode\")\n+  iconForComposerAction(isEditing, action, whisper, noBump, isInSlowMode) {\n+    if (action === CREATE_TOPIC) {\n       return \"plus\";\n-    } else if (this.action === PRIVATE_MESSAGE) {\n+    } else if (action === PRIVATE_MESSAGE) {\n       return \"envelope\";\n-    } else if (this.action === CREATE_SHARED_DRAFT) {\n+    } else if (action === CREATE_SHARED_DRAFT) {\n       return \"far-clipboard\";\n-    } else if (this.whisper) {\n+    } else if (whisper) {\n       return \"far-eye-slash\";\n-    } else if (this.noBump) {\n+    } else if (noBump) {\n       return \"anchor\";\n+    } else if (isInSlowMode) {\n+      return \"hourglass-start\";\n+    } else if (isEditing) {\n+      return \"pencil-alt\";\n     } else {\n       return \"share\";\n     }\n-  }),\n+  },\n \n   contentChanged() {\n     this.set(\"seq\", this.seq + 1);\n@@ -96,7 +100,8 @@ export default DropdownSelectBoxComponent.extend({\n     return {};\n   },\n \n-  content: computed(\"seq\", function () {\n+  @discourseComputed(\"seq\")\n+  content() {\n     let items = [];\n \n     if (\n@@ -251,7 +256,7 @@ export default DropdownSelectBoxComponent.extend({\n     }\n \n     return items;\n-  }),\n+  },\n \n   _replyFromExisting(options, post, topic) {\n     this.closeComposer();"
    }
  ]
}
