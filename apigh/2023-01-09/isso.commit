{
  "sha": "deec1ee5ffaaf45b1b6953009af6c1810817c327",
  "node_id": "C_kwDOAF-mA9oAKGRlZWMxZWU1ZmZhYWY0NWIxYjY5NTMwMDlhZjZjMTgxMDgxN2MzMjc",
  "commit": {
    "author": {
      "name": "Chris Warrick",
      "email": "kwpolska@gmail.com",
      "date": "2023-01-07T13:59:15Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2023-01-07T13:59:15Z"
    },
    "message": "ext.notifications: Avoid error if headers are None (#943)\n\nIf using the uwsgi e-mail system, the attempt to do headers.encode()\r\nwould cause an AttributeError if there were no headers.",
    "tree": {
      "sha": "98fe64e75b375b74a4e376f37e45b32b7d267b86",
      "url": "https://api.github.com/repos/posativ/isso/git/trees/98fe64e75b375b74a4e376f37e45b32b7d267b86"
    },
    "url": "https://api.github.com/repos/posativ/isso/git/commits/deec1ee5ffaaf45b1b6953009af6c1810817c327",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjuXqzCRBK7hj4Ov3rIwAAxCgIAI6H9p323a4V4GBTPw7AdVSg\nItCRiZ0Bcttibu+iAjXBa3ySdk7QKxrNSugWSBbaxA5icRSatN2mYatEYsh9rrRg\n5DlAtgNYoEtybq0xzYE7b3kzrBh3n3QPUZ02nQwpdXnbqUk3XJhHM9BCAHl0o7yD\nGGC7LmUoBOQQ6UNoQlCW/qEcBo6oz2N26JnKH4mtN+rdKdasdVLofx1DJiBN74sQ\nNGIfhuVBiondXw8zT7eEIFEtWJR5/ktZPFtWM+cPtKR7NQ2X4FB97xBMhHySeyZk\n9kY+ASlCCyT7YOhg0R3ZjqIBMCIf3+t6BYQAmY6Cx0gKqL5NiX/+OT+J6Z7oVJM=\n=lzQc\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 98fe64e75b375b74a4e376f37e45b32b7d267b86\nparent 13f7a9357708584a87704c099168e9c1bb90624a\nauthor Chris Warrick <kwpolska@gmail.com> 1673099955 +0100\ncommitter GitHub <noreply@github.com> 1673099955 +0000\n\next.notifications: Avoid error if headers are None (#943)\n\nIf using the uwsgi e-mail system, the attempt to do headers.encode()\r\nwould cause an AttributeError if there were no headers."
    }
  },
  "url": "https://api.github.com/repos/posativ/isso/commits/deec1ee5ffaaf45b1b6953009af6c1810817c327",
  "html_url": "https://github.com/posativ/isso/commit/deec1ee5ffaaf45b1b6953009af6c1810817c327",
  "comments_url": "https://api.github.com/repos/posativ/isso/commits/deec1ee5ffaaf45b1b6953009af6c1810817c327/comments",
  "author": {
    "login": "Kwpolska",
    "id": 327323,
    "node_id": "MDQ6VXNlcjMyNzMyMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/327323?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Kwpolska",
    "html_url": "https://github.com/Kwpolska",
    "followers_url": "https://api.github.com/users/Kwpolska/followers",
    "following_url": "https://api.github.com/users/Kwpolska/following{/other_user}",
    "gists_url": "https://api.github.com/users/Kwpolska/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Kwpolska/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Kwpolska/subscriptions",
    "organizations_url": "https://api.github.com/users/Kwpolska/orgs",
    "repos_url": "https://api.github.com/users/Kwpolska/repos",
    "events_url": "https://api.github.com/users/Kwpolska/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Kwpolska/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "13f7a9357708584a87704c099168e9c1bb90624a",
      "url": "https://api.github.com/repos/posativ/isso/commits/13f7a9357708584a87704c099168e9c1bb90624a",
      "html_url": "https://github.com/posativ/isso/commit/13f7a9357708584a87704c099168e9c1bb90624a"
    }
  ],
  "stats": {
    "total": 3,
    "additions": 3,
    "deletions": 0
  },
  "files": [
    {
      "sha": "1841f683215a20582a4af33b93b354a6e686db7f",
      "filename": "isso/ext/notifications.py",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/posativ/isso/blob/deec1ee5ffaaf45b1b6953009af6c1810817c327/isso%2Fext%2Fnotifications.py",
      "raw_url": "https://github.com/posativ/isso/raw/deec1ee5ffaaf45b1b6953009af6c1810817c327/isso%2Fext%2Fnotifications.py",
      "contents_url": "https://api.github.com/repos/posativ/isso/contents/isso%2Fext%2Fnotifications.py?ref=deec1ee5ffaaf45b1b6953009af6c1810817c327",
      "patch": "@@ -168,7 +168,10 @@ def sendmail(self, subject, body, thread, comment, to=None, headers=None):\n         if not subject:\n             # Fallback, just in case as an empty subject does not work\n             subject = 'isso notification'\n+\n         if uwsgi:\n+            if not headers:\n+                headers = ''\n             uwsgi.spool({b\"subject\": subject.encode(\"utf-8\"),\n                          b\"body\": body.encode(\"utf-8\"),\n                          b\"to\": to.encode(\"utf-8\"),"
    }
  ]
}
